<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: m0_reqh_service_ops Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d1/dce/structm0__reqh__service__ops.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">m0_reqh_service_ops Struct Reference<div class="ingroups"><a class="el" href="../../d5/d8c/group__reqh.html">Request handler</a> &raquo; <a class="el" href="../../da/ddc/group__reqhservice.html">Request handler service</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for m0_reqh_service_ops:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/dcf/structm0__reqh__service__ops__coll__graph.png" border="0" usemap="#m0__reqh__service__ops_coll__map" alt="Collaboration graph"/></div>
<map name="m0__reqh__service__ops_coll__map" id="m0__reqh__service__ops_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a6bdca00846d0bf0e7d3153cb815d8ade"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dce/structm0__reqh__service__ops.html#a6bdca00846d0bf0e7d3153cb815d8ade">rso_start_async</a> )(struct <a class="el" href="../../dd/ddf/structm0__reqh__service__start__async__ctx.html">m0_reqh_service_start_async_ctx</a> *asc)</td></tr>
<tr class="separator:a6bdca00846d0bf0e7d3153cb815d8ade"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a406a0a4e300094e5d4faa9f673bfc0d8"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dce/structm0__reqh__service__ops.html#a406a0a4e300094e5d4faa9f673bfc0d8">rso_start</a> )(struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td></tr>
<tr class="separator:a406a0a4e300094e5d4faa9f673bfc0d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad588804bd0b60d9332b595900ad6d4f0"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dce/structm0__reqh__service__ops.html#ad588804bd0b60d9332b595900ad6d4f0">rso_prepare_to_stop</a> )(struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td></tr>
<tr class="separator:ad588804bd0b60d9332b595900ad6d4f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af83f5062da9151f47bae7686c50143d4"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dce/structm0__reqh__service__ops.html#af83f5062da9151f47bae7686c50143d4">rso_stop</a> )(struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td></tr>
<tr class="separator:af83f5062da9151f47bae7686c50143d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7373b0a274aeff62d7beecb9e19e1c9b"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dce/structm0__reqh__service__ops.html#a7373b0a274aeff62d7beecb9e19e1c9b">rso_fini</a> )(struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td></tr>
<tr class="separator:a7373b0a274aeff62d7beecb9e19e1c9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e4e4ace01603a888374f273b9908feb"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dce/structm0__reqh__service__ops.html#a2e4e4ace01603a888374f273b9908feb">rso_fop_accept</a> )(struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>, struct <a class="el" href="../../d5/d01/structm0__fop.html">m0_fop</a> *<a class="el" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>)</td></tr>
<tr class="separator:a2e4e4ace01603a888374f273b9908feb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8085dcd563d806cd3759209e51269d1"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../da/ddc/group__reqhservice.html#gab45c0e04ff63ce06a15a5e18976885f7">m0_service_health</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dce/structm0__reqh__service__ops.html#ad8085dcd563d806cd3759209e51269d1">rso_health</a> )(struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td></tr>
<tr class="separator:ad8085dcd563d806cd3759209e51269d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Service specific operations vector. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d27/reqh__service_8h_source.html#l00330">330</a> of file <a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a>.</p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a7373b0a274aeff62d7beecb9e19e1c9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7373b0a274aeff62d7beecb9e19e1c9b">&#9670;&nbsp;</a></span>rso_fini</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* rso_fini) (struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys a particular service. This is invoked from <a class="el" href="../../da/ddc/group__reqhservice.html#ga3e1fdea7d05ff98a6c55a2ef3c584d99">m0_reqh_service_fini()</a>. Initially generic part of the service is finalised, followed by the service specific finalisation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">service</td><td>Service to be finalised</td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../da/ddc/group__reqhservice.html#ga3e1fdea7d05ff98a6c55a2ef3c584d99">m0_reqh_service_fini()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d27/reqh__service_8h_source.html#l00399">399</a> of file <a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a>.</p>

</div>
</div>
<a id="a2e4e4ace01603a888374f273b9908feb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e4e4ace01603a888374f273b9908feb">&#9670;&nbsp;</a></span>rso_fop_accept</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* rso_fop_accept) (struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>, struct <a class="el" href="../../d5/d01/structm0__fop.html">m0_fop</a> *<a class="el" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Method to determine if an incoming FOP for this service should be accepted when the service is stopping or will shortly be stopped. The method is optional and need not be specified. </p><dl class="section see"><dt>See also</dt><dd>m0_reqh_fop_policy </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d27/reqh__service_8h_source.html#l00408">408</a> of file <a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a>.</p>

</div>
</div>
<a id="ad8085dcd563d806cd3759209e51269d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8085dcd563d806cd3759209e51269d1">&#9670;&nbsp;</a></span>rso_health</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../da/ddc/group__reqhservice.html#gab45c0e04ff63ce06a15a5e18976885f7">m0_service_health</a>(* rso_health) (struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Method to determine that service functioning properly and is able to process incoming requests. If some error happens during invocation, then M0_HEALTH_UNKNOWN should be returned. The method is optional. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d27/reqh__service_8h_source.html#l00417">417</a> of file <a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a>.</p>

</div>
</div>
<a id="ad588804bd0b60d9332b595900ad6d4f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad588804bd0b60d9332b595900ad6d4f0">&#9670;&nbsp;</a></span>rso_prepare_to_stop</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* rso_prepare_to_stop) (struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Optional method to notify the service that the request handler is preparing to shut down. After this call is made the request handler will block waiting for FOM termination, so any long lived service FOMs should notified that they should stop by this method. The service will be in the M0_RST_STOPPING state when the method is invoked. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d27/reqh__service_8h_source.html#l00371">371</a> of file <a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a>.</p>

</div>
</div>
<a id="a406a0a4e300094e5d4faa9f673bfc0d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a406a0a4e300094e5d4faa9f673bfc0d8">&#9670;&nbsp;</a></span>rso_start</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* rso_start) (struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Optional operation to perform service specific startup operations synchronously. Either this method or <a class="el" href="../../d1/dce/structm0__reqh__service__ops.html#a6bdca00846d0bf0e7d3153cb815d8ade">rso_start_async()</a> must be provided.</p>
<p>Once started, incoming requests related to this service are ready to be processed by the corresponding request handler. Service startup can involve operations like initialising service specific fops, &amp;c which may fail due to whichever reason, in that case the service is finalised and appropriate error is returned.</p>
<p>This is invoked from <a class="el" href="../../da/ddc/group__reqhservice.html#gaaa3ff5976658592e379be7c3b9fbd4b0">m0_reqh_service_start()</a>. Once the service specific startup operations are performed, the service is registered with the request handler.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../da/ddc/group__reqhservice.html#gaaa3ff5976658592e379be7c3b9fbd4b0">m0_reqh_service_start()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d27/reqh__service_8h_source.html#l00360">360</a> of file <a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a>.</p>

</div>
</div>
<a id="a6bdca00846d0bf0e7d3153cb815d8ade"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bdca00846d0bf0e7d3153cb815d8ade">&#9670;&nbsp;</a></span>rso_start_async</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* rso_start_async) (struct <a class="el" href="../../dd/ddf/structm0__reqh__service__start__async__ctx.html">m0_reqh_service_start_async_ctx</a> *asc)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Optional operation to asynchronously ready to transition a service to the M0_RST_STARTED state. Either this method or <a class="el" href="../../d1/dce/structm0__reqh__service__ops.html#a406a0a4e300094e5d4faa9f673bfc0d8">rso_start()</a> must be provided.</p>
<p>This method is invoked by <a class="el" href="../../da/ddc/group__reqhservice.html#gae234cde38399e4f7d52f0dda1c66faf4">m0_reqh_service_start_async()</a>.</p>
<dl class="section pre"><dt>Precondition</dt><dd>m0_reqh_service_state_get(asc-&gt;sac_service) == M0_RST_STARTING </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../da/ddc/group__reqhservice.html#gae234cde38399e4f7d52f0dda1c66faf4">m0_reqh_service_start_async()</a>, <a class="el" href="../../da/ddc/group__reqhservice.html#ga9123693036ddc28f5d5c3932fa44b621">m0_reqh_service_started()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d27/reqh__service_8h_source.html#l00341">341</a> of file <a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a>.</p>

</div>
</div>
<a id="af83f5062da9151f47bae7686c50143d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af83f5062da9151f47bae7686c50143d4">&#9670;&nbsp;</a></span>rso_stop</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* rso_stop) (struct <a class="el" href="../../da/d3c/structm0__reqh__service.html">m0_reqh_service</a> *<a class="el" href="../../d1/d9b/flock_8c.html#ad4b84b0614a9a5e8a262bf9fc68c0a10">service</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Performs service specific finalisation of objects. Once stopped, no incoming request related to this service on a node will be processed further. Stopping a service can involve operations like finalising service specific fops, &amp;c. This is invoked from <a class="el" href="../../da/ddc/group__reqhservice.html#gafc872fa6e0ba5d14b088c02a3b97c512">m0_reqh_service_stop()</a>. Once the service specific objects are finalised, the service is unregistered from request handler.</p>
<p>The service will be in the M0_RST_STOPPED state when the method is invoked.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../da/ddc/group__reqhservice.html#gafc872fa6e0ba5d14b088c02a3b97c512">m0_reqh_service_stop()</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d27/reqh__service_8h_source.html#l00387">387</a> of file <a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>reqh/<a class="el" href="../../d7/d27/reqh__service_8h_source.html">reqh_service.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d1/dce/structm0__reqh__service__ops.html">m0_reqh_service_ops</a></li>
    <li class="footer">Generated on Thu Apr 14 2022 14:04:04 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
