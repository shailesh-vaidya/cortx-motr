<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: LNet Transport Device Functional Specification</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/dfc/_l_net_d_r_v_d_l_d-fspec.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">LNet Transport Device Functional Specification </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li><a class="el" href="../../dd/dfc/_l_net_d_r_v_d_l_d-fspec.html#LNetDRVDLD-fspec-ovw">Overview</a></li>
<li><a class="el" href="../../dd/dfc/_l_net_d_r_v_d_l_d-fspec.html#LNetDRVDLD-fspec-ds">Data Structures</a></li>
<li><a class="el" href="../../dd/dfc/_l_net_d_r_v_d_l_d-fspec.html#LNetDRVDLD-fspec-sub">Subroutines</a></li>
<li><a class="el" href="../../dd/dfc/_l_net_d_r_v_d_l_d-fspec.html#LNetDRVDLD-fspec-ioctl">Ioctl Requests</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html">Detailed Functional Specification</a></li>
</ul>
<h1><a class="anchor" id="LNetDRVDLD-fspec-ovw"></a>
Overview</h1>
<p>The LNet Transport Device is a layer between the User LNet Core Transport and the Kernel LNet Core Transport. It provides user-space access to the LNet Kernel Core Transport. The API is presented as a set of ioctl requests that are handled by the LNet Transport Device Driver. Each ioctl request takes an input parameter, which is a pointer to a shared object or a data structure containing the parameters required by the LNet Kernel Core Transport. The device layer handles mapping shared data structures from user space into kernel space and tracks each such shared data structure. The device layer uses APIs in the LNet Kernel Core layer to implement the ioctl request functionality. When requested, the device layer unmaps shared data structures. The device layer also cleans up shared data structures when the user space releases the device prematurely.</p>
<h1><a class="anchor" id="LNetDRVDLD-fspec-ds"></a>
Data Structures</h1>
<p>The API uses the following data structures to represent the parameters to the various ioctl requests. Note that there is not a 1:1 correspondence between these data structures and the operations in the <a class="el" href="../../d8/de0/group___l_net_core.html">LNet Transport Core Interface</a>. Several ioctl requests take the same parameters and use the same data structure to pass those parameters. Some ioctl requests require only a single identifier as a parameters, and thus require no special parameter data structure. A few Core interfaces require no ioctl request, because they operate directly on shared data structures in user space.</p>
<ul>
<li><a class="el" href="../../dc/dfc/structm0__lnet__dev__dom__init__params.html">m0_lnet_dev_dom_init_params</a></li>
<li><a class="el" href="../../d8/d18/structm0__lnet__dev__buf__register__params.html">m0_lnet_dev_buf_register_params</a></li>
<li><a class="el" href="../../df/dd0/structm0__lnet__dev__buf__queue__params.html">m0_lnet_dev_buf_queue_params</a></li>
<li><a class="el" href="../../df/dcc/structm0__lnet__dev__buf__event__wait__params.html">m0_lnet_dev_buf_event_wait_params</a></li>
<li><a class="el" href="../../d8/d29/structm0__lnet__dev__nid__encdec__params.html">m0_lnet_dev_nid_encdec_params</a></li>
<li><a class="el" href="../../d4/d88/structm0__lnet__dev__nidstrs__get__params.html">m0_lnet_dev_nidstrs_get_params</a></li>
<li><a class="el" href="../../d0/d70/structm0__lnet__dev__bev__bless__params.html">m0_lnet_dev_bev_bless_params</a></li>
</ul>
<p>The API includes several operations whose side effect is to pin or unpin shared data corresponding to the following data structures defined in the <a class="el" href="../../d8/de0/group___l_net_core.html">LNet Transport Core Interface</a>.</p>
<ul>
<li><a class="el" href="../../d8/d81/structnlx__core__domain.html">nlx_core_domain</a></li>
<li><a class="el" href="../../d3/d98/structnlx__core__transfer__mc.html">nlx_core_transfer_mc</a></li>
<li><a class="el" href="../../d7/df3/structnlx__core__buffer.html">nlx_core_buffer</a></li>
<li><a class="el" href="../../d1/d4b/structnlx__core__buffer__event.html">nlx_core_buffer_event</a></li>
</ul>
<p>The API tracks its references to these objects using corresponding objects defined in the <a class="el" href="../../d6/d8a/group___k_l_net_core.html">LNet Transport Core Kernel Private Interface</a>.</p>
<ul>
<li><a class="el" href="../../d1/dab/structnlx__kcore__domain.html">nlx_kcore_domain</a></li>
<li><a class="el" href="../../d5/d0b/structnlx__kcore__transfer__mc.html">nlx_kcore_transfer_mc</a></li>
<li><a class="el" href="../../d5/daa/structnlx__kcore__buffer.html">nlx_kcore_buffer</a></li>
<li><a class="el" href="../../d5/df6/structnlx__kcore__buffer__event.html">nlx_kcore_buffer_event</a></li>
</ul>
<p>The API accesses kernel core functionality indirectly through the operations on the <code><a class="el" href="../../d8/df5/structnlx__kcore__ops.html">nlx_kcore_ops</a></code> structure, <code><a class="el" href="../../d1/dab/structnlx__kcore__domain.html#aa7a66970686c19e424ee12541e1ba2e8">nlx_kcore_domain::kd_drv_ops</a></code>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../df/d9e/group___l_net_dev.html">Detailed Functional Specification</a></dd></dl>
<h1><a class="anchor" id="LNetDRVDLD-fspec-sub"></a>
Subroutines</h1>
<p>Subroutines are provided to initialize and finalize the device driver.</p><ul>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga36fd2e4c41d51e4d5c7648e3d475cff6">nlx_dev_init()</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga738edc26ce1fdc35205f17057ec72d30">nlx_dev_fini()</a></li>
</ul>
<p>All other subroutines are internal to the device driver.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../df/d9e/group___l_net_dev.html">Detailed Functional Specification</a></dd></dl>
<h1><a class="anchor" id="LNetDRVDLD-fspec-ioctl"></a>
Ioctl Requests</h1>
<p>The device driver recognizes the following ioctl requests.</p><ul>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga604193f0a227cfe0ef279f652a513684">M0_LNET_DOM_INIT</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#gab70c3b3e49bd6f3871a12f1e49b2922b">M0_LNET_BUF_REGISTER</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga38d0ea03383ce6d9bbd2319ece7bf2b7">M0_LNET_BUF_DEREGISTER</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#gad3a52e7ed4c59376d54738acb99af005">M0_LNET_BUF_MSG_RECV</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga6160a0de3eb8d7dbe8c715cfd3ec5db4">M0_LNET_BUF_MSG_SEND</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga5cfe5d931241ea690c72640ddb877658">M0_LNET_BUF_ACTIVE_RECV</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga89ebe6d201bca9c323a5184a21770bcb">M0_LNET_BUF_ACTIVE_SEND</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga6cb38d6d097b539d7f83e01f9509ecbf">M0_LNET_BUF_PASSIVE_RECV</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga5d4119ae5a0600bf43b8b87a648f8239">M0_LNET_BUF_PASSIVE_SEND</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga949b2c3987936d5cf8238ad7128b305f">M0_LNET_BUF_DEL</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga5fec6938ee8c7fd8592b697c634e79f9">M0_LNET_BUF_EVENT_WAIT</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga515e54b40a50371b20bc45917888f8fe">M0_LNET_NIDSTR_DECODE</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga3cec91339bba374817850a2613a0875e">M0_LNET_NIDSTR_ENCODE</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#gad30e698f8261f6659a86b6038f8c6aa0">M0_LNET_NIDSTRS_GET</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#gadb3f78ab30d5ac26541931bf4e5e9516">M0_LNET_TM_START</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#ga1cdddba87b15e8f14adaf4c5083e231c">M0_LNET_TM_STOP</a></li>
<li><a class="el" href="../../df/d9e/group___l_net_dev.html#gae897fa2a1613b644496aa88de0244cf5">M0_LNET_BEV_BLESS</a></li>
</ul>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../df/d9e/group___l_net_dev.html">Detailed Functional Specification</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d3/dd6/_d_l_d_i_x.html">Detailed Designs</a></li><li class="navelem"><a class="el" href="../../d6/de0/_l_net_d_l_d.html">LNet Transport DLD</a></li><li class="navelem"><a class="el" href="../../da/d74/_l_net_d_r_v_d_l_d.html">LNet Transport Device DLD</a></li>
    <li class="footer">Generated on Thu Apr 14 2022 14:03:26 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
