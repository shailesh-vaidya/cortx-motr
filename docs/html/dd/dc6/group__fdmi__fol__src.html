<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: FDMI FOL source</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/dc6/group__fdmi__fol__src.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">FDMI FOL source<div class="ingroups"><a class="el" href="../../d3/d97/group__fdmi__main.html">File Data Manipulation Interface API</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for FDMI FOL source:</div>
<div class="dyncontent">
<center><table><tr><td><img src="../../dd/dc6/group__fdmi__fol__src.png" border="0" alt="" usemap="#dd_2dc6_2group____fdmi____fol____src"/>
<map name="dd_2dc6_2group____fdmi____fol____src" id="dd_2dc6_2group____fdmi____fol____src">
<area shape="rect" id="node2" href="../../d3/d97/group__fdmi__main.html" title="File Data Manipulation\l Interface API" alt="" coords="5,5,157,47"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc1/structffs__fol__frag__handler.html">ffs_fol_frag_handler</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d54/structm0__fol__fdmi__src__ctx.html">m0_fol_fdmi_src_ctx</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga1ba431e4f9836ccb46fc4210f2ad2585"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga1ba431e4f9836ccb46fc4210f2ad2585">M0_FOL_FRAG_DATA_HANDLER_DECLARE</a>(_opecode,  _get_val_func)</td></tr>
<tr class="separator:ga1ba431e4f9836ccb46fc4210f2ad2585"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga23cc5cdeeb7649ba9b552900f2d1afa9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga23cc5cdeeb7649ba9b552900f2d1afa9">M0_TL_DESCR_DEFINE</a> (ffs_tx, &quot;fdmi fol <a class="el" href="../../d9/d5b/repair_2ut_2xform_8c.html#ab2bc5728a520e102f9b313443b7acc80">src</a> tx <a class="el" href="../../dc/dc9/ut_2tlist_8c.html#a290b1e0e27cc13a1067701409640975a">list</a>&quot;, M0_INTERNAL, struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a>, t_fdmi_linkage, <a class="el" href="../../d7/d08/group__tlist.html#gad07f0c3ab63368b203950b61296591bb">t_magic</a>, <a class="el" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a75b0531ec4d7b09ecfb18bd3be3ba8a4">M0_BE_TX_MAGIC</a>, <a class="el" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119af7f0815957d820440c03c9413a18cac4">M0_BE_TX_ENGINE_MAGIC</a>)</td></tr>
<tr class="separator:ga23cc5cdeeb7649ba9b552900f2d1afa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac31e92954ca7320b3288dea8c05ec106"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#gac31e92954ca7320b3288dea8c05ec106">M0_TL_DEFINE</a> (ffs_tx, M0_INTERNAL, struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a>)</td></tr>
<tr class="separator:gac31e92954ca7320b3288dea8c05ec106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0aa8b3f112b096dd9e5e098e149d6293"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d0f/structm0__dtx.html">m0_dtx</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga0aa8b3f112b096dd9e5e098e149d6293">ffs_get_dtx</a> (struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *src_rec)</td></tr>
<tr class="separator:ga0aa8b3f112b096dd9e5e098e149d6293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7066db0162275a126d1c33c4c4eed179"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga7066db0162275a126d1c33c4c4eed179">be_tx_put_ast_cb</a> (struct <a class="el" href="../../d5/d32/structm0__sm__group.html">m0_sm_group</a> *<a class="el" href="../../d7/d93/mdservice_2ut_2mdstore_8c.html#acd41fa5833804f5ea4357994c4426f90">grp</a>, struct <a class="el" href="../../de/d78/structm0__sm__ast.html">m0_sm_ast</a> *<a class="el" href="../../d0/d5d/ut_2sm_8c.html#a4b66435e3d10ac9a4d9672a0c96fe6b2">ast</a>)</td></tr>
<tr class="separator:ga7066db0162275a126d1c33c4c4eed179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8843c1f7990f208203c027bc115a5ac6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga8843c1f7990f208203c027bc115a5ac6">ffs_tx_inc_refc</a> (struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a> *be_tx, int64_t *<a class="el" href="../../d0/d9e/group__addb2.html#ga34252f899e31c25c14300aaa70e89e1e">counter</a>)</td></tr>
<tr class="separator:ga8843c1f7990f208203c027bc115a5ac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5feae29379611f506fe33aa5c231b0c4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga5feae29379611f506fe33aa5c231b0c4">ffs_tx_dec_refc</a> (struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a> *be_tx, int64_t *<a class="el" href="../../d0/d9e/group__addb2.html#ga34252f899e31c25c14300aaa70e89e1e">counter</a>)</td></tr>
<tr class="separator:ga5feae29379611f506fe33aa5c231b0c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac621a3f51bdc2c3628c715aeca6b68a5"><td class="memItemLeft" align="right" valign="top">static int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#gac621a3f51bdc2c3628c715aeca6b68a5">ffs_rec_get</a> (struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *src_rec)</td></tr>
<tr class="separator:gac621a3f51bdc2c3628c715aeca6b68a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab100785911bad9bbcab18341fea2b7a1"><td class="memItemLeft" align="right" valign="top">static int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#gab100785911bad9bbcab18341fea2b7a1">ffs_rec_put</a> (struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *src_rec)</td></tr>
<tr class="separator:gab100785911bad9bbcab18341fea2b7a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ee22d1a77f04f6189f029f7b8af5b6f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga5ee22d1a77f04f6189f029f7b8af5b6f">ffs_op_node_eval</a> (struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *src_rec, struct <a class="el" href="../../d4/dcf/structm0__fdmi__flt__var__node.html">m0_fdmi_flt_var_node</a> *value_desc, struct <a class="el" href="../../d6/d0b/structm0__fdmi__flt__operand.html">m0_fdmi_flt_operand</a> *<a class="el" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a49f4a8777715593cb60cf41f88d53f62">value</a>)</td></tr>
<tr class="separator:ga5ee22d1a77f04f6189f029f7b8af5b6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab07b5b9582f937f2274c61223541f014"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#gab07b5b9582f937f2274c61223541f014">ffs_op_get</a> (struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *src_rec)</td></tr>
<tr class="separator:gab07b5b9582f937f2274c61223541f014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga225f2143c89e83bce0580b13b1aa6467"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga225f2143c89e83bce0580b13b1aa6467">ffs_op_put</a> (struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *src_rec)</td></tr>
<tr class="separator:ga225f2143c89e83bce0580b13b1aa6467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b72326f4219f4bcad518494f960af1a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga1b72326f4219f4bcad518494f960af1a">ffs_op_encode</a> (struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *src_rec, struct <a class="el" href="../../de/d06/structm0__buf.html">m0_buf</a> *<a class="el" href="../../d9/dd0/structbuf.html">buf</a>)</td></tr>
<tr class="separator:ga1b72326f4219f4bcad518494f960af1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0685854eb2ed22c90ec54094a4600b98"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga0685854eb2ed22c90ec54094a4600b98">ffs_op_decode</a> (struct <a class="el" href="../../de/d06/structm0__buf.html">m0_buf</a> *<a class="el" href="../../d9/dd0/structbuf.html">buf</a>, void **handle)</td></tr>
<tr class="separator:ga0685854eb2ed22c90ec54094a4600b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga07826f5d0de99a2b3d33bc4b462031aa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga07826f5d0de99a2b3d33bc4b462031aa">ffs_op_begin</a> (struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *src_rec)</td></tr>
<tr class="separator:ga07826f5d0de99a2b3d33bc4b462031aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72077b2e14b25e4d96454cf4025b6af2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga72077b2e14b25e4d96454cf4025b6af2">ffs_op_end</a> (struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *src_rec)</td></tr>
<tr class="separator:ga72077b2e14b25e4d96454cf4025b6af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03570d2bc28b2ca6397e223f111c69b5"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga03570d2bc28b2ca6397e223f111c69b5">m0_fol_fdmi_src_init</a> (void)</td></tr>
<tr class="separator:ga03570d2bc28b2ca6397e223f111c69b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80f486049c8f8188614c00631ee54bcf"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga80f486049c8f8188614c00631ee54bcf">m0_fol_fdmi_src_fini</a> (void)</td></tr>
<tr class="separator:ga80f486049c8f8188614c00631ee54bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f620d4bf9068bbb7a1fcedd2a349393"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga5f620d4bf9068bbb7a1fcedd2a349393">m0_fol_fdmi_src_deinit</a> (void)</td></tr>
<tr class="separator:ga5f620d4bf9068bbb7a1fcedd2a349393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6fb58d3d34cad131bc06891aee77d3f5"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga6fb58d3d34cad131bc06891aee77d3f5">m0_fol_fdmi_post_record</a> (struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *<a class="el" href="../../d7/d59/structfom.html">fom</a>)</td></tr>
<tr class="separator:ga6fb58d3d34cad131bc06891aee77d3f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3f5d37e9ee4a6423c7cd7816711daf82"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga3f5d37e9ee4a6423c7cd7816711daf82">m0_fol_fdmi__filter_kv_substring_match</a> (struct <a class="el" href="../../de/d06/structm0__buf.html">m0_buf</a> *<a class="el" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a49f4a8777715593cb60cf41f88d53f62">value</a>, const char **substrings)</td></tr>
<tr class="separator:ga3f5d37e9ee4a6423c7cd7816711daf82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga39e8b572037a20091eb75f8135694783"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#ga39e8b572037a20091eb75f8135694783">m0_fol_fdmi_filter_kv_substring</a> (struct <a class="el" href="../../d5/d9d/structm0__fdmi__eval__ctx.html">m0_fdmi_eval_ctx</a> *<a class="el" href="../../d5/d06/structctx.html">ctx</a>, struct <a class="el" href="../../d4/db7/structm0__conf__fdmi__filter.html">m0_conf_fdmi_filter</a> *filter, struct <a class="el" href="../../d8/d6b/structm0__fdmi__eval__var__info.html">m0_fdmi_eval_var_info</a> *var_info)</td></tr>
<tr class="separator:ga39e8b572037a20091eb75f8135694783"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gac040d7c9587b383b4909db5fa9f4173d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/dc1/structffs__fol__frag__handler.html">ffs_fol_frag_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#gac040d7c9587b383b4909db5fa9f4173d">ffs_frag_handler_array</a> []</td></tr>
<tr class="separator:gac040d7c9587b383b4909db5fa9f4173d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../de/d0a/_f_d_m_i-_d_l_d-fspec.html">FDMI Functional Specification</a></dd></dl>
<p><b>Implementation notes.</b></p>
<p>FDMI needs in-memory representaion of a FOL record to operate on. So, FOL source will increase backend transaction ref counter (fom-&gt;fo_tx.be_tx, using <a class="el" href="../../d5/d54/be_2linux__kernel_2stubs_8c.html#gacfcc8125c47ad5d88b83d1a36711f767">m0_be_tx_get()</a>) to make sure it is not destroyed, and pass <a class="el" href="../../d9/db7/structm0__fom.html#a75cb63301821dc3b5c5c8abea978a3d4">m0_fom::fo_tx</a> as a handle to FDMI. The refcounter will be decremented back once FDMI has completed its processing and all plugins confirm they are done with record.</p>
<p>FDMI refc inc/dec will be kept as a separate counter inside <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a>. This will help prevent/debug cases when FDMI decref calls count does not match incref calls count. At first, we used transaction lock to protect this counter modification, but it caused deadlocks. So we switched to using <a class="el" href="../../d7/d9d/structm0__atomic64.html">m0_atomic64</a> instead. This is OK, since inc/dec operations are never mixed, they are always "in line": N inc operations, followed by N dec operations, so there is no chance of race condition when it decreased to zero, and we initiated tx release operation, and then "someone" decides to increase the counter again.</p>
<p>This is implementation of Phase1, which does not need transaction support (that is, we don't need to re-send FDMI records, which would normally happen in case when plugin for example crashes and re-requests FDMI records starting from X in the past). This assumption results in the following implementation appoach.</p>
<ul>
<li>We will keep transaction "open" until FDMI reports it has completed filter processing (<a class="el" href="../../d8/d9c/structm0__fdmi__src.html#a6fc401f6e8f472066f4b2e5ab36cb7bb">m0_fdmi_src::fs_end()</a>). This simplifies a lot of stuff &ndash; entire FOL record is available in memory for our manipulations (get_value and encode calls).</li>
<li>We will NOT count incref/decref calls, and will completely release the record after <a class="el" href="../../d8/d9c/structm0__fdmi__src.html#a6fc401f6e8f472066f4b2e5ab36cb7bb">m0_fdmi_src::fs_end()</a> call. (We will still implement the counter &ndash; to put in a work-around for future expansion.)</li>
</ul>
<h1><a class="anchor" id="FDMI"></a>
FOL records pruning on plugin side</h1>
<p>FDMI FOL records may be persisted on FDMI plugin side. In this case FDMI plugin must handle duplicates (because the process with FDMI source may restart before receiving "the message had been received" confirmation from FDMI plugin). In case if the source of FDMI records is CAS there might also be duplicates (FDMI FOL records about the same KV operation, but from different CASes due to N-way replication of KV pairs in DIX), and they must also be deduplicated.</p>
<p>One of the deduplication approaches is to have some kind of persistence on FDMI plugin side. Every record is looked up in this persistence and if there is a match then it's a duplicate.</p>
<p>The persistence couldn't grow indefinitely, so there should be a way to prune it. One obvious thing would be to prune records after some timeout, but delayed DTM recovery may make this timeout very high (days, weeks or more). Another approach is to prune the records after it's known for sure that they are not going to be resent again.</p>
<p>Current implementation uses <a class="el" href="../../dd/d43/structm0__fol__rec__header.html#ac2d4cfb90f6a88aa917c014b3956b2ee">m0_fol_rec_header::rh_lsn</a> to send lsn for each FDMI FOL record to FDMI plugin. This lsn (log sequence number) is a monotonically non-decreasing number that represents position of BE transaction in BE log. FOL record is stored along with other BE tx data in BE log and therefore has the same lsn as the corresponding BE tx. Several transactions may have the same lsn in the current implementation, but there is a limit on a number of transactions with the same lsn. <a class="el" href="../../dd/d43/structm0__fol__rec__header.html#af825bdba3bad02617acf8d37b8c11a6c">m0_fol_rec_header::rh_lsn_discarded</a> is an lsn, for which every other transaction with lsn less than rh_lsn_discarded is never going to be sent again from the same BE domain (in the configurations that we are using currently it's equivalent to the Motr process that uses this BE domain). It means that every FDMI FOL record which has all rh_lsn less than corresponding rh_lsn_discarded for its BE domain could be discarded from deduplication persistence because there is nothing in the cluster that is going to send FDMI FOL record about this operation.</p>
<h1><a class="anchor" id="FDMI"></a>
FOL records pruning on plugin side</h1>
<p>There are 2 major cases here:</p>
<ol type="1">
<li>FDMI plugin restarts, FDMI source is not. In this case FDMI source needs to resend everything FDMI plugin hasn't confirmed consumption for. This could be done by FDMI source dock fom by indefinitely resending FDMI records until either FDMI plugin confirms consumption or FDMI plugin process fails permanently.</li>
<li>FDMI source restarts. The following description is about this case.</li>
</ol>
<p>FDMI source may restart unexpectedly (crash/restart) or it might restart gracefully (graceful shutdown/startup). In either case there may be FDMI FOL records that don't have consumption confirmation from FDMI plugin. Current implementation takes BE tx reference until there is such confirmation from FDMI plugin. BE tx reference taken means in this case that BE tx wouldn't be discarded from BE log until the reference is put. BE recovery recovers all transactions that were not discarded, which is very useful for FDMI FOL record resend case: if all FOL records for such recovered transactions are resent as FDMI FOL records then there will be no FDMI FOL record missing on FDMI plugin side regardless whether FDMI source restarts or not, how and how many times it restarts.</p>
<p>It leads to an obvious solution: just send all FOL records as FDMI FOL records during BE recovery.</p>
<p>There are several ways this task could be done.</p>
<h2><a class="anchor" id="Original"></a>
FOM for each FOL record</h2>
<p>For each FOL record a fom with the orignal fom type is created. A special flag is added to indicate that the fom was created during BE recovery . It allows the fom to not to execute it's usual actions, but to close BE tx immediatelly. Then, after BE tx goes to M0_BTS_LOGGED phase a generic fom phase calls <a class="el" href="../../d1/d59/group__fom.html#ga9d011286a18e38b844806408034a514f">m0_fom_fdmi_record_post()</a>, which sends FDMI record to FDMI plugin as usual.</p>
<h2><a class="anchor" id="Special"></a>
FOM for each FOL record</h2>
<p>A special FOM would be created for each recovered BE tx. The purpose of the fom would be post FDMI record with the FOL record for this BE tx and then wait until consumption of the FDMI record is acklowledged.</p>
<h2><a class="anchor" id="Post"></a>
FDMI records for every BE tx</h2>
<p>FDMI FOL record for every recovered BE tx is posted as usual. FDMI source dock fom would make a queue of all the records and it would send them and wait for consumption acknowledgement as usual.</p>
<h2><a class="anchor" id="A"></a>
special BE recovery FOM phase</h2>
<p>A special FOM phase is added to every fom that stores something in BE. If the fom is created during BE recovery, then initial phase of the fom is this special phase. This allows each fom to handle BE recovery as it sees fit. Default generic phase sequence should also include this special fom phase and by default it would post FDMI FOL record in the same way it's done currently for normal FOM phase sequence.</p>
<h2><a class="anchor" id="Implementation"></a>
details</h2>
<ul>
<li>Motr process should be able to send FDMI fops during BE recovery. BE recovery happens before DTM recovery, so at this stage only HA and Motr configuration should be brought up (along with their dependencies). It means that ioservice and DIX would be down at that time;</li>
<li>FOL record shouldn't be discarded until it's consumed by FDMI plugin. Currently FOL record is in BE tx payload, so this requriement means that BE tx shouldn't be discarded from BE log before FDMI FOL record is consumed by FDMI plugin. It has several side effects:<ul>
<li>current implementation recovers BE tx groups one by one, and the next group is recovered only after references to all transactions from the previous BE tx group are put. It means that FDMI plugin must consume all the records before the next BE tx group is recovered. Which doesn't sound complex on it's own, but there is a use case when it becomes critical:</li>
<li>if FDMI plugin needs to save FDMI record in a distributed index which is located on the same set of Motr processes as FDMI source, then we may have a deadlock even during usual cluster startup after non-clean shutdown: BE recovery would have some transactions on every participating server, so DIX wouldn't be operational. And FDMI plugin would require DIX to be at least somehow operational to consume FDMI records. This could be solved by allowing to have all BE tx groups to be recovered at the same time (which would require some rework in BE grouping and BE tx group fom), but even in this case we may get a deadlock if BE log is full. This could be solved by always having some part of BE log to be allocted to BE recovery activities, but with multiple subsequent failures during BE recovery even this part of the log may get full. It could be solved by preallocating space in BE segment to copy BE tx payloads from BE log to handle this particular case, but hey, we only want to resend FDMI records during BE recovery and record them to DIX in FDMI plugin and now we have to do several major changes to Motr components archivecture already. </li>
</ul>
</li>
</ul>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga1ba431e4f9836ccb46fc4210f2ad2585"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1ba431e4f9836ccb46fc4210f2ad2585">&#9670;&nbsp;</a></span>M0_FOL_FRAG_DATA_HANDLER_DECLARE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define M0_FOL_FRAG_DATA_HANDLER_DECLARE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_opecode, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">_get_val_func&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">{ \</div><div class="line">        .ffh_opecode          = (_opecode),                        \</div><div class="line">        .ffh_fol_frag_get_val = (_get_val_func) }</div></div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00210">210</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7066db0162275a126d1c33c4c4eed179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7066db0162275a126d1c33c4c4eed179">&#9670;&nbsp;</a></span>be_tx_put_ast_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void be_tx_put_ast_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d32/structm0__sm__group.html">m0_sm_group</a> *&#160;</td>
          <td class="paramname"><em>grp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../de/d78/structm0__sm__ast.html">m0_sm_ast</a> *&#160;</td>
          <td class="paramname"><em>ast</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00243">243</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga7066db0162275a126d1c33c4c4eed179_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga7066db0162275a126d1c33c4c4eed179_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga7066db0162275a126d1c33c4c4eed179_cgraph" id="dd/dc6/group__fdmi__fol__src_ga7066db0162275a126d1c33c4c4eed179_cgraph">
<area shape="rect" id="node2" href="../../d5/d54/be_2linux__kernel_2stubs_8c.html#ga9e056c8be3495545fa76d9b7612646a3" title="m0_be_tx_put" alt="" coords="179,5,283,32"/>
<area shape="rect" id="node3" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="186,56,275,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga7066db0162275a126d1c33c4c4eed179_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga7066db0162275a126d1c33c4c4eed179_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga7066db0162275a126d1c33c4c4eed179_icgraph" id="dd/dc6/group__fdmi__fol__src_ga7066db0162275a126d1c33c4c4eed179_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga5feae29379611f506fe33aa5c231b0c4" title="ffs_tx_dec_refc" alt="" coords="179,5,289,32"/>
</map>
</div>

</div>
</div>
<a id="ga0aa8b3f112b096dd9e5e098e149d6293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0aa8b3f112b096dd9e5e098e149d6293">&#9670;&nbsp;</a></span>ffs_get_dtx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../de/d0f/structm0__dtx.html">m0_dtx</a>* ffs_get_dtx </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *&#160;</td>
          <td class="paramname"><em>src_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00232">232</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga0aa8b3f112b096dd9e5e098e149d6293_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga0aa8b3f112b096dd9e5e098e149d6293_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga0aa8b3f112b096dd9e5e098e149d6293_cgraph" id="dd/dc6/group__fdmi__fol__src_ga0aa8b3f112b096dd9e5e098e149d6293_cgraph">
<area shape="rect" id="node2" href="../../d0/de2/group__fdmi__sd.html#ga740016e49aabb132498ebd80a7cb272b" title="m0_fdmi__record_is\l_valid" alt="" coords="140,5,279,47"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga0aa8b3f112b096dd9e5e098e149d6293_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga0aa8b3f112b096dd9e5e098e149d6293_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga0aa8b3f112b096dd9e5e098e149d6293_icgraph" id="dd/dc6/group__fdmi__fol__src_ga0aa8b3f112b096dd9e5e098e149d6293_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#gac621a3f51bdc2c3628c715aeca6b68a5" title="ffs_rec_get" alt="" coords="158,5,245,32"/>
<area shape="rect" id="node3" href="../../dd/dc6/group__fdmi__fol__src.html#gab100785911bad9bbcab18341fea2b7a1" title="ffs_rec_put" alt="" coords="158,56,245,83"/>
<area shape="rect" id="node4" href="../../dd/dc6/group__fdmi__fol__src.html#ga5ee22d1a77f04f6189f029f7b8af5b6f" title="ffs_op_node_eval" alt="" coords="140,107,263,133"/>
<area shape="rect" id="node5" href="../../dd/dc6/group__fdmi__fol__src.html#ga1b72326f4219f4bcad518494f960af1a" title="ffs_op_encode" alt="" coords="148,157,255,184"/>
</map>
</div>

</div>
</div>
<a id="ga07826f5d0de99a2b3d33bc4b462031aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga07826f5d0de99a2b3d33bc4b462031aa">&#9670;&nbsp;</a></span>ffs_op_begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ffs_op_begin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *&#160;</td>
          <td class="paramname"><em>src_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>No need to do anything on this event for FOL Source. Call to <a class="el" href="../../dd/dc6/group__fdmi__fol__src.html#gac621a3f51bdc2c3628c715aeca6b68a5">ffs_rec_get()</a> done in m0_fol_fdmi_post_record below will make sure the data is already in memory and available for fast access at the moment of this call.</p>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00520">520</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga07826f5d0de99a2b3d33bc4b462031aa_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga07826f5d0de99a2b3d33bc4b462031aa_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga07826f5d0de99a2b3d33bc4b462031aa_cgraph" id="dd/dc6/group__fdmi__fol__src_ga07826f5d0de99a2b3d33bc4b462031aa_cgraph">
<area shape="rect" id="node2" href="../../d0/de2/group__fdmi__sd.html#ga740016e49aabb132498ebd80a7cb272b" title="m0_fdmi__record_is\l_valid" alt="" coords="148,5,287,47"/>
<area shape="rect" id="node3" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="173,71,262,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga07826f5d0de99a2b3d33bc4b462031aa_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga07826f5d0de99a2b3d33bc4b462031aa_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga07826f5d0de99a2b3d33bc4b462031aa_icgraph" id="dd/dc6/group__fdmi__fol__src_ga07826f5d0de99a2b3d33bc4b462031aa_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga03570d2bc28b2ca6397e223f111c69b5" title="m0_fol_fdmi_src_init" alt="" coords="148,5,291,32"/>
</map>
</div>

</div>
</div>
<a id="ga0685854eb2ed22c90ec54094a4600b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0685854eb2ed22c90ec54094a4600b98">&#9670;&nbsp;</a></span>ffs_op_decode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffs_op_decode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d06/structm0__buf.html">m0_buf</a> *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00482">482</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga0685854eb2ed22c90ec54094a4600b98_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga0685854eb2ed22c90ec54094a4600b98_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga0685854eb2ed22c90ec54094a4600b98_cgraph" id="dd/dc6/group__fdmi__fol__src_ga0685854eb2ed22c90ec54094a4600b98_cgraph">
<area shape="rect" id="node2" href="../../d1/d12/group__fol.html#ga6ee0cdc7b06bb4d36e934a25bf23a5bb" title="m0_fol_rec_init" alt="" coords="172,5,283,32"/>
<area shape="rect" id="node3" href="../../d1/d12/group__fol.html#ga240300d5ac437dd9b6b354a94848807e" title="m0_fol_rec_decode" alt="" coords="160,56,295,83"/>
<area shape="rect" id="node4" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="343,81,409,108"/>
<area shape="rect" id="node5" href="../../d1/d12/group__fol.html#ga3f4f1a824e9a9f69cc897392f01ae9d2" title="m0_fol_rec_fini" alt="" coords="172,157,283,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga0685854eb2ed22c90ec54094a4600b98_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga0685854eb2ed22c90ec54094a4600b98_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga0685854eb2ed22c90ec54094a4600b98_icgraph" id="dd/dc6/group__fdmi__fol__src_ga0685854eb2ed22c90ec54094a4600b98_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga03570d2bc28b2ca6397e223f111c69b5" title="m0_fol_fdmi_src_init" alt="" coords="160,5,303,32"/>
</map>
</div>

</div>
</div>
<a id="ga1b72326f4219f4bcad518494f960af1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b72326f4219f4bcad518494f960af1a">&#9670;&nbsp;</a></span>ffs_op_encode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffs_op_encode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *&#160;</td>
          <td class="paramname"><em>src_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../de/d06/structm0__buf.html">m0_buf</a> *&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000083">Todo:</a></b></dt><dd>Q: (for FOL owners) FOL record does not provide API call to calculate record size when encoded. For now, I'll do double allocation. Alloc internal buf of max size, then encode, then alloc with correct size, then copy, then dealloc inernal buf. Can be done properly once FOL record owner exports needed api call. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00419">419</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga1b72326f4219f4bcad518494f960af1a_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga1b72326f4219f4bcad518494f960af1a_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga1b72326f4219f4bcad518494f960af1a_cgraph" id="dd/dc6/group__fdmi__fol__src_ga1b72326f4219f4bcad518494f960af1a_cgraph">
<area shape="rect" id="node2" href="../../d0/de2/group__fdmi__sd.html#ga740016e49aabb132498ebd80a7cb272b" title="m0_fdmi__record_is\l_valid" alt="" coords="343,5,481,47"/>
<area shape="rect" id="node3" href="../../dd/dc6/group__fdmi__fol__src.html#ga0aa8b3f112b096dd9e5e098e149d6293" title="ffs_get_dtx" alt="" coords="184,38,271,65"/>
<area shape="rect" id="node4" href="../../d8/d64/group__buf.html#ga5eecf2781f894768488bbed1d17c33f9" title="m0_buf_alloc" alt="" coords="178,89,277,115"/>
<area shape="rect" id="node5" href="../../d1/d12/group__fol.html#ga231dcbcea4a3b5aa0eeacab5700f6422" title="m0_fol_rec_encode" alt="" coords="160,139,295,166"/>
<area shape="rect" id="node6" href="../../d8/d64/group__buf.html#ga2086c6e285594f42f5c669f805263905" title="m0_buf_free" alt="" coords="180,190,275,217"/>
<area shape="rect" id="node7" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="194,241,261,267"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga1b72326f4219f4bcad518494f960af1a_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga1b72326f4219f4bcad518494f960af1a_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga1b72326f4219f4bcad518494f960af1a_icgraph" id="dd/dc6/group__fdmi__fol__src_ga1b72326f4219f4bcad518494f960af1a_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga03570d2bc28b2ca6397e223f111c69b5" title="m0_fol_fdmi_src_init" alt="" coords="160,5,303,32"/>
</map>
</div>

</div>
</div>
<a id="ga72077b2e14b25e4d96454cf4025b6af2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga72077b2e14b25e4d96454cf4025b6af2">&#9670;&nbsp;</a></span>ffs_op_end()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ffs_op_end </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *&#160;</td>
          <td class="paramname"><em>src_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00538">538</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga72077b2e14b25e4d96454cf4025b6af2_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga72077b2e14b25e4d96454cf4025b6af2_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga72077b2e14b25e4d96454cf4025b6af2_cgraph" id="dd/dc6/group__fdmi__fol__src_ga72077b2e14b25e4d96454cf4025b6af2_cgraph">
<area shape="rect" id="node2" href="../../d0/de2/group__fdmi__sd.html#ga740016e49aabb132498ebd80a7cb272b" title="m0_fdmi__record_is\l_valid" alt="" coords="139,5,277,47"/>
<area shape="rect" id="node3" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="163,71,253,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga72077b2e14b25e4d96454cf4025b6af2_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga72077b2e14b25e4d96454cf4025b6af2_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga72077b2e14b25e4d96454cf4025b6af2_icgraph" id="dd/dc6/group__fdmi__fol__src_ga72077b2e14b25e4d96454cf4025b6af2_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga03570d2bc28b2ca6397e223f111c69b5" title="m0_fol_fdmi_src_init" alt="" coords="139,5,281,32"/>
</map>
</div>

</div>
</div>
<a id="gab07b5b9582f937f2274c61223541f014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab07b5b9582f937f2274c61223541f014">&#9670;&nbsp;</a></span>ffs_op_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ffs_op_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *&#160;</td>
          <td class="paramname"><em>src_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00396">396</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_gab07b5b9582f937f2274c61223541f014_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_gab07b5b9582f937f2274c61223541f014_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_gab07b5b9582f937f2274c61223541f014_cgraph" id="dd/dc6/group__fdmi__fol__src_gab07b5b9582f937f2274c61223541f014_cgraph">
<area shape="rect" id="node2" href="../../d0/de2/group__fdmi__sd.html#ga740016e49aabb132498ebd80a7cb272b" title="m0_fdmi__record_is\l_valid" alt="" coords="136,5,275,47"/>
<area shape="rect" id="node3" href="../../dd/dc6/group__fdmi__fol__src.html#gac621a3f51bdc2c3628c715aeca6b68a5" title="ffs_rec_get" alt="" coords="162,71,249,98"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_gab07b5b9582f937f2274c61223541f014_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_gab07b5b9582f937f2274c61223541f014_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_gab07b5b9582f937f2274c61223541f014_icgraph" id="dd/dc6/group__fdmi__fol__src_gab07b5b9582f937f2274c61223541f014_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga03570d2bc28b2ca6397e223f111c69b5" title="m0_fol_fdmi_src_init" alt="" coords="136,5,279,32"/>
</map>
</div>

</div>
</div>
<a id="ga5ee22d1a77f04f6189f029f7b8af5b6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5ee22d1a77f04f6189f029f7b8af5b6f">&#9670;&nbsp;</a></span>ffs_op_node_eval()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ffs_op_node_eval </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *&#160;</td>
          <td class="paramname"><em>src_rec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/dcf/structm0__fdmi__flt__var__node.html">m0_fdmi_flt_var_node</a> *&#160;</td>
          <td class="paramname"><em>value_desc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d6/d0b/structm0__fdmi__flt__operand.html">m0_fdmi_flt_operand</a> *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000082">Todo:</a></b></dt><dd>Phase 2: STUB: For now, we will not analyze filter, we just return FOL op code &ndash; always. </dd></dl>
<p>TODO: Q: (question to FOP/FOL owners) I could not find a better way to assert that this frag is of m0_fop_fol_frag_type, than to use this workaround (referencing internal _ops structure). Looks like they are ALWAYS of this type?... Now that there is NO indication of frag type whatsoever?... </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00351">351</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga5ee22d1a77f04f6189f029f7b8af5b6f_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga5ee22d1a77f04f6189f029f7b8af5b6f_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga5ee22d1a77f04f6189f029f7b8af5b6f_cgraph" id="dd/dc6/group__fdmi__fol__src_ga5ee22d1a77f04f6189f029f7b8af5b6f_cgraph">
<area shape="rect" id="node2" href="../../d0/de2/group__fdmi__sd.html#ga740016e49aabb132498ebd80a7cb272b" title="m0_fdmi__record_is\l_valid" alt="" coords="397,5,536,47"/>
<area shape="rect" id="node3" href="../../dd/dc6/group__fdmi__fol__src.html#ga0aa8b3f112b096dd9e5e098e149d6293" title="ffs_get_dtx" alt="" coords="219,38,306,65"/>
<area shape="rect" id="node4" href="../../d8/de2/group___f_d_m_i___d_l_d__fspec__filter.html#ga3760427c73fad9a0a406a2b262554a91" title="m0_fdmi_flt_uint_opnd_fill" alt="" coords="176,89,349,115"/>
<area shape="rect" id="node5" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="229,139,296,166"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga5ee22d1a77f04f6189f029f7b8af5b6f_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga5ee22d1a77f04f6189f029f7b8af5b6f_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga5ee22d1a77f04f6189f029f7b8af5b6f_icgraph" id="dd/dc6/group__fdmi__fol__src_ga5ee22d1a77f04f6189f029f7b8af5b6f_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga03570d2bc28b2ca6397e223f111c69b5" title="m0_fol_fdmi_src_init" alt="" coords="176,5,319,32"/>
</map>
</div>

</div>
</div>
<a id="ga225f2143c89e83bce0580b13b1aa6467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga225f2143c89e83bce0580b13b1aa6467">&#9670;&nbsp;</a></span>ffs_op_put()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ffs_op_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *&#160;</td>
          <td class="paramname"><em>src_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00408">408</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga225f2143c89e83bce0580b13b1aa6467_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga225f2143c89e83bce0580b13b1aa6467_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga225f2143c89e83bce0580b13b1aa6467_cgraph" id="dd/dc6/group__fdmi__fol__src_ga225f2143c89e83bce0580b13b1aa6467_cgraph">
<area shape="rect" id="node2" href="../../d0/de2/group__fdmi__sd.html#ga740016e49aabb132498ebd80a7cb272b" title="m0_fdmi__record_is\l_valid" alt="" coords="271,5,409,47"/>
<area shape="rect" id="node3" href="../../dd/dc6/group__fdmi__fol__src.html#gab100785911bad9bbcab18341fea2b7a1" title="ffs_rec_put" alt="" coords="136,38,223,65"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga225f2143c89e83bce0580b13b1aa6467_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga225f2143c89e83bce0580b13b1aa6467_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga225f2143c89e83bce0580b13b1aa6467_icgraph" id="dd/dc6/group__fdmi__fol__src_ga225f2143c89e83bce0580b13b1aa6467_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga03570d2bc28b2ca6397e223f111c69b5" title="m0_fol_fdmi_src_init" alt="" coords="136,5,279,32"/>
</map>
</div>

</div>
</div>
<a id="gac621a3f51bdc2c3628c715aeca6b68a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac621a3f51bdc2c3628c715aeca6b68a5">&#9670;&nbsp;</a></span>ffs_rec_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int64_t ffs_rec_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *&#160;</td>
          <td class="paramname"><em>src_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00314">314</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_gac621a3f51bdc2c3628c715aeca6b68a5_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_gac621a3f51bdc2c3628c715aeca6b68a5_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_gac621a3f51bdc2c3628c715aeca6b68a5_cgraph" id="dd/dc6/group__fdmi__fol__src_gac621a3f51bdc2c3628c715aeca6b68a5_cgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga0aa8b3f112b096dd9e5e098e149d6293" title="ffs_get_dtx" alt="" coords="150,5,237,32"/>
<area shape="rect" id="node3" href="../../dd/dc6/group__fdmi__fol__src.html#ga8843c1f7990f208203c027bc115a5ac6" title="ffs_tx_inc_refc" alt="" coords="140,56,247,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_gac621a3f51bdc2c3628c715aeca6b68a5_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_gac621a3f51bdc2c3628c715aeca6b68a5_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_gac621a3f51bdc2c3628c715aeca6b68a5_icgraph" id="dd/dc6/group__fdmi__fol__src_gac621a3f51bdc2c3628c715aeca6b68a5_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#gab07b5b9582f937f2274c61223541f014" title="ffs_op_get" alt="" coords="140,5,223,32"/>
</map>
</div>

</div>
</div>
<a id="gab100785911bad9bbcab18341fea2b7a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab100785911bad9bbcab18341fea2b7a1">&#9670;&nbsp;</a></span>ffs_rec_put()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int64_t ffs_rec_put </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d48/structm0__fdmi__src__rec.html">m0_fdmi_src_rec</a> *&#160;</td>
          <td class="paramname"><em>src_rec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00332">332</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_gab100785911bad9bbcab18341fea2b7a1_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_gab100785911bad9bbcab18341fea2b7a1_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_gab100785911bad9bbcab18341fea2b7a1_cgraph" id="dd/dc6/group__fdmi__fol__src_gab100785911bad9bbcab18341fea2b7a1_cgraph">
<area shape="rect" id="node2" href="../../d0/de2/group__fdmi__sd.html#ga740016e49aabb132498ebd80a7cb272b" title="m0_fdmi__record_is\l_valid" alt="" coords="299,5,437,47"/>
<area shape="rect" id="node3" href="../../dd/dc6/group__fdmi__fol__src.html#ga0aa8b3f112b096dd9e5e098e149d6293" title="ffs_get_dtx" alt="" coords="152,38,239,65"/>
<area shape="rect" id="node4" href="../../dd/dc6/group__fdmi__fol__src.html#ga5feae29379611f506fe33aa5c231b0c4" title="ffs_tx_dec_refc" alt="" coords="140,89,251,115"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_gab100785911bad9bbcab18341fea2b7a1_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_gab100785911bad9bbcab18341fea2b7a1_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_gab100785911bad9bbcab18341fea2b7a1_icgraph" id="dd/dc6/group__fdmi__fol__src_gab100785911bad9bbcab18341fea2b7a1_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga225f2143c89e83bce0580b13b1aa6467" title="ffs_op_put" alt="" coords="140,5,223,32"/>
</map>
</div>

</div>
</div>
<a id="ga5feae29379611f506fe33aa5c231b0c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5feae29379611f506fe33aa5c231b0c4">&#9670;&nbsp;</a></span>ffs_tx_dec_refc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ffs_tx_dec_refc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a> *&#160;</td>
          <td class="paramname"><em>be_tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>counter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00285">285</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga5feae29379611f506fe33aa5c231b0c4_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga5feae29379611f506fe33aa5c231b0c4_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga5feae29379611f506fe33aa5c231b0c4_cgraph" id="dd/dc6/group__fdmi__fol__src_ga5feae29379611f506fe33aa5c231b0c4_cgraph">
<area shape="rect" id="node2" href="../../d7/dc0/fdmi_2module_8c.html#a36c15ab7807b369c98371bcfe638f7b4" title="m0_fdmi_module__get" alt="" coords="171,5,325,32"/>
<area shape="rect" id="node3" href="../../d3/de8/group__atomic.html#ga6ffe67040906c0ee58477707229294a9" title="m0_atomic64_sub_return" alt="" coords="164,56,332,83"/>
<area shape="rect" id="node4" href="../../d0/d04/group__mutex.html#gae26efdb3a765f750c5992041d6ee2336" title="m0_mutex_lock" alt="" coords="191,107,305,133"/>
<area shape="rect" id="node5" href="../../d0/d04/group__mutex.html#ga18963570792098f5ab3cf3e8ede8046a" title="m0_mutex_unlock" alt="" coords="184,157,312,184"/>
<area shape="rect" id="node6" href="../../dd/dc6/group__fdmi__fol__src.html#ga7066db0162275a126d1c33c4c4eed179" title="be_tx_put_ast_cb" alt="" coords="185,208,311,235"/>
<area shape="rect" id="node7" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="380,233,469,260"/>
<area shape="rect" id="node8" href="../../d1/dc1/group__sm.html#ga3af9c51bdc59b52e62f0b1dd58c5c05d" title="m0_sm_ast_post" alt="" coords="187,309,309,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga5feae29379611f506fe33aa5c231b0c4_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga5feae29379611f506fe33aa5c231b0c4_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga5feae29379611f506fe33aa5c231b0c4_icgraph" id="dd/dc6/group__fdmi__fol__src_ga5feae29379611f506fe33aa5c231b0c4_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#gab100785911bad9bbcab18341fea2b7a1" title="ffs_rec_put" alt="" coords="164,5,251,32"/>
</map>
</div>

</div>
</div>
<a id="ga8843c1f7990f208203c027bc115a5ac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8843c1f7990f208203c027bc115a5ac6">&#9670;&nbsp;</a></span>ffs_tx_inc_refc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ffs_tx_inc_refc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a> *&#160;</td>
          <td class="paramname"><em>be_tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t *&#160;</td>
          <td class="paramname"><em>counter</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Value = 0 means this call happened during record posting. Execution context is well-defined, all locks already acquired, no need to use AST.</p>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00254">254</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga8843c1f7990f208203c027bc115a5ac6_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga8843c1f7990f208203c027bc115a5ac6_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga8843c1f7990f208203c027bc115a5ac6_cgraph" id="dd/dc6/group__fdmi__fol__src_ga8843c1f7990f208203c027bc115a5ac6_cgraph">
<area shape="rect" id="node2" href="../../d7/dc0/fdmi_2module_8c.html#a36c15ab7807b369c98371bcfe638f7b4" title="m0_fdmi_module__get" alt="" coords="167,5,321,32"/>
<area shape="rect" id="node3" href="../../d3/de8/group__atomic.html#ga611f47b9f61896df7924843f8d7e95de" title="m0_atomic64_get" alt="" coords="181,56,307,83"/>
<area shape="rect" id="node4" href="../../d5/d54/be_2linux__kernel_2stubs_8c.html#gacfcc8125c47ad5d88b83d1a36711f767" title="m0_be_tx_get" alt="" coords="192,107,296,133"/>
<area shape="rect" id="node5" href="../../d0/d04/group__mutex.html#gae26efdb3a765f750c5992041d6ee2336" title="m0_mutex_lock" alt="" coords="187,157,301,184"/>
<area shape="rect" id="node6" href="../../d0/d04/group__mutex.html#ga18963570792098f5ab3cf3e8ede8046a" title="m0_mutex_unlock" alt="" coords="180,208,308,235"/>
<area shape="rect" id="node7" href="../../d3/de8/group__atomic.html#ga9b280fa18fe055a4b7e1f5374558d57c" title="m0_atomic64_add_return" alt="" coords="160,259,328,285"/>
<area shape="rect" id="node8" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="199,309,289,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga8843c1f7990f208203c027bc115a5ac6_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga8843c1f7990f208203c027bc115a5ac6_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga8843c1f7990f208203c027bc115a5ac6_icgraph" id="dd/dc6/group__fdmi__fol__src_ga8843c1f7990f208203c027bc115a5ac6_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#gac621a3f51bdc2c3628c715aeca6b68a5" title="ffs_rec_get" alt="" coords="160,5,247,32"/>
</map>
</div>

</div>
</div>
<a id="ga3f5d37e9ee4a6423c7cd7816711daf82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3f5d37e9ee4a6423c7cd7816711daf82">&#9670;&nbsp;</a></span>m0_fol_fdmi__filter_kv_substring_match()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL bool m0_fol_fdmi__filter_kv_substring_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d06/structm0__buf.html">m0_buf</a> *&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>substrings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Internal function used to match the strings. Exported for UTs. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00710">710</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga3f5d37e9ee4a6423c7cd7816711daf82_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga3f5d37e9ee4a6423c7cd7816711daf82_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga3f5d37e9ee4a6423c7cd7816711daf82_cgraph" id="dd/dc6/group__fdmi__fol__src_ga3f5d37e9ee4a6423c7cd7816711daf82_cgraph">
<area shape="rect" id="node2" href="../../d8/d64/group__buf.html#gac5d9818a3ec07721cb92628a09844538" title="m0_buf_eq" alt="" coords="200,13,287,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga3f5d37e9ee4a6423c7cd7816711daf82_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga3f5d37e9ee4a6423c7cd7816711daf82_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga3f5d37e9ee4a6423c7cd7816711daf82_icgraph" id="dd/dc6/group__fdmi__fol__src_ga3f5d37e9ee4a6423c7cd7816711daf82_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga39e8b572037a20091eb75f8135694783" title="m0_fol_fdmi_filter\l_kv_substring" alt="" coords="211,5,336,47"/>
<area shape="rect" id="node3" href="../../d9/d96/fol__ut_8c.html#a79fc184134c6b65a66a70758f242c8a8" title="fdmi_fol_test_filter\l_kv_substring_match" alt="" coords="200,71,347,112"/>
</map>
</div>

</div>
</div>
<a id="ga39e8b572037a20091eb75f8135694783"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga39e8b572037a20091eb75f8135694783">&#9670;&nbsp;</a></span>m0_fol_fdmi_filter_kv_substring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_fol_fdmi_filter_kv_substring </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d9d/structm0__fdmi__eval__ctx.html">m0_fdmi_eval_ctx</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/db7/structm0__conf__fdmi__filter.html">m0_conf_fdmi_filter</a> *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d6b/structm0__fdmi__eval__var__info.html">m0_fdmi_eval_var_info</a> *&#160;</td>
          <td class="paramname"><em>var_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Implements M0_FDMI_FILTER_TYPE_KV_SUBSTRING filter. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00738">738</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga39e8b572037a20091eb75f8135694783_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga39e8b572037a20091eb75f8135694783_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga39e8b572037a20091eb75f8135694783_cgraph" id="dd/dc6/group__fdmi__fol__src_ga39e8b572037a20091eb75f8135694783_cgraph">
<area shape="rect" id="node2" href="../../d0/d60/cas_2service_8c.html#a1ba6d1978b9b2d69f34d6273b8aa81f5" title="cas_op" alt="" coords="220,5,284,32"/>
<area shape="rect" id="node3" href="../../dd/dc6/group__fdmi__fol__src.html#ga3f5d37e9ee4a6423c7cd7816711daf82" title="m0_fol_fdmi__filter\l_kv_substring_match" alt="" coords="179,57,325,98"/>
</map>
</div>

</div>
</div>
<a id="ga6fb58d3d34cad131bc06891aee77d3f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6fb58d3d34cad131bc06891aee77d3f5">&#9670;&nbsp;</a></span>m0_fol_fdmi_post_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_fol_fdmi_post_record </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *&#160;</td>
          <td class="paramname"><em>fom</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Submit new FOL entry to FDMI. </p>
<p>There is no "unpost record" method, so we have to prepare everything that may fail &ndash; before calling to post method.</p>
<p>NOTE: IMPORTANT! Do not call anything that may fail here! It is not possible to un-post the record; anything that may fail, must be done before the M0_FDMI_SOURCE_POST_RECORD call above.</p>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00646">646</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga6fb58d3d34cad131bc06891aee77d3f5_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga6fb58d3d34cad131bc06891aee77d3f5_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga6fb58d3d34cad131bc06891aee77d3f5_cgraph" id="dd/dc6/group__fdmi__fol__src_ga6fb58d3d34cad131bc06891aee77d3f5_cgraph">
<area shape="rect" id="node2" href="../../d3/d97/group__fdmi__main.html#ga477e326fce76b49bb5a5cc8dcb65717a" title="m0_fdmi_src_dock_get" alt="" coords="221,5,379,32"/>
<area shape="rect" id="node3" href="../../d7/dc0/fdmi_2module_8c.html#a36c15ab7807b369c98371bcfe638f7b4" title="m0_fdmi_module__get" alt="" coords="223,56,377,83"/>
<area shape="rect" id="node4" href="../../d9/dcf/group__be.html#ga691326931245f86125959b28ec8e2c95" title="m0_be_tx_lsn_get" alt="" coords="236,107,364,133"/>
<area shape="rect" id="node5" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="255,157,345,184"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga6fb58d3d34cad131bc06891aee77d3f5_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga6fb58d3d34cad131bc06891aee77d3f5_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga6fb58d3d34cad131bc06891aee77d3f5_icgraph" id="dd/dc6/group__fdmi__fol__src_ga6fb58d3d34cad131bc06891aee77d3f5_icgraph">
<area shape="rect" id="node2" href="../../d9/d96/fol__ut_8c.html#a6822a5de7d46273f33a15103d3156d80" title="fdmi_fol_test_ops" alt="" coords="247,5,372,32"/>
<area shape="rect" id="node3" href="../../d1/d59/group__fom.html#ga9d011286a18e38b844806408034a514f" title="m0_fom_fdmi_record_post" alt="" coords="221,56,397,83"/>
</map>
</div>

</div>
</div>
<a id="ga5f620d4bf9068bbb7a1fcedd2a349393"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f620d4bf9068bbb7a1fcedd2a349393">&#9670;&nbsp;</a></span>m0_fol_fdmi_src_deinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_fol_fdmi_src_deinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deinitializes FOL FDMI source. </p>
<p>The deregister below does not call for fs_put/fs_end, so we'll have to do call m0_be_tx_put explicitly here, over all transactions we've locked.</p>
<p>Note we don't reset t_fdmi_ref here, it's a flag the record is not yet released by plugins.</p>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00601">601</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga5f620d4bf9068bbb7a1fcedd2a349393_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga5f620d4bf9068bbb7a1fcedd2a349393_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga5f620d4bf9068bbb7a1fcedd2a349393_cgraph" id="dd/dc6/group__fdmi__fol__src_ga5f620d4bf9068bbb7a1fcedd2a349393_cgraph">
<area shape="rect" id="node2" href="../../d7/dc0/fdmi_2module_8c.html#a36c15ab7807b369c98371bcfe638f7b4" title="m0_fdmi_module__get" alt="" coords="224,5,377,32"/>
<area shape="rect" id="node3" href="../../d0/d04/group__mutex.html#gae26efdb3a765f750c5992041d6ee2336" title="m0_mutex_lock" alt="" coords="447,120,561,147"/>
<area shape="rect" id="node4" href="../../d5/d54/be_2linux__kernel_2stubs_8c.html#ga9e056c8be3495545fa76d9b7612646a3" title="m0_be_tx_put" alt="" coords="249,107,353,133"/>
<area shape="rect" id="node5" href="../../d0/d04/group__mutex.html#ga18963570792098f5ab3cf3e8ede8046a" title="m0_mutex_unlock" alt="" coords="440,196,568,223"/>
<area shape="rect" id="node6" href="../../d0/d04/group__mutex.html#ga3343af66e17b74ebf3f77fa6a31201c4" title="m0_mutex_fini" alt="" coords="247,208,354,235"/>
<area shape="rect" id="node7" href="../../d0/de2/group__fdmi__sd.html#ga3d5ce259696db7f15eb2b756d5a80b8e" title="m0_fdmi_source_deregister" alt="" coords="209,157,392,184"/>
<area shape="rect" id="node8" href="../../d0/de2/group__fdmi__sd.html#ga62f14a451b9a0256efdc7d29843dd65e" title="m0_fdmi_source_free" alt="" coords="227,309,374,336"/>
<area shape="rect" id="node9" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="267,360,334,387"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga5f620d4bf9068bbb7a1fcedd2a349393_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga5f620d4bf9068bbb7a1fcedd2a349393_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga5f620d4bf9068bbb7a1fcedd2a349393_icgraph" id="dd/dc6/group__fdmi__fol__src_ga5f620d4bf9068bbb7a1fcedd2a349393_icgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga80f486049c8f8188614c00631ee54bcf" title="m0_fol_fdmi_src_fini" alt="" coords="209,5,352,32"/>
</map>
</div>

</div>
</div>
<a id="ga80f486049c8f8188614c00631ee54bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga80f486049c8f8188614c00631ee54bcf">&#9670;&nbsp;</a></span>m0_fol_fdmi_src_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_fol_fdmi_src_fini </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deinitializes FOL FDMI source.</p>
<p>Same as m0_fol_fdmi_src_deinit, but suppresses retcode. Needed for motr/init.c table. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00594">594</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga80f486049c8f8188614c00631ee54bcf_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga80f486049c8f8188614c00631ee54bcf_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga80f486049c8f8188614c00631ee54bcf_cgraph" id="dd/dc6/group__fdmi__fol__src_ga80f486049c8f8188614c00631ee54bcf_cgraph">
<area shape="rect" id="node2" href="../../dd/dc6/group__fdmi__fol__src.html#ga5f620d4bf9068bbb7a1fcedd2a349393" title="m0_fol_fdmi_src_deinit" alt="" coords="196,5,352,32"/>
<area shape="rect" id="node3" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="229,56,319,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga80f486049c8f8188614c00631ee54bcf_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga80f486049c8f8188614c00631ee54bcf_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga80f486049c8f8188614c00631ee54bcf_icgraph" id="dd/dc6/group__fdmi__fol__src_ga80f486049c8f8188614c00631ee54bcf_icgraph">
<area shape="rect" id="node2" href="../../d9/d96/fol__ut_8c.html#a6822a5de7d46273f33a15103d3156d80" title="fdmi_fol_test_ops" alt="" coords="196,5,321,32"/>
</map>
</div>

</div>
</div>
<a id="ga03570d2bc28b2ca6397e223f111c69b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03570d2bc28b2ca6397e223f111c69b5">&#9670;&nbsp;</a></span>m0_fol_fdmi_src_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_fol_fdmi_src_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes/registers FOL FDMI source. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00551">551</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga03570d2bc28b2ca6397e223f111c69b5_cgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga03570d2bc28b2ca6397e223f111c69b5_cgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga03570d2bc28b2ca6397e223f111c69b5_cgraph" id="dd/dc6/group__fdmi__fol__src_ga03570d2bc28b2ca6397e223f111c69b5_cgraph">
<area shape="rect" id="node2" href="../../d7/dc0/fdmi_2module_8c.html#a36c15ab7807b369c98371bcfe638f7b4" title="m0_fdmi_module__get" alt="" coords="211,5,364,32"/>
<area shape="rect" id="node3" href="../../d0/de2/group__fdmi__sd.html#gaee22134bd7d1ff475f7f01532e9704a2" title="m0_fdmi_source_alloc" alt="" coords="211,56,363,83"/>
<area shape="rect" id="node4" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a01283f6c481bc4a3d0f204e957179d6e" title="M0_ERR" alt="" coords="249,107,325,133"/>
<area shape="rect" id="node5" href="../../d0/d04/group__mutex.html#ga342a63c7734a82930710cafbe895013f" title="m0_mutex_init" alt="" coords="234,157,341,184"/>
<area shape="rect" id="node6" href="../../dd/dc6/group__fdmi__fol__src.html#ga5ee22d1a77f04f6189f029f7b8af5b6f" title="ffs_op_node_eval" alt="" coords="226,208,349,235"/>
<area shape="rect" id="node7" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="427,512,493,539"/>
<area shape="rect" id="node8" href="../../dd/dc6/group__fdmi__fol__src.html#gab07b5b9582f937f2274c61223541f014" title="ffs_op_get" alt="" coords="246,309,329,336"/>
<area shape="rect" id="node9" href="../../dd/dc6/group__fdmi__fol__src.html#ga225f2143c89e83bce0580b13b1aa6467" title="ffs_op_put" alt="" coords="246,360,329,387"/>
<area shape="rect" id="node10" href="../../dd/dc6/group__fdmi__fol__src.html#ga07826f5d0de99a2b3d33bc4b462031aa" title="ffs_op_begin" alt="" coords="240,411,335,437"/>
<area shape="rect" id="node11" href="../../dd/dc6/group__fdmi__fol__src.html#ga72077b2e14b25e4d96454cf4025b6af2" title="ffs_op_end" alt="" coords="245,461,330,488"/>
<area shape="rect" id="node12" href="../../dd/dc6/group__fdmi__fol__src.html#ga1b72326f4219f4bcad518494f960af1a" title="ffs_op_encode" alt="" coords="234,512,341,539"/>
<area shape="rect" id="node13" href="../../dd/dc6/group__fdmi__fol__src.html#ga0685854eb2ed22c90ec54094a4600b98" title="ffs_op_decode" alt="" coords="234,563,341,589"/>
<area shape="rect" id="node14" href="../../d0/de2/group__fdmi__sd.html#ga421c5e68bc554fcc0b0e892c4a65e204" title="m0_fdmi_source_register" alt="" coords="203,613,371,640"/>
<area shape="rect" id="node15" href="../../d0/de2/group__fdmi__sd.html#ga3d5ce259696db7f15eb2b756d5a80b8e" title="m0_fdmi_source_deregister" alt="" coords="196,664,379,691"/>
<area shape="rect" id="node16" href="../../d0/de2/group__fdmi__sd.html#ga62f14a451b9a0256efdc7d29843dd65e" title="m0_fdmi_source_free" alt="" coords="214,715,361,741"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/dc6/group__fdmi__fol__src_ga03570d2bc28b2ca6397e223f111c69b5_icgraph.png" border="0" usemap="#dd/dc6/group__fdmi__fol__src_ga03570d2bc28b2ca6397e223f111c69b5_icgraph" alt=""/></div>
<map name="dd/dc6/group__fdmi__fol__src_ga03570d2bc28b2ca6397e223f111c69b5_icgraph" id="dd/dc6/group__fdmi__fol__src_ga03570d2bc28b2ca6397e223f111c69b5_icgraph">
<area shape="rect" id="node2" href="../../d9/d96/fol__ut_8c.html#a6822a5de7d46273f33a15103d3156d80" title="fdmi_fol_test_ops" alt="" coords="196,5,321,32"/>
</map>
</div>

</div>
</div>
<a id="gac31e92954ca7320b3288dea8c05ec106"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac31e92954ca7320b3288dea8c05ec106">&#9670;&nbsp;</a></span>M0_TL_DEFINE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_TL_DEFINE </td>
          <td>(</td>
          <td class="paramtype">ffs_tx&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M0_INTERNAL&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga23cc5cdeeb7649ba9b552900f2d1afa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23cc5cdeeb7649ba9b552900f2d1afa9">&#9670;&nbsp;</a></span>M0_TL_DESCR_DEFINE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_TL_DESCR_DEFINE </td>
          <td>(</td>
          <td class="paramtype">ffs_tx&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&quot;fdmi fol <a class="el" href="../../d9/d5b/repair_2ut_2xform_8c.html#ab2bc5728a520e102f9b313443b7acc80">src</a> tx <a class="el" href="../../dc/dc9/ut_2tlist_8c.html#a290b1e0e27cc13a1067701409640975a">list</a>&quot;&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">M0_INTERNAL&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">t_fdmi_linkage&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d08/group__tlist.html#gad07f0c3ab63368b203950b61296591bb">t_magic</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a75b0531ec4d7b09ecfb18bd3be3ba8a4">M0_BE_TX_MAGIC</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119af7f0815957d820440c03c9413a18cac4">M0_BE_TX_ENGINE_MAGIC</a>&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gac040d7c9587b383b4909db5fa9f4173d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac040d7c9587b383b4909db5fa9f4173d">&#9670;&nbsp;</a></span>ffs_frag_handler_array</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/dc1/structffs__fol__frag__handler.html">ffs_fol_frag_handler</a> ffs_frag_handler_array[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line"></div><div class="line">}</div></div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html#l00214">214</a> of file <a class="el" href="../../dc/d2e/fol__fdmi__src_8c_source.html">fol_fdmi_src.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 20 2022 10:35:46 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
