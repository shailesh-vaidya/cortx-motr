<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: m0_rm_resource_type Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d8/d71/structm0__rm__resource__type.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">m0_rm_resource_type Struct Reference<div class="ingroups"><a class="el" href="../../d2/deb/group__rm.html">Resource management</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for m0_rm_resource_type:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d42/structm0__rm__resource__type__coll__graph.png" border="0" usemap="#m0__rm__resource__type_coll__map" alt="Collaboration graph"/></div>
<map name="m0__rm__resource__type_coll__map" id="m0__rm__resource__type_coll__map">
<area shape="rect" id="node9" href="../../de/d9b/structm0__rm__domain.html" title="{m0_rm_domain\n||}" alt="" coords="319,720,430,797"/>
<area shape="rect" id="node2" href="../../df/d5f/structm0__mutex.html" title="{m0_mutex\n||}" alt="" coords="53,285,136,363"/>
<area shape="rect" id="node11" href="../../d5/d32/structm0__sm__group.html" title="{m0_sm_group\n||}" alt="" coords="273,440,377,517"/>
<area shape="rect" id="node3" href="../../d1/d67/structm0__thread.html" title="{m0_thread\n||}" alt="" coords="373,145,456,223"/>
<area shape="rect" id="node5" href="../../d0/db4/structm0__queue.html" title="{m0_queue\n||}" alt="" coords="166,440,249,517"/>
<area shape="rect" id="node7" href="../../d9/dfe/structm0__rm__resource__type__ops.html" title="{m0_rm_resource_type_ops\n||}" alt="" coords="718,440,897,517"/>
<area shape="rect" id="node12" href="../../d4/d8a/structm0__tl.html" title="{m0_tl\n||}" alt="" coords="458,440,512,517"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:accc2b88873e42067d2186105743f7d82"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="../../d9/dfe/structm0__rm__resource__type__ops.html">m0_rm_resource_type_ops</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#accc2b88873e42067d2186105743f7d82">rt_ops</a></td></tr>
<tr class="separator:accc2b88873e42067d2186105743f7d82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f981f4b5009d4b85cd4b6570293f96a"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#a1f981f4b5009d4b85cd4b6570293f96a">rt_name</a></td></tr>
<tr class="separator:a1f981f4b5009d4b85cd4b6570293f96a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e3c851242a851951e9311ad4b5c9c32"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#a9e3c851242a851951e9311ad4b5c9c32">rt_id</a></td></tr>
<tr class="separator:a9e3c851242a851951e9311ad4b5c9c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac59acdb7a4a0d955f86eb5aac05ba286"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d5f/structm0__mutex.html">m0_mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#ac59acdb7a4a0d955f86eb5aac05ba286">rt_lock</a></td></tr>
<tr class="separator:ac59acdb7a4a0d955f86eb5aac05ba286"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff885f0787a9f3265fc5ea15e0a23074"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8a/structm0__tl.html">m0_tl</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#aff885f0787a9f3265fc5ea15e0a23074">rt_resources</a></td></tr>
<tr class="separator:aff885f0787a9f3265fc5ea15e0a23074"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57892865aea0e62b27ce392e20b3abb1"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#a57892865aea0e62b27ce392e20b3abb1">rt_nr_resources</a></td></tr>
<tr class="separator:a57892865aea0e62b27ce392e20b3abb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58072353dafd9ba8efe33e8273ae9d03"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d5/d32/structm0__sm__group.html">m0_sm_group</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#a58072353dafd9ba8efe33e8273ae9d03">rt_sm_grp</a></td></tr>
<tr class="separator:a58072353dafd9ba8efe33e8273ae9d03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f6119175c5f5a882e1e6be012376132"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d67/structm0__thread.html">m0_thread</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#a8f6119175c5f5a882e1e6be012376132">rt_worker</a></td></tr>
<tr class="separator:a8f6119175c5f5a882e1e6be012376132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6eb1d0aba62e7ec4c0154ad9bb385f74"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#a6eb1d0aba62e7ec4c0154ad9bb385f74">rt_stop_worker</a></td></tr>
<tr class="separator:a6eb1d0aba62e7ec4c0154ad9bb385f74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b55906120fe64705bdc5dc2abb5034c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../de/d9b/structm0__rm__domain.html">m0_rm_domain</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#a2b55906120fe64705bdc5dc2abb5034c">rt_dom</a></td></tr>
<tr class="separator:a2b55906120fe64705bdc5dc2abb5034c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59ffcce4e5de5d2139712fad6ca2023a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d5f/structm0__mutex.html">m0_mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#a59ffcce4e5de5d2139712fad6ca2023a">rt_queue_guard</a></td></tr>
<tr class="separator:a59ffcce4e5de5d2139712fad6ca2023a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed7ba50e4d3138148b6e3c953ee874c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/db4/structm0__queue.html">m0_queue</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html#a7ed7ba50e4d3138148b6e3c953ee874c">rt_ha_events</a></td></tr>
<tr class="separator:a7ed7ba50e4d3138148b6e3c953ee874c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Resources are classified into disjoint types. Resource type determines how its instances interact with the resource management generic core and defines:</p>
<ul>
<li>how the resources of this type are named;</li>
<li>where the resources of this type are located;</li>
<li>what resource credits are defined on the resources of this type;</li>
<li>how credits are ordered;</li>
<li>how credit conflicts are resolved. </li>
</ul>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00387">387</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a2b55906120fe64705bdc5dc2abb5034c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b55906120fe64705bdc5dc2abb5034c">&#9670;&nbsp;</a></span>rt_dom</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d9b/structm0__rm__domain.html">m0_rm_domain</a>* rt_dom</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Domain this resource type is registered with. </p>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00428">428</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a7ed7ba50e4d3138148b6e3c953ee874c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed7ba50e4d3138148b6e3c953ee874c">&#9670;&nbsp;</a></span>rt_ha_events</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/db4/structm0__queue.html">m0_queue</a> rt_ha_events</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Incoming events associated with remote RM owner are enqueued in this event queue. The queue is protected by rt_queue_guard, and relevant handling of the events is done by the AST thread. </p><dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000238">Todo:</a></b></dt><dd>:<ol type="1">
<li>Ideally queue shall be operated in lockfree manner to avoid taking locks in HA callback and in AST thread. Currently since only one producer and one consumer contend for the queue lock and critical section is not large this has been differed. Lockfree queue would also require a bit of memory management.</li>
<li>HA should not send the same state twice, and ideally Motr should assert on such incidence. This implementation would circumvent such behaviour by HA. Once Halon is completely replaced by Hare RM can assert on such spurious notifications. </li>
</ol>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00447">447</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a9e3c851242a851951e9311ad4b5c9c32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e3c851242a851951e9311ad4b5c9c32">&#9670;&nbsp;</a></span>rt_id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t rt_id</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A resource type identifier, globally unique within a cluster, used to identify resource types on wire and storage.</p>
<p>This identifier is used as an index in <a class="el" href="../../de/d9b/structm0__rm__domain.html#adb77dcd483fba5051284dc19b3c70d8c">m0_rm_domain::rd_types</a>.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000237">Todo:</a></b></dt><dd>Currently this is assigned manually and centrally. In the future, resource types identifiers (as well as rpc item opcodes) will be assigned dynamically by a special service (and then announced to the clients). Such identifier name-spaces are resources themselves, so, welcome to a minefield of bootstrapping. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00403">403</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="ac59acdb7a4a0d955f86eb5aac05ba286"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac59acdb7a4a0d955f86eb5aac05ba286">&#9670;&nbsp;</a></span>rt_lock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d5f/structm0__mutex.html">m0_mutex</a> rt_lock</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00404">404</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a1f981f4b5009d4b85cd4b6570293f96a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f981f4b5009d4b85cd4b6570293f96a">&#9670;&nbsp;</a></span>rt_name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* rt_name</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00389">389</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a57892865aea0e62b27ce392e20b3abb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57892865aea0e62b27ce392e20b3abb1">&#9670;&nbsp;</a></span>rt_nr_resources</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t rt_nr_resources</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Active references to this resource type from resource instances (<a class="el" href="../../dd/d9a/structm0__rm__owner.html#ae944ad8d5538ba60dc0b85b6c30c3f45">m0_rm_owner::ro_resource</a>). Protected by <a class="el" href="../../d8/d71/structm0__rm__resource__type.html#ac59acdb7a4a0d955f86eb5aac05ba286">m0_rm_resource_type::rt_lock</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00415">415</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="accc2b88873e42067d2186105743f7d82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accc2b88873e42067d2186105743f7d82">&#9670;&nbsp;</a></span>rt_ops</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d9/dfe/structm0__rm__resource__type__ops.html">m0_rm_resource_type_ops</a>* rt_ops</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00388">388</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a59ffcce4e5de5d2139712fad6ca2023a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a59ffcce4e5de5d2139712fad6ca2023a">&#9670;&nbsp;</a></span>rt_queue_guard</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d5f/structm0__mutex.html">m0_mutex</a> rt_queue_guard</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00430">430</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="aff885f0787a9f3265fc5ea15e0a23074"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff885f0787a9f3265fc5ea15e0a23074">&#9670;&nbsp;</a></span>rt_resources</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8a/structm0__tl.html">m0_tl</a> rt_resources</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>List of all resources of this type. Protected by <a class="el" href="../../d8/d71/structm0__rm__resource__type.html#ac59acdb7a4a0d955f86eb5aac05ba286">m0_rm_resource_type::rt_lock</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00409">409</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a58072353dafd9ba8efe33e8273ae9d03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58072353dafd9ba8efe33e8273ae9d03">&#9670;&nbsp;</a></span>rt_sm_grp</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d32/structm0__sm__group.html">m0_sm_group</a> rt_sm_grp</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00416">416</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a6eb1d0aba62e7ec4c0154ad9bb385f74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6eb1d0aba62e7ec4c0154ad9bb385f74">&#9670;&nbsp;</a></span>rt_stop_worker</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool rt_stop_worker</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag for ro_worker thread to stop. </p>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00424">424</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a8f6119175c5f5a882e1e6be012376132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f6119175c5f5a882e1e6be012376132">&#9670;&nbsp;</a></span>rt_worker</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d67/structm0__thread.html">m0_thread</a> rt_worker</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Executes ASTs for this owner. </p>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00420">420</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>rm/<a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d8/d71/structm0__rm__resource__type.html">m0_rm_resource_type</a></li>
    <li class="footer">Generated on Fri May 20 2022 10:36:14 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
