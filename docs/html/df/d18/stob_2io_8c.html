<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: stob/io.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('df/d18/stob_2io_8c.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">io.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d8/dc2/errno_8h_source.html">lib/errno.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d18/memory_8h_source.html">lib/memory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d1b/trace_8h_source.html">lib/trace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d66/addb2_2addb2_8h_source.html">addb2/addb2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1d/fol_2fol_8h_source.html">fol/fol.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d93/stob_2io_8h_source.html">stob/io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dc9/stob_2stob_8h_source.html">stob/stob.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/da1/stob_2domain_8h_source.html">stob/domain.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d78/stob_2addb2_8h_source.html">stob/addb2.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for io.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d90/stob_2io_8c__incl.png" border="0" usemap="#stob_2io_8c" alt=""/></div>
<map name="stob_2io_8c" id="stob_2io_8c">
<area shape="rect" id="node2" href="../../d8/dc2/errno_8h.html" title="lib/errno.h" alt="" coords="5,80,84,107"/>
<area shape="rect" id="node3" href="../../dc/d18/memory_8h.html" title="lib/memory.h" alt="" coords="133,80,229,107"/>
<area shape="rect" id="node4" href="../../d1/d1b/trace_8h.html" title="lib/trace.h" alt="" coords="253,80,332,107"/>
<area shape="rect" id="node5" href="../../d7/d66/addb2_2addb2_8h.html" title="addb2/addb2.h" alt="" coords="357,80,463,107"/>
<area shape="rect" id="node6" href="../../db/d1d/fol_2fol_8h.html" title="fol/fol.h" alt="" coords="488,80,553,107"/>
<area shape="rect" id="node7" href="../../d2/d93/stob_2io_8h.html" title="stob/io.h" alt="" coords="578,80,650,107"/>
<area shape="rect" id="node8" href="../../d5/dc9/stob_2stob_8h.html" title="stob/stob.h" alt="" coords="675,80,761,107"/>
<area shape="rect" id="node9" href="../../df/da1/stob_2domain_8h.html" title="stob/domain.h" alt="" coords="786,80,890,107"/>
<area shape="rect" id="node10" href="../../d1/d78/stob_2addb2_8h.html" title="stob/addb2.h" alt="" coords="915,80,1012,107"/>
</map>
</div>
</div>
<p><a href="../../df/d18/stob_2io_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae762ad8776496e788bf62e0fa1615b61"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d18/stob_2io_8c.html#ae762ad8776496e788bf62e0fa1615b61">M0_TRACE_SUBSYSTEM</a>&#160;&#160;&#160;M0_TRACE_SUBSYS_STOB</td></tr>
<tr class="separator:ae762ad8776496e788bf62e0fa1615b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b113ed89e46930ad0a36d41a8d5b272"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d18/stob_2io_8c.html#a6b113ed89e46930ad0a36d41a8d5b272">SWAP_NEXT</a>(arr,  idx)</td></tr>
<tr class="separator:a6b113ed89e46930ad0a36d41a8d5b272"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga95ba9b5881fa494d1af16f45187a7601"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga95ba9b5881fa494d1af16f45187a7601">m0_stob_io_private_fini</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>)</td></tr>
<tr class="separator:ga95ba9b5881fa494d1af16f45187a7601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5547fefecb70441378a34c4a42c0d3f4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga5547fefecb70441378a34c4a42c0d3f4">stob_io_addb2_add_and_push</a> (uint64_t <a class="el" href="../../d7/d93/mdservice_2ut_2mdstore_8c.html#af2cd62f07d171de58efd6b1e2b766c6a">id</a>, struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>, struct <a class="el" href="../../d1/d0a/structm0__stob.html">m0_stob</a> *<a class="el" href="../../d9/d6a/group__stob.html#gadccdc10bef50325fcf004749e4d38f76">obj</a>)</td></tr>
<tr class="separator:ga5547fefecb70441378a34c4a42c0d3f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac38699e8c18a593fd4128677df75e251"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#gac38699e8c18a593fd4128677df75e251">stob_io_invariant</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>, struct <a class="el" href="../../d1/d0a/structm0__stob.html">m0_stob</a> *<a class="el" href="../../d9/d6a/group__stob.html#gadccdc10bef50325fcf004749e4d38f76">obj</a>, enum <a class="el" href="../../d9/d6a/group__stob.html#ga7d8a045694f0e77182b91da9ef3a9cf3">m0_stob_io_state</a> state)</td></tr>
<tr class="separator:gac38699e8c18a593fd4128677df75e251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa0a8e14ea966bdf46ca16efb64b38dd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#gafa0a8e14ea966bdf46ca16efb64b38dd">stob_io_fill</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>, struct <a class="el" href="../../d1/d0a/structm0__stob.html">m0_stob</a> *<a class="el" href="../../d9/d6a/group__stob.html#gadccdc10bef50325fcf004749e4d38f76">obj</a>, struct <a class="el" href="../../de/d0f/structm0__dtx.html">m0_dtx</a> *tx, struct m0_io_scope *scope, enum <a class="el" href="../../d9/d6a/group__stob.html#ga7d8a045694f0e77182b91da9ef3a9cf3">m0_stob_io_state</a> state, bool count_update)</td></tr>
<tr class="separator:gafa0a8e14ea966bdf46ca16efb64b38dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">adieu</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Asynchronous Direct Io Extensible User interface (adieu) for storage objects.</p>
<p><b>Overview</b>.</p>
<p>adieu is an interface for a non-blocking (asynchronous) 0-copy (direct) vectored IO against storage objects.</p>
<p>A user of this interface builds an IO operation description and queues it against a storage object. IO completion or failure notification is done by signalling a user supplied <a class="el" href="../../d0/d12/structm0__chan.html">m0_chan</a>. As usual, the user can either wait on the chan or register a call-back with it.</p>
<p>adieu supports scatter-gather type of IO operations (that is, vectored on both input and output data).</p>
<p>adieu can work both on local and remote storage objects. adieu IO operations are executed as part of a distributed transaction.</p>
<p><b>Functional specification.</b></p>
<p>Externally, adieu usage has the following phases: </p><pre class="fragment">- m0_bufvec registration. Some types of storage objects require that
  buffers from which IO is done are registered with its IO sub-system
  (examples: RDMA). This step is optional, IO from unregistered buffers
  should also be possible (albeit might incur additional data-copy).

- IO description creation. A IO operation description object m0_stob_io
  is initialised.

- IO operation is queued by a call to m0_stob_io_launch(). It is
  guaranteed that on a successful return from this call, a chan embedded
  into IO operation data-structure will be eventually signalled.

- An execution of a queued IO operation can be delayed for some time
  due to storage traffic control regulations, concurrency control,
  resource quotas or barriers.

- An IO operation is executed, possibly by splitting it into
  implementation defined fragments. A user can request an "prefixed
  fragments execution" mode (m0_stob_io_flags::SIF_PREFIX) constraining
  execution concurrency as to guarantee that after execution completion
  (with success or failure) a storage is updated as if some possibly
  empty prefix of the IO operation executed successfully (this is similar
  to the failure mode of POSIX write call). When prefixed fragments
  execution mode is not requested, an implementation is free to execute
  fragments in any order and with any degree of concurrency. Prefixed
  fragments execution mode request has no effect on read-only IO
  operations.

- When whole operation execution completes, a chan embedded into IO
  operation data-structure is signalled. It is guaranteed that no IO is
  outstanding at this moment and that adieu implementation won't touch
  either IO operation structure or associated data pages afterward.

- After analyzing IO result codes, a user is free to either de-allocate
  IO operation structure by calling m0_stob_io_fini() or use it to queue
  another IO operation potentially against different object.
</pre><p><b>Ordering and barriers.</b></p>
<p>The only guarantee about relative order of IO operations state transitions is that execution of any updating operation submitted before m0_stob_io_opcode::SIO_BARRIER operation completes before any updating operation submitted after the barrier starts executing. For the purpose of this definition, an updating operation is an operation of any valid type different from SIO_READ (i.e., barriers are updating operations).</p>
<p>A barrier operation completes when all operations submitted before it (including other barrier operations) complete.</p>
<dl class="section warning"><dt>Warning</dt><dd>Clarify the scope of a barrier: a single storage object, a storage object domain, a storage object type, all local storage objects or all objects in the system.</dd></dl>
<p><b>IO alignment and granularity.</b></p>
<p>Alignment is not "optimal IO size". This is a requirement rather than hint.</p>
<p>Block sizes are needed for the following reasons: </p><pre class="fragment">- to insulate stob IO layer from read-modify-write details;

- to allow IO to the portions of objects inaccessible through the
  flat 64-bit byte-granularity name-space.
</pre><dl class="section note"><dt>Note</dt><dd>the scheme is very simplistic, enforcing the same unit of alignment and granularity. Sophistication could be added as necessary.</dd></dl>
<p><b>Result codes.</b></p>
<p>In addition to filling in data pages with the data (in a case read operation), adieu supplies two status codes on IO completion: </p><pre class="fragment">- &lt;tt&gt;m0_stob_io::si_rc&lt;/tt&gt; is a return code of IO operation. 0 means
  success, any other possible value is negated errno;

- &lt;tt&gt;m0_stob_io::si_count&lt;/tt&gt; is a number of blocks (as defined by
  m0_stob_op::sop_block_shift()) successfully transferred between data
  pages and the storage object. When IO is executed in prefixed
  fragments mode, exactly &lt;tt&gt;m0_stob_io::si_count&lt;/tt&gt; blocks of the
  storage object, starting from the offset
  &lt;tt&gt;m0_stob_io::si_stob.ov_index[0]&lt;/tt&gt; were transferred.
</pre><p><b>Data ownership.</b></p>
<p>Data pages are owned by adieu implementation from the moment of call to <a class="el" href="../../d9/d6a/group__stob.html#gab1811fa19d5ad35f688b02bcc44f473e">m0_stob_io_launch()</a> until the chan is signalled. adieu users must not inspect or modify data during that time. An implementation is free to modify the data temporarily, un-map pages, etc. An implementation must not touch the data at any other time.</p>
<p><b>Liveness rules.</b></p>
<p><a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> can be freed once it is owned by an adieu user (see data ownership). It has no explicit reference counting, a user must add its own should <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> be shared between multiple threads.</p>
<p>The user must guarantee that the target storage object is pinned in memory while IO operation is owned by the implementation. An implementation is free to touch storage object while IO is in progress.</p>
<p>Similarly, the user must pin the transaction and IO scope while <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> is owned by the implementation.</p>
<p><b>Concurrency.</b></p>
<p>When <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> is owned by a user, the user is responsible for concurrency control.</p>
<p>Implementation guarantees that synchronous channel notification (through clink call-back) happens in the context not holding IO lock.</p>
<p>At the moment there are two types of storage object supporting adieu: </p><pre class="fragment">- Linux file system based one, using Linux libaio interfaces;

- AD stob type implements adieu on top of underlying backing store
  storage object.
</pre><p><b>State.</b> </p><pre class="fragment">                   (O)(X)
                    |  ^
                    |  |
  m0_stob_io_init() |  | m0_stob_io_fini()
                    |  |
                    V  |
                  SIS_IDLE
                    |  ^
                    |  |
m0_stob_io_launch() |  | IO completion
                    |  |
                    V  |
                  SIS_BUSY</pre><dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000296">Todo:</a></b></dt><dd>A natural way to extend this design is to introduce additional SIS_PREPARED state and to split IO operation submission into two stages: (i) "preparation" stage that is entered once "IO geometry" is known (i.e., once <a class="el" href="../../d1/d8f/structm0__vec.html">m0_vec</a> of data pages and <a class="el" href="../../d1/d8f/structm0__vec.html">m0_vec</a> storage objects are known) and (ii) "queueing" stage that is entered when in addition to IO geometry, actual data pages are allocated. The motivating example for this refinement is a data server handling read or write RPC from a client. The RPC contains enough information to build IO vectors, while data arrive later through RDMA. To avoid dead-locks, it is crucial to avoid dynamic resource allocations (first of all, memory allocations) in data path after resources are consumed by RDMA. To this end, IO operation must be completely set up and ready for queueing before RMDA starts, i.e., before data pages are available.</dd></dl>
</div></td></tr>
<tr class="memitem:ga861f6ac1e3135d275aa1d012917073f0"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga861f6ac1e3135d275aa1d012917073f0">m0_stob_io_private_setup</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>, struct <a class="el" href="../../d1/d0a/structm0__stob.html">m0_stob</a> *<a class="el" href="../../d9/d6a/group__stob.html#gadccdc10bef50325fcf004749e4d38f76">obj</a>)</td></tr>
<tr class="separator:ga861f6ac1e3135d275aa1d012917073f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga80f5f783068972cdc94324cd1b70a439"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga80f5f783068972cdc94324cd1b70a439">m0_stob_io_init</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>)</td></tr>
<tr class="separator:ga80f5f783068972cdc94324cd1b70a439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga42b6747b9b94d1c1f76ca76d5b519ae2"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga42b6747b9b94d1c1f76ca76d5b519ae2">m0_stob_io_fini</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>)</td></tr>
<tr class="separator:ga42b6747b9b94d1c1f76ca76d5b519ae2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8c2cf0bb2957fcaa3d3ca3c8788423b"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#gae8c2cf0bb2957fcaa3d3ca3c8788423b">m0_stob_io_credit</a> (const struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>, const struct <a class="el" href="../../dc/d61/structm0__stob__domain.html">m0_stob_domain</a> *<a class="el" href="../../d9/d6a/group__stob.html#ga6b9f7e6115c241d0a8ea3087490f1043">dom</a>, struct <a class="el" href="../../d0/df0/structm0__be__tx__credit.html">m0_be_tx_credit</a> *accum)</td></tr>
<tr class="separator:gae8c2cf0bb2957fcaa3d3ca3c8788423b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga328103b536288ef61e58c10ea126cb19"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga328103b536288ef61e58c10ea126cb19">m0_stob_io_prepare</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>, struct <a class="el" href="../../d1/d0a/structm0__stob.html">m0_stob</a> *<a class="el" href="../../d9/d6a/group__stob.html#gadccdc10bef50325fcf004749e4d38f76">obj</a>, struct <a class="el" href="../../de/d0f/structm0__dtx.html">m0_dtx</a> *tx, struct m0_io_scope *scope)</td></tr>
<tr class="separator:ga328103b536288ef61e58c10ea126cb19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1811fa19d5ad35f688b02bcc44f473e"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#gab1811fa19d5ad35f688b02bcc44f473e">m0_stob_io_launch</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>, struct <a class="el" href="../../d1/d0a/structm0__stob.html">m0_stob</a> *<a class="el" href="../../d9/d6a/group__stob.html#gadccdc10bef50325fcf004749e4d38f76">obj</a>, struct <a class="el" href="../../de/d0f/structm0__dtx.html">m0_dtx</a> *tx, struct m0_io_scope *scope)</td></tr>
<tr class="separator:gab1811fa19d5ad35f688b02bcc44f473e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9308afb8f3a18c9ec47e96a96bab9cea"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga9308afb8f3a18c9ec47e96a96bab9cea">m0_stob_io_prepare_and_launch</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../d9/d6a/group__stob.html#gaeb1877288988220ae91d6e6350eb62db">io</a>, struct <a class="el" href="../../d1/d0a/structm0__stob.html">m0_stob</a> *<a class="el" href="../../d9/d6a/group__stob.html#gadccdc10bef50325fcf004749e4d38f76">obj</a>, struct <a class="el" href="../../de/d0f/structm0__dtx.html">m0_dtx</a> *tx, struct m0_io_scope *scope)</td></tr>
<tr class="separator:ga9308afb8f3a18c9ec47e96a96bab9cea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga636ea3c652fed4550feb2be439a94246"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga636ea3c652fed4550feb2be439a94246">m0_stob_io_user_is_valid</a> (const struct <a class="el" href="../../da/d2c/structm0__bufvec.html">m0_bufvec</a> *user)</td></tr>
<tr class="separator:ga636ea3c652fed4550feb2be439a94246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga47f309e90e9d65c1983fef8c95413b7c"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga47f309e90e9d65c1983fef8c95413b7c">m0_stob_io_stob_is_valid</a> (const struct <a class="el" href="../../df/da2/structm0__indexvec.html">m0_indexvec</a> *<a class="el" href="../../dc/d74/addb2_2ut_2storage_8c.html#a88229f8e0efdd14faf753547c8dcd9a9">stob</a>)</td></tr>
<tr class="separator:ga47f309e90e9d65c1983fef8c95413b7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90de8326ff4d4b3337d372237937c6b0"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga90de8326ff4d4b3337d372237937c6b0">m0_stob_io_bufvec_launch</a> (struct <a class="el" href="../../d1/d0a/structm0__stob.html">m0_stob</a> *<a class="el" href="../../dc/d74/addb2_2ut_2storage_8c.html#a88229f8e0efdd14faf753547c8dcd9a9">stob</a>, struct <a class="el" href="../../da/d2c/structm0__bufvec.html">m0_bufvec</a> *bufvec, int op_code, <a class="el" href="../../d9/d49/types_8h.html#a4f7930f80649d778aee0bd974ff16645">m0_bindex_t</a> <a class="el" href="../../d0/d9e/group__addb2.html#ga0e28f0d2e846f9ae37ef12de8cad22aa">offset</a>)</td></tr>
<tr class="separator:ga90de8326ff4d4b3337d372237937c6b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae117d5576b6321b78bd49220acf6008b"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#gae117d5576b6321b78bd49220acf6008b">m0_stob_addr_pack</a> (const void *<a class="el" href="../../d9/dd0/structbuf.html">buf</a>, uint32_t shift)</td></tr>
<tr class="separator:gae117d5576b6321b78bd49220acf6008b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4cf38b6b175b51264bc34ebc4ddda7fc"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga4cf38b6b175b51264bc34ebc4ddda7fc">m0_stob_addr_open</a> (const void *<a class="el" href="../../d9/dd0/structbuf.html">buf</a>, uint32_t shift)</td></tr>
<tr class="separator:ga4cf38b6b175b51264bc34ebc4ddda7fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga891954245102173e2d534f8299c67920"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d6a/group__stob.html#ga891954245102173e2d534f8299c67920">m0_stob_iovec_sort</a> (struct <a class="el" href="../../dc/dca/structm0__stob__io.html">m0_stob_io</a> *<a class="el" href="../../dc/d74/addb2_2ut_2storage_8c.html#a88229f8e0efdd14faf753547c8dcd9a9">stob</a>)</td></tr>
<tr class="separator:ga891954245102173e2d534f8299c67920"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae762ad8776496e788bf62e0fa1615b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae762ad8776496e788bf62e0fa1615b61">&#9670;&nbsp;</a></span>M0_TRACE_SUBSYSTEM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define M0_TRACE_SUBSYSTEM&#160;&#160;&#160;M0_TRACE_SUBSYS_STOB</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../df/d18/stob_2io_8c_source.html#l00023">23</a> of file <a class="el" href="../../df/d18/stob_2io_8c_source.html">io.c</a>.</p>

</div>
</div>
<a id="a6b113ed89e46930ad0a36d41a8d5b272"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b113ed89e46930ad0a36d41a8d5b272">&#9670;&nbsp;</a></span>SWAP_NEXT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SWAP_NEXT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">arr, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">idx&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">({                                              \</div><div class="line">        int               _idx = (idx);         \</div><div class="line">        typeof(&amp;arr[idx]) _arr = (arr);         \</div><div class="line">        typeof(arr[idx])  _tmp;                 \</div><div class="line">                                                \</div><div class="line">        _tmp           = _arr[_idx];            \</div><div class="line">        _arr[_idx]     = _arr[_idx + 1];        \</div><div class="line">        _arr[_idx + 1] = _tmp;                  \</div><div class="line">})</div></div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_fb812d008893340bfa478f60924a5819.html">stob</a></li><li class="navelem"><a class="el" href="../../df/d18/stob_2io_8c.html">io.c</a></li>
    <li class="footer">Generated on Fri May 20 2022 10:35:07 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
