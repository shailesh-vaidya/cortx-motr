<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: dtm/update.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d1/d69/update_8c_source.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">update.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d1/d69/update_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* -*- C -*- */</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2013-2020 Seagate Technology LLC and/or its Affiliates</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * You may obtain a copy of the License at</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * See the License for the specific language governing permissions and</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * limitations under the License.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * For any questions about this software or licensing,</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * please email opensource@seagate.com or cortx-questions@seagate.com.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#gae762ad8776496e788bf62e0fa1615b61">   30</a></span>&#160;<span class="preprocessor">#define M0_TRACE_SUBSYSTEM M0_TRACE_SUBSYS_DTM</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d1b/trace_8h.html">lib/trace.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/da7/assert_8h.html">lib/assert.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dc2/errno_8h.html">lib/errno.h</a>&quot;</span>                  <span class="comment">/* EPROTO */</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d2a/lib_2misc_8h.html">lib/misc.h</a>&quot;</span>                   <span class="comment">/* M0_IN */</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d08/magic_8h.html">motr/magic.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d51/fop_2fop_8h.html">fop/fop.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d48/dtm__internal_8h.html">dtm/dtm_internal.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d06/nucleus_8h.html">dtm/nucleus.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dbd/operation_8h.html">dtm/operation.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d04/history_8h.html">dtm/history.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d06/remote_8h.html">dtm/remote.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d72/update_8h.html">dtm/update.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga49c547cd96a1df659006ae90d5c3596d">   47</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#ga49c547cd96a1df659006ae90d5c3596d">m0_dtm_update_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update,</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                                    <span class="keyword">struct</span> <a class="code" href="../../d0/d91/structm0__dtm__history.html">m0_dtm_history</a> *history,</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                    <span class="keyword">struct</span> <a class="code" href="../../d0/d2d/structm0__dtm__oper.html">m0_dtm_oper</a> *oper,</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                                    <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d7/d4d/structm0__dtm__update__data.html">m0_dtm_update_data</a> *<a class="code" href="../../d4/d00/ut_2di_8c.html#a3de5f992cc2347f66878d072e5934900">data</a>)</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../df/d2a/lib_2misc_8h.html#a7f75ab6839d468f4d23480a9c65724c5">ergo</a>(<a class="code" href="../../d4/d00/ut_2di_8c.html#a3de5f992cc2347f66878d072e5934900">data</a>-&gt;da_label != 0,</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                    <a class="code" href="../../d7/d08/group__tlist.html#gaff6f93b3ca67a19e8460cc469f5eabda">m0_tl_forall</a>(oper, <a class="code" href="../../d4/d44/group__cas.html#ga46a9e7a418c24303a1e6f2df2fa3cf84">upd</a>, &amp;oper-&gt;<a class="code" href="../../d0/d2d/structm0__dtm__oper.html#ad742cc67df9c028830adf54dcbd234d6">oprt_op</a>.<a class="code" href="../../de/d2f/structm0__dtm__op.html#a6bdf502e5d2af2e386e00ffc3f701ebc">op_ups</a>,</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                 <a class="code" href="../../d4/d44/group__cas.html#ga46a9e7a418c24303a1e6f2df2fa3cf84">upd</a>-&gt;upd_up.up_state == <a class="code" href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77a76d545ccc77ce257dcc7b8d02f63c0db">M0_DOS_LIMBO</a> &amp;&amp;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                 <a class="code" href="../../d4/d44/group__cas.html#ga46a9e7a418c24303a1e6f2df2fa3cf84">upd</a>-&gt;upd_label != <a class="code" href="../../d4/d00/ut_2di_8c.html#a3de5f992cc2347f66878d072e5934900">data</a>-&gt;da_label)));</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(!(history-&gt;<a class="code" href="../../d0/d91/structm0__dtm__history.html#a4191a28c0feaf2d4e49d39d1f9d28567">h_hi</a>.<a class="code" href="../../df/d76/structm0__dtm__hi.html#a695823eaa3fc37d17a4d877f4e698490">hi_flags</a> &amp; <a class="code" href="../../d2/d66/group__dtm.html#gga103a6550e97d6e3bb9a45768373e27dcae93cf08991966fe4ea38c20da5e94229">M0_DHF_CLOSED</a>));</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d2/d66/group__dtm.html#ga2cc573b4889d369e6aa21ced8a56d355">m0_dtm_oper_invariant</a>(oper));</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <a class="code" href="../../d2/d66/group__dtm.html#ga14378815cd4ba1ee375b6e8cf012314b">m0_dtm_up_init</a>(&amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>, &amp;history-&gt;<a class="code" href="../../d0/d91/structm0__dtm__history.html#a4191a28c0feaf2d4e49d39d1f9d28567">h_hi</a>, &amp;oper-&gt;<a class="code" href="../../d0/d2d/structm0__dtm__oper.html#ad742cc67df9c028830adf54dcbd234d6">oprt_op</a>,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                       <a class="code" href="../../d4/d00/ut_2di_8c.html#a3de5f992cc2347f66878d072e5934900">data</a>-&gt;da_rule, <a class="code" href="../../d4/d00/ut_2di_8c.html#a3de5f992cc2347f66878d072e5934900">data</a>-&gt;da_ver, <a class="code" href="../../d4/d00/ut_2di_8c.html#a3de5f992cc2347f66878d072e5934900">data</a>-&gt;da_orig_ver);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a389a2c45079e2b285bd32a0feb2f59b0">upd_label</a> = <a class="code" href="../../d4/d00/ut_2di_8c.html#a3de5f992cc2347f66878d072e5934900">data</a>-&gt;da_label;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d2/d66/group__dtm.html#ga2cc573b4889d369e6aa21ced8a56d355">m0_dtm_oper_invariant</a>(oper));</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#aea86d55595126b703b9e619887f09a22">M0_POST</a>(<a class="code" href="../../d2/d66/group__dtm.html#ga01b17a0f3ebc673f494da03549d23e31">m0_dtm_update_invariant</a>(update));</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga01b17a0f3ebc673f494da03549d23e31">   65</a></span>&#160;M0_INTERNAL <span class="keywordtype">bool</span> <a class="code" href="../../d2/d66/group__dtm.html#ga01b17a0f3ebc673f494da03549d23e31">m0_dtm_update_invariant</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update)</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/d38/structm0__dtm__up.html">m0_dtm_up</a>          *up     = &amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <span class="keyword">enum</span> <a class="code" href="../../d2/d66/group__dtm.html#ga4ffb9e46a4e75aa5b17456d89e6b9a77">m0_dtm_state</a>                state  = up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#aad7421c8d83c2cd58a9f15ecdde2cb04">up_state</a>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/de4/structm0__dtm__update__comm.html">m0_dtm_update_comm</a> *comm   = &amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a1a6fa28142300b79be7cd2c085f91b27">upd_comm</a>;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keyword">enum</span> <a class="code" href="../../d2/d66/group__dtm.html#ga531b9ee4430cc252eaff26996e9b6cfe">m0_dtm_update_comm_state</a>    cstate = comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a9c84c5cae862973ed217902491644f88">uc_state</a>;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d01/structm0__fop.html">m0_fop</a>             *<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ae3831fffc49e626dd50da5fa40537d3e">body</a>   = comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a399085da21f91aa9626ad8d4bfcc3c91">uc_body</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../dc/d0c/structm0__dtm__remote.html">m0_dtm_remote</a>            *rem    = <a class="code" href="../../d2/d66/group__dtm.html#ga19192261c60a882a3deca0013deaa714">UPDATE_REM</a>(update);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordflow">return</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <a class="code" href="../../d2/d66/group__dtm.html#gab6d2801051ec9d8369ad0af14fd3c1e5">m0_dtm_up_invariant</a>(up) &amp;&amp;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <a class="code" href="../../db/dca/group__assert.html#gaa830530062e2cf2e3f619985e59881a6">_0C</a>(M0_IN(cstate, (<a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea3fd06495a95078d0feb7007bcc3fd360">M0_DUX_NEW</a>,</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                                   <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea9c830c4e5bdc8e4a5086077436764821">M0_DUX_INFLIGHT</a>, <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea8442a8a3daf5755bb25d595ba99c3c71">M0_DUX_REPLIED</a>))) &amp;&amp;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                <a class="code" href="../../db/dca/group__assert.html#gaa830530062e2cf2e3f619985e59881a6">_0C</a>(<a class="code" href="../../df/d2a/lib_2misc_8h.html#a7f75ab6839d468f4d23480a9c65724c5">ergo</a>(rem == <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ae3831fffc49e626dd50da5fa40537d3e">body</a> == <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) &amp;&amp;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                <a class="code" href="../../db/dca/group__assert.html#gaa830530062e2cf2e3f619985e59881a6">_0C</a>(<a class="code" href="../../df/d2a/lib_2misc_8h.html#a7f75ab6839d468f4d23480a9c65724c5">ergo</a>(<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ae3831fffc49e626dd50da5fa40537d3e">body</a> == <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, cstate == <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea3fd06495a95078d0feb7007bcc3fd360">M0_DUX_NEW</a>)) &amp;&amp;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                <a class="code" href="../../db/dca/group__assert.html#gaa830530062e2cf2e3f619985e59881a6">_0C</a>(<a class="code" href="../../df/d2a/lib_2misc_8h.html#a7f75ab6839d468f4d23480a9c65724c5">ergo</a>(state &gt; <a class="code" href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77a3b5275b780617818898ccf8620180cff">M0_DOS_INPROGRESS</a>,</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                         <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ae3831fffc49e626dd50da5fa40537d3e">body</a> == <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || cstate &gt; <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea3fd06495a95078d0feb7007bcc3fd360">M0_DUX_NEW</a>)) &amp;&amp;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <a class="code" href="../../db/dca/group__assert.html#gaa830530062e2cf2e3f619985e59881a6">_0C</a>(<a class="code" href="../../df/d2a/lib_2misc_8h.html#a7f75ab6839d468f4d23480a9c65724c5">ergo</a>(cstate == <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea8442a8a3daf5755bb25d595ba99c3c71">M0_DUX_REPLIED</a>,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                         <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ae3831fffc49e626dd50da5fa40537d3e">body</a>-&gt;f_item.ri_reply != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) &amp;&amp;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                <a class="code" href="../../db/dca/group__assert.html#gaa830530062e2cf2e3f619985e59881a6">_0C</a>(<a class="code" href="../../df/d2a/lib_2misc_8h.html#a7f75ab6839d468f4d23480a9c65724c5">ergo</a>(rem != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#ab226d8d1737feae23bb08f04bba934c6">uc_instance</a> &lt;= rem-&gt;<a class="code" href="../../dc/d0c/structm0__dtm__remote.html#a3fc3a1f448979b7cf94643e0a1e45281">re_instance</a>));</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga498ff96d8fc68e4103ce3693ade0f953">   87</a></span>&#160;M0_INTERNAL <span class="keywordtype">bool</span> <a class="code" href="../../d2/d66/group__dtm.html#ga498ff96d8fc68e4103ce3693ade0f953">m0_dtm_update_is_user</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update)</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d2/d66/group__dtm.html#ga01b17a0f3ebc673f494da03549d23e31">m0_dtm_update_invariant</a>(update));</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">return</span> update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a389a2c45079e2b285bd32a0feb2f59b0">upd_label</a> &gt;= <a class="code" href="../../d2/d66/group__dtm.html#gga8feb5a39a55448c86e0dfc20f53a6c1da5c83788e408458777f6439368ee503af">M0_DTM_USER_UPDATE_BASE</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga32f292daeadb7db81f1a8b7dc25a6034">   93</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#ga32f292daeadb7db81f1a8b7dc25a6034">m0_dtm_update_pack</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                                    <span class="keyword">struct</span> <a class="code" href="../../d3/d01/structm0__dtm__update__descr.html">m0_dtm_update_descr</a> *updd)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/d38/structm0__dtm__up.html">m0_dtm_up</a> *up      = &amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/d91/structm0__dtm__history.html">m0_dtm_history</a>  *history = <a class="code" href="../../d2/d66/group__dtm.html#gadb84bb13e1c17b8c62ee8a674f466b6d">UPDATE_HISTORY</a>(update);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d2/d66/group__dtm.html#ga01b17a0f3ebc673f494da03549d23e31">m0_dtm_update_invariant</a>(update));</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#aad7421c8d83c2cd58a9f15ecdde2cb04">up_state</a> &gt;= <a class="code" href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77ac1f2b7bce4096637a6e66459eeb3a197">M0_DOS_FUTURE</a>);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        *updd = (<span class="keyword">struct </span><a class="code" href="../../d3/d01/structm0__dtm__update__descr.html">m0_dtm_update_descr</a>) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                .<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a2e2a8858ea5d9014b7496a69b5a7219c">udd_utype</a> = update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#afcc78636cfe88ef12c2e37f7fab26213">upd_ops</a>-&gt;<a class="code" href="../../d3/d2b/structm0__dtm__update__ops.html#af4ffce45ac4ab06d19cb8d45c02b30e5">updo_type</a>-&gt;<a class="code" href="../../db/d4d/structm0__dtm__update__type.html#a5117adb79981d73588b880b72a219840">updtt_id</a>,</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                .udd_data  = {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                        .da_label    = update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a389a2c45079e2b285bd32a0feb2f59b0">upd_label</a>,</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                        .da_rule     = up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a9414e6549c5871aa032170188157f6e7">up_rule</a>,</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                        .da_ver      = up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a094b522367f3cc323099c64dfd3d4f16">up_ver</a>,</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                        .da_orig_ver = up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a36a7f8155d72bfb0895c2fadd8f6258e">up_orig_ver</a></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        };</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="../../d2/d66/group__dtm.html#ga0fcd164bf889efd21d1fe708b6fd118b">m0_dtm_history_pack</a>(history, &amp;updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a96cfcd0d9b89380889dba2cd34589b16">udd_id</a>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#gad4134c67f2d252cafd40c3db47cb262d">  113</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#gad4134c67f2d252cafd40c3db47cb262d">m0_dtm_update_unpack</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update,</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                      <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/d01/structm0__dtm__update__descr.html">m0_dtm_update_descr</a> *updd)</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../df/d38/structm0__dtm__up.html">m0_dtm_up</a> *up = &amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a389a2c45079e2b285bd32a0feb2f59b0">upd_label</a> == updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a7127dbefb3672b1d4136af5ecb2701e7">da_label</a>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(M0_IN(update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#aad7421c8d83c2cd58a9f15ecdde2cb04">up_state</a>, (<a class="code" href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77a3b5275b780617818898ccf8620180cff">M0_DOS_INPROGRESS</a>,</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                               <a class="code" href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77ab674113acfaf51b3fee118c4a04171ca">M0_DOS_PREPARE</a>)));</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d2/d66/group__dtm.html#gadb84bb13e1c17b8c62ee8a674f466b6d">UPDATE_HISTORY</a>(update)-&gt;h_ops-&gt;hio_type-&gt;hit_id ==</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;               updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a96cfcd0d9b89380889dba2cd34589b16">udd_id</a>.<a class="code" href="../../d5/dcd/structm0__dtm__history__id.html#ad824a1030a39b5a8991c15c490450c9c">hid_htype</a>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d2/d66/group__dtm.html#ga60d2644343876de839f97cec6d4dc647">m0_dtm_update_matches_descr</a>(update, updd));</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a9414e6549c5871aa032170188157f6e7">up_rule</a>     = updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a17147b68fba5df1b9ad4eea6e317f871">da_rule</a>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a094b522367f3cc323099c64dfd3d4f16">up_ver</a>      = updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a6b012f0d978c92b2eda31c5319d0d81a">da_ver</a>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a36a7f8155d72bfb0895c2fadd8f6258e">up_orig_ver</a> = updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a8da9c9feba994bc3876a9aa59f608201">da_orig_ver</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#aea86d55595126b703b9e619887f09a22">M0_POST</a>(<a class="code" href="../../d2/d66/group__dtm.html#ga01b17a0f3ebc673f494da03549d23e31">m0_dtm_update_invariant</a>(update));</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga51b850681477e2290f76ed389660dfcd">  132</a></span>&#160;M0_INTERNAL <span class="keywordtype">int</span> <a class="code" href="../../d2/d66/group__dtm.html#ga51b850681477e2290f76ed389660dfcd">m0_dtm_update_build</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update,</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                    <span class="keyword">struct</span> <a class="code" href="../../d0/d2d/structm0__dtm__oper.html">m0_dtm_oper</a> *oper,</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                    <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/d01/structm0__dtm__update__descr.html">m0_dtm_update_descr</a> *updd)</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/d91/structm0__dtm__history.html">m0_dtm_history</a>            *history;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../db/d9f/structm0__dtm.html">m0_dtm</a>                    *dtm = <a class="code" href="../../d2/d66/group__dtm.html#gafc6f438476185033152b59e42a9333e5">nu_dtm</a>(oper-&gt;<a class="code" href="../../d0/d2d/structm0__dtm__oper.html#ad742cc67df9c028830adf54dcbd234d6">oprt_op</a>.<a class="code" href="../../de/d2f/structm0__dtm__op.html#afd3307b37b2c0074fcc966ab548ec37b">op_nu</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;        <span class="keywordtype">int</span>                               result;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        result = <a class="code" href="../../d2/d66/group__dtm.html#gaa2f0b1a41fca2db76256ff2dcc4acd23">m0_dtm_history_unpack</a>(dtm, &amp;updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a96cfcd0d9b89380889dba2cd34589b16">udd_id</a>, &amp;history);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">if</span> (result == 0) {</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d7/d08/group__tlist.html#gaff792c7170b8ef517d40f1a37eb5340d">m0_tl_exists</a>(oper, <a class="code" href="../../d9/dcf/group__be.html#ga3e228246ddb549616a176cca6d44301d">scan</a>, &amp;oper-&gt;<a class="code" href="../../d0/d2d/structm0__dtm__oper.html#ad742cc67df9c028830adf54dcbd234d6">oprt_op</a>.<a class="code" href="../../de/d2f/structm0__dtm__op.html#a6bdf502e5d2af2e386e00ffc3f701ebc">op_ups</a>,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                 <a class="code" href="../../d9/dcf/group__be.html#ga3e228246ddb549616a176cca6d44301d">scan</a>-&gt;upd_label == updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a7127dbefb3672b1d4136af5ecb2701e7">da_label</a>))</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                        <span class="keywordflow">return</span> <a class="code" href="../../d8/d98/group__trace.html#gadcff472fb398402105feb7fa41add0a5">M0_ERR_INFO</a>(-EPROTO, <span class="stringliteral">&quot;%i&quot;</span>, updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a7127dbefb3672b1d4136af5ecb2701e7">da_label</a>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                <a class="code" href="../../d2/d66/group__dtm.html#ga49c547cd96a1df659006ae90d5c3596d">m0_dtm_update_init</a>(update, history, oper, &amp;updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                result = history-&gt;<a class="code" href="../../d0/d91/structm0__dtm__history.html#a7c0c493b622e3bed255cee1e3a8c646c">h_ops</a>-&gt;<a class="code" href="../../d7/d17/structm0__dtm__history__ops.html#ac0c6393e8346ef33b651c9b25dbed923">hio_update</a>(history, updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a2e2a8858ea5d9014b7496a69b5a7219c">udd_utype</a>,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                                    update);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#aea86d55595126b703b9e619887f09a22">M0_POST</a>(<a class="code" href="../../df/d2a/lib_2misc_8h.html#a7f75ab6839d468f4d23480a9c65724c5">ergo</a>(result == 0, <a class="code" href="../../d2/d66/group__dtm.html#ga01b17a0f3ebc673f494da03549d23e31">m0_dtm_update_invariant</a>(update)));</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;}</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;M0_INTERNAL <span class="keywordtype">bool</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga60d2644343876de839f97cec6d4dc647">  154</a></span>&#160;<a class="code" href="../../d2/d66/group__dtm.html#ga60d2644343876de839f97cec6d4dc647">m0_dtm_update_matches_descr</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                            <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/d01/structm0__dtm__update__descr.html">m0_dtm_update_descr</a> *updd)</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/d38/structm0__dtm__up.html">m0_dtm_up</a> *up = &amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="keywordflow">return</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a9414e6549c5871aa032170188157f6e7">up_rule</a> == updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a17147b68fba5df1b9ad4eea6e317f871">da_rule</a> &amp;&amp;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                M0_IN(up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a094b522367f3cc323099c64dfd3d4f16">up_ver</a>,      (0, updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a6b012f0d978c92b2eda31c5319d0d81a">da_ver</a>)) &amp;&amp;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                M0_IN(up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a36a7f8155d72bfb0895c2fadd8f6258e">up_orig_ver</a>, (0, updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a8da9c9feba994bc3876a9aa59f608201">da_orig_ver</a>));</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;M0_INTERNAL <span class="keywordtype">bool</span></div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#gabb248d073e3b94b4f495beda7f5d3d63">  166</a></span>&#160;<a class="code" href="../../d2/d66/group__dtm.html#gabb248d073e3b94b4f495beda7f5d3d63">m0_dtm_descr_matches_update</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update,</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                            <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/d01/structm0__dtm__update__descr.html">m0_dtm_update_descr</a> *updd)</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/d38/structm0__dtm__up.html">m0_dtm_up</a> *up = &amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">return</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a9414e6549c5871aa032170188157f6e7">up_rule</a> == updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a17147b68fba5df1b9ad4eea6e317f871">da_rule</a> &amp;&amp;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                M0_IN(updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a6b012f0d978c92b2eda31c5319d0d81a">da_ver</a>,      (0, up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a094b522367f3cc323099c64dfd3d4f16">up_ver</a>)) &amp;&amp;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                M0_IN(updd-&gt;<a class="code" href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">udd_data</a>.<a class="code" href="../../d7/d4d/structm0__dtm__update__data.html#a8da9c9feba994bc3876a9aa59f608201">da_orig_ver</a>, (0, up-&gt;<a class="code" href="../../df/d38/structm0__dtm__up.html#a36a7f8155d72bfb0895c2fadd8f6258e">up_orig_ver</a>));</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga0d615c1f65e78d3ce5db7b570aeed029">  177</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#ga0d615c1f65e78d3ce5db7b570aeed029">m0_dtm_update_list_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8a/structm0__tl.html">m0_tl</a> *<a class="code" href="../../dd/d94/lib_2ut_2list_8c.html#a510d1f3465504f3f259cf505d0e14d98">list</a>)</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        oper_tlist_init(<a class="code" href="../../dd/d94/lib_2ut_2list_8c.html#a510d1f3465504f3f259cf505d0e14d98">list</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;}</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#gabcbc1f0f85575350fa0085f43f9f446b">  182</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#gabcbc1f0f85575350fa0085f43f9f446b">m0_dtm_update_list_fini</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8a/structm0__tl.html">m0_tl</a> *<a class="code" href="../../dd/d94/lib_2ut_2list_8c.html#a510d1f3465504f3f259cf505d0e14d98">list</a>)</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;{</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *leftover;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <a class="code" href="../../d7/d08/group__tlist.html#ga6c73104b68112bed660165c64164fadf">m0_tl_for</a>(oper, <a class="code" href="../../dd/d94/lib_2ut_2list_8c.html#a510d1f3465504f3f259cf505d0e14d98">list</a>, leftover) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                oper_tlist_del(leftover);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        } <a class="code" href="../../d7/d08/group__tlist.html#gaef8bbd93c23f12be0bfbb16ced9ad206">m0_tl_endfor</a>;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        oper_tlist_fini(<a class="code" href="../../dd/d94/lib_2ut_2list_8c.html#a510d1f3465504f3f259cf505d0e14d98">list</a>);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga4ee3d1dd79d55130647f1b8356a8c582">  192</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#ga4ee3d1dd79d55130647f1b8356a8c582">m0_dtm_update_reint</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update)</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;{</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#aad7421c8d83c2cd58a9f15ecdde2cb04">up_state</a> == <a class="code" href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77a3b5275b780617818898ccf8620180cff">M0_DOS_INPROGRESS</a>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a1a6fa28142300b79be7cd2c085f91b27">upd_comm</a>.<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a399085da21f91aa9626ad8d4bfcc3c91">uc_body</a> != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a1a6fa28142300b79be7cd2c085f91b27">upd_comm</a>.<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a9c84c5cae862973ed217902491644f88">uc_state</a> == <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea3fd06495a95078d0feb7007bcc3fd360">M0_DUX_NEW</a>);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        <a class="code" href="../../d2/d66/group__dtm.html#gada87223a12c4048b455a65fcdadf0cb9">history_lock</a>(<a class="code" href="../../d2/d66/group__dtm.html#gadb84bb13e1c17b8c62ee8a674f466b6d">UPDATE_HISTORY</a>(update));</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <a class="code" href="../../d2/d66/group__dtm.html#ga7c446b2497ca71f833f9f1c8ab65a701">update_reint</a>(update);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="../../d2/d66/group__dtm.html#gacd4994b2a9d4d8dd1b568d9a831f7885">history_unlock</a>(<a class="code" href="../../d2/d66/group__dtm.html#gadb84bb13e1c17b8c62ee8a674f466b6d">UPDATE_HISTORY</a>(update));</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;}</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#gaf09c3e4beb1e35f21bbce386678fbb5c">  203</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d2e/structm0__rpc__item__ops.html">m0_rpc_item_ops</a> <a class="code" href="../../d2/d66/group__dtm.html#gaf09c3e4beb1e35f21bbce386678fbb5c">dtm_update_item_ops</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga3fdc5c01d17b363a2cef993d28567179">  205</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#ga3fdc5c01d17b363a2cef993d28567179">m0_dtm_comm_set</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update,</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                 <span class="keyword">struct</span> <a class="code" href="../../d5/d01/structm0__fop.html">m0_fop</a> *<a class="code" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>)</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/de4/structm0__dtm__update__comm.html">m0_dtm_update_comm</a> *comm = &amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a1a6fa28142300b79be7cd2c085f91b27">upd_comm</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#aad7421c8d83c2cd58a9f15ecdde2cb04">up_state</a> &lt; <a class="code" href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77a3b5275b780617818898ccf8620180cff">M0_DOS_INPROGRESS</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a9c84c5cae862973ed217902491644f88">uc_state</a> == <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea3fd06495a95078d0feb7007bcc3fd360">M0_DUX_NEW</a>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a399085da21f91aa9626ad8d4bfcc3c91">uc_body</a> == <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>-&gt;<a class="code" href="../../d5/d01/structm0__fop.html#a0b7e78b55b052002c4f0a5f4ca411b3d">f_item</a>.<a class="code" href="../../de/d21/structm0__rpc__item.html#a6aa5edcd589a8e8b25d32c0c54fe6536">ri_ops</a> == <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>-&gt;<a class="code" href="../../d5/d01/structm0__fop.html#aa051939365c18e36fe127cf81546c018">f_opaque</a> == <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a399085da21f91aa9626ad8d4bfcc3c91">uc_body</a> = <a class="code" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>-&gt;<a class="code" href="../../d5/d01/structm0__fop.html#a0b7e78b55b052002c4f0a5f4ca411b3d">f_item</a>.<a class="code" href="../../de/d21/structm0__rpc__item.html#a6aa5edcd589a8e8b25d32c0c54fe6536">ri_ops</a> = &amp;<a class="code" href="../../d2/d66/group__dtm.html#gaf09c3e4beb1e35f21bbce386678fbb5c">dtm_update_item_ops</a>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>-&gt;<a class="code" href="../../d5/d01/structm0__fop.html#aa051939365c18e36fe127cf81546c018">f_opaque</a> = update;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;}</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#gaa55cc276def1a071844e9f6f86ecefc1">  221</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#gaa55cc276def1a071844e9f6f86ecefc1">m0_dtm_update_link</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d8a/structm0__tl.html">m0_tl</a> *<a class="code" href="../../dd/d94/lib_2ut_2list_8c.html#a510d1f3465504f3f259cf505d0e14d98">list</a>,</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                    <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update, uint32_t <a class="code" href="../../d0/d9e/group__addb2.html#ga5b89fe130d0e27d86bd6b4d92141a87e">nr</a>)</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">while</span> (<a class="code" href="../../d0/d9e/group__addb2.html#ga5b89fe130d0e27d86bd6b4d92141a87e">nr</a>-- != 0)</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                oper_tlink_init_at(update++, <a class="code" href="../../dd/d94/lib_2ut_2list_8c.html#a510d1f3465504f3f259cf505d0e14d98">list</a>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga33621c2c17f9d4d01072a05adc3d756f">  228</a></span>&#160;M0_INTERNAL <span class="keyword">struct </span><a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *<a class="code" href="../../d2/d66/group__dtm.html#ga33621c2c17f9d4d01072a05adc3d756f">up_update</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d38/structm0__dtm__up.html">m0_dtm_up</a> *up)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="keywordflow">return</span> up != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ?</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#af8c317a42292b61c93aae91e59118a46">container_of</a>(up, <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a>, <a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>) : <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga42ab44938c31e4ef30a3a6c7d06d2253">  234</a></span>&#160;M0_INTERNAL <span class="keywordtype">bool</span> <a class="code" href="../../d2/d66/group__dtm.html#ga42ab44938c31e4ef30a3a6c7d06d2253">update_is_earlier</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update0,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                                   <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update1)</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d2/d66/group__dtm.html#ga60630952cd2adcfd7d96ac9bb9b473fd">up_is_earlier</a>(<a class="code" href="../../d2/d66/group__dtm.html#ga600aebd1014f58e0537d94a24a8f9d3a">UPDATE_UP</a>(update0), <a class="code" href="../../d2/d66/group__dtm.html#ga600aebd1014f58e0537d94a24a8f9d3a">UPDATE_UP</a>(update1));</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#ga7c446b2497ca71f833f9f1c8ab65a701">  240</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#ga7c446b2497ca71f833f9f1c8ab65a701">update_reint</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update)</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/de4/structm0__dtm__update__comm.html">m0_dtm_update_comm</a> *comm    = &amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a1a6fa28142300b79be7cd2c085f91b27">upd_comm</a>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/d91/structm0__dtm__history.html">m0_dtm_history</a>     *history = <a class="code" href="../../d2/d66/group__dtm.html#gadb84bb13e1c17b8c62ee8a674f466b6d">UPDATE_HISTORY</a>(update);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../dc/d0c/structm0__dtm__remote.html">m0_dtm_remote</a>      *rem     = history-&gt;<a class="code" href="../../d0/d91/structm0__dtm__history.html#ad989b83728b007c870120ec1c7e17d55">h_rem</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#aad7421c8d83c2cd58a9f15ecdde2cb04">up_state</a> == <a class="code" href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77a3b5275b780617818898ccf8620180cff">M0_DOS_INPROGRESS</a>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">if</span> (comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a399085da21f91aa9626ad8d4bfcc3c91">uc_body</a> == <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="keywordflow">if</span> (comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a9c84c5cae862973ed217902491644f88">uc_state</a> == <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea3fd06495a95078d0feb7007bcc3fd360">M0_DUX_NEW</a>)</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                rem-&gt;<a class="code" href="../../dc/d0c/structm0__dtm__remote.html#a94ab1d9520c85be0fde9c10bdb7b1e99">re_ops</a>-&gt;<a class="code" href="../../df/dbe/structm0__dtm__remote__ops.html#a02950237f008985d2705f414585d12d5">reo_send</a>(rem, update);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a9c84c5cae862973ed217902491644f88">uc_state</a> == <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea9c830c4e5bdc8e4a5086077436764821">M0_DUX_INFLIGHT</a> &amp;&amp;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                 comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#ab226d8d1737feae23bb08f04bba934c6">uc_instance</a> == history-&gt;<a class="code" href="../../d0/d91/structm0__dtm__history.html#ad989b83728b007c870120ec1c7e17d55">h_rem</a>-&gt;<a class="code" href="../../dc/d0c/structm0__dtm__remote.html#a3fc3a1f448979b7cf94643e0a1e45281">re_instance</a>)</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                ;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                rem-&gt;<a class="code" href="../../dc/d0c/structm0__dtm__remote.html#a94ab1d9520c85be0fde9c10bdb7b1e99">re_ops</a>-&gt;<a class="code" href="../../df/dbe/structm0__dtm__remote__ops.html#aeeb3a4793e42886224d151c5262be5dc">reo_resend</a>(rem, update);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a9c84c5cae862973ed217902491644f88">uc_state</a>    = <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea9c830c4e5bdc8e4a5086077436764821">M0_DUX_INFLIGHT</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#ab226d8d1737feae23bb08f04bba934c6">uc_instance</a> = history-&gt;<a class="code" href="../../d0/d91/structm0__dtm__history.html#ad989b83728b007c870120ec1c7e17d55">h_rem</a>-&gt;<a class="code" href="../../dc/d0c/structm0__dtm__remote.html#a3fc3a1f448979b7cf94643e0a1e45281">re_instance</a>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#gab2a7ff61a98b4b36bc5c042773c62cf7">  262</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#gab2a7ff61a98b4b36bc5c042773c62cf7">dtm_update_replied</a>(<span class="keyword">struct</span> <a class="code" href="../../de/d21/structm0__rpc__item.html">m0_rpc_item</a> *<a class="code" href="../../d9/dbf/ut_2item_8c.html#ae944bcb72fdcfcfb06a9a27759eb347a">item</a>)</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d5/d01/structm0__fop.html">m0_fop</a>             *<a class="code" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>    = <a class="code" href="../../d6/d39/group__fop.html#ga8544e1edf0cb8a03920ecf624c72c971">m0_rpc_item_to_fop</a>(<a class="code" href="../../d9/dbf/ut_2item_8c.html#ae944bcb72fdcfcfb06a9a27759eb347a">item</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a>      *update = <a class="code" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>-&gt;<a class="code" href="../../d5/d01/structm0__fop.html#aa051939365c18e36fe127cf81546c018">f_opaque</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/de4/structm0__dtm__update__comm.html">m0_dtm_update_comm</a> *comm   = &amp;update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a1a6fa28142300b79be7cd2c085f91b27">upd_comm</a>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d2/d66/group__dtm.html#ga01b17a0f3ebc673f494da03549d23e31">m0_dtm_update_invariant</a>(update));</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a> == comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a399085da21f91aa9626ad8d4bfcc3c91">uc_body</a>);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a9c84c5cae862973ed217902491644f88">uc_state</a> == <a class="code" href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea9c830c4e5bdc8e4a5086077436764821">M0_DUX_INFLIGHT</a>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">/* XXX TODO Handle rpc errors. */</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">if</span> (!(comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a082b4c68550053ea5fa444aeea9c6edd">uc_flags</a> &amp; <a class="code" href="../../d2/d66/group__dtm.html#gga2012ab1ab1d52a562c64902160ec5c8daf9ad866f405759b3c13c62b4d2d54ac8">M0_DUCF_REPLIED_CALLED</a>)) {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                <span class="keywordflow">if</span> (update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#afcc78636cfe88ef12c2e37f7fab26213">upd_ops</a>-&gt;<a class="code" href="../../d3/d2b/structm0__dtm__update__ops.html#a50abdb60a1ac701dd306967420bc84b1">updto_replied</a> != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                        update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#afcc78636cfe88ef12c2e37f7fab26213">upd_ops</a>-&gt;<a class="code" href="../../d3/d2b/structm0__dtm__update__ops.html#a50abdb60a1ac701dd306967420bc84b1">updto_replied</a>(update);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                comm-&gt;<a class="code" href="../../d0/de4/structm0__dtm__update__comm.html#a082b4c68550053ea5fa444aeea9c6edd">uc_flags</a> |= <a class="code" href="../../d2/d66/group__dtm.html#gga2012ab1ab1d52a562c64902160ec5c8daf9ad866f405759b3c13c62b4d2d54ac8">M0_DUCF_REPLIED_CALLED</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d2e/structm0__rpc__item__ops.html">m0_rpc_item_ops</a> <a class="code" href="../../d2/d66/group__dtm.html#gaf09c3e4beb1e35f21bbce386678fbb5c">dtm_update_item_ops</a> = {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        .<a class="code" href="../../dd/d2e/structm0__rpc__item__ops.html#a00212f6709ea07d7c4d5ec09f8c98469">rio_replied</a> = &amp;<a class="code" href="../../d2/d66/group__dtm.html#gab2a7ff61a98b4b36bc5c042773c62cf7">dtm_update_replied</a></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;};</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<a class="code" href="../../d2/d66/group__dtm.html#ga848a67fc44760f24087552f3f3ecc573">M0_TL_DESCR_DEFINE</a>(history, <span class="stringliteral">&quot;dtm history updates&quot;</span>, M0_INTERNAL,</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                   <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a>,</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                   upd_up.up_hi_linkage, upd_up.up_magix,</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                   <a class="code" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119aa530331cec85970b0383abb171cc7f32">M0_DTM_UP_MAGIX</a>, <a class="code" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a532ced42019c12d59f2ecdee7c5c6ae9">M0_DTM_HI_MAGIX</a>);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<a class="code" href="../../d2/d66/group__dtm.html#ga6d990acb500a7dee2db28836a1330f23">M0_TL_DEFINE</a>(history, M0_INTERNAL, <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a>);</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<a class="code" href="../../d2/d66/group__dtm.html#ga848a67fc44760f24087552f3f3ecc573">M0_TL_DESCR_DEFINE</a>(oper, <span class="stringliteral">&quot;dtm operation updates&quot;</span>, M0_INTERNAL,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                   <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a>,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                   upd_up.up_op_linkage, upd_up.up_magix,</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                   <a class="code" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119aa530331cec85970b0383abb171cc7f32">M0_DTM_UP_MAGIX</a>, <a class="code" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a5701188528f344ed482ac23af179de6b">M0_DTM_OP_MAGIX</a>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<a class="code" href="../../d2/d66/group__dtm.html#ga6d990acb500a7dee2db28836a1330f23">M0_TL_DEFINE</a>(oper, M0_INTERNAL, <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a>);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#gac45edf05a97334c78c570ef249b7c81b">  297</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#gac45edf05a97334c78c570ef249b7c81b">update_print_internal</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                       <span class="keywordtype">bool</span> history)</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;{</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> state_name[] = <span class="stringliteral">&quot;LFpIVPS??????????????????&quot;</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> rule_name[] = <span class="stringliteral">&quot;ISNA?????????????????????&quot;</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordtype">char</span> <a class="code" href="../../d9/dd0/structbuf.html">buf</a>[100];</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <a class="code" href="../../d2/d66/group__dtm.html#gabfb6de8a0b6730f1ff34aef4afcaa91a">history_print_header</a>(<a class="code" href="../../d2/d66/group__dtm.html#gadb84bb13e1c17b8c62ee8a674f466b6d">UPDATE_HISTORY</a>(update), <a class="code" href="../../d9/dd0/structbuf.html">buf</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        <a class="code" href="../../d8/d98/group__trace.html#gabf13f904bc760a195c4e3b75fa471f58">M0_LOG</a>(<a class="code" href="../../d8/d98/group__trace.html#gga222dfe20eda8c002fbab0ebbb2a7848ba7d2a2b8fd8fa28703d1bf5d40087ac70">M0_FATAL</a>, <span class="stringliteral">&quot;\tupdate: %s@%p/%p: %s&quot;</span>,</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;               update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#afcc78636cfe88ef12c2e37f7fab26213">upd_ops</a>-&gt;<a class="code" href="../../d3/d2b/structm0__dtm__update__ops.html#af4ffce45ac4ab06d19cb8d45c02b30e5">updo_type</a>-&gt;<a class="code" href="../../db/d4d/structm0__dtm__update__type.html#a88a72586c39561c4c6c32c0ab6316b18">updtt_name</a>,</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;               update, update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#a78201fce3e40881f2098958d9d4d49aa">up_op</a>, history ? &amp;<a class="code" href="../../d9/dd0/structbuf.html">buf</a>[0] : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="../../d8/d98/group__trace.html#gabf13f904bc760a195c4e3b75fa471f58">M0_LOG</a>(<a class="code" href="../../d8/d98/group__trace.html#gga222dfe20eda8c002fbab0ebbb2a7848ba7d2a2b8fd8fa28703d1bf5d40087ac70">M0_FATAL</a>, <span class="stringliteral">&quot;\t\tstate: %c label: %lx &quot;</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;               <span class="stringliteral">&quot;rule: %c ver: %lu orig: %lu&quot;</span>,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;               state_name[update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#aad7421c8d83c2cd58a9f15ecdde2cb04">up_state</a>],</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;               (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#a389a2c45079e2b285bd32a0feb2f59b0">upd_label</a>,</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;               rule_name[update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#a9414e6549c5871aa032170188157f6e7">up_rule</a>],</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;               (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#a094b522367f3cc323099c64dfd3d4f16">up_ver</a>,</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;               (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)update-&gt;<a class="code" href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">upd_up</a>.<a class="code" href="../../df/d38/structm0__dtm__up.html#a36a7f8155d72bfb0895c2fadd8f6258e">up_orig_ver</a>);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;}</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="../../d2/d66/group__dtm.html#gac9dd72b58735f32e811522c8b439ee69">  317</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d2/d66/group__dtm.html#gac9dd72b58735f32e811522c8b439ee69">update_print</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a> *update)</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;{</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="../../d2/d66/group__dtm.html#gac45edf05a97334c78c570ef249b7c81b">update_print_internal</a>(update, <span class="keyword">true</span>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="preprocessor">#undef M0_TRACE_SUBSYSTEM</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> *  Local variables:</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment"> *  c-indentation-style: &quot;K&amp;R&quot;</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment"> *  c-basic-offset: 8</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment"> *  tab-width: 8</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment"> *  fill-column: 80</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"> *  scroll-step: 1</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment"> *  End:</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment"> * vim: tabstop=8 shiftwidth=8 noexpandtab textwidth=80 nowrap</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment"> */</span></div><div class="ttc" id="fop_2fop_8h_html"><div class="ttname"><a href="../../d9/d51/fop_2fop_8h.html">fop.h</a></div></div>
<div class="ttc" id="group__dtm_html_gabfb6de8a0b6730f1ff34aef4afcaa91a"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gabfb6de8a0b6730f1ff34aef4afcaa91a">history_print_header</a></div><div class="ttdeci">M0_INTERNAL void history_print_header(const struct m0_dtm_history *history, char *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d08/history_8c_source.html#l00425">history.c:425</a></div></div>
<div class="ttc" id="group__dtm_html_ga51b850681477e2290f76ed389660dfcd"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga51b850681477e2290f76ed389660dfcd">m0_dtm_update_build</a></div><div class="ttdeci">M0_INTERNAL int m0_dtm_update_build(struct m0_dtm_update *update, struct m0_dtm_oper *oper, const struct m0_dtm_update_descr *updd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00132">update.c:132</a></div></div>
<div class="ttc" id="structm0__dtm__update_html_ad36c703324e1c156ddf6f8db93f85ac5"><div class="ttname"><a href="../../d4/d50/structm0__dtm__update.html#ad36c703324e1c156ddf6f8db93f85ac5">m0_dtm_update::upd_up</a></div><div class="ttdeci">struct m0_dtm_up upd_up</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00072">update.h:72</a></div></div>
<div class="ttc" id="structm0__dtm__update__descr_html_a96cfcd0d9b89380889dba2cd34589b16"><div class="ttname"><a href="../../d3/d01/structm0__dtm__update__descr.html#a96cfcd0d9b89380889dba2cd34589b16">m0_dtm_update_descr::udd_id</a></div><div class="ttdeci">struct m0_dtm_history_id udd_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00119">update.h:119</a></div></div>
<div class="ttc" id="group__addb2_html_ga5b89fe130d0e27d86bd6b4d92141a87e"><div class="ttname"><a href="../../d0/d9e/group__addb2.html#ga5b89fe130d0e27d86bd6b4d92141a87e">nr</a></div><div class="ttdeci">static size_t nr</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d75/dump_8c_source.html#l01505">dump.c:1505</a></div></div>
<div class="ttc" id="assert_8h_html_a1c063bd08f7e1ab3a6e6008ef825d471"><div class="ttname"><a href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a></div><div class="ttdeci">#define M0_PRE(cond)</div></div>
<div class="ttc" id="group__dtm_html_gac45edf05a97334c78c570ef249b7c81b"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gac45edf05a97334c78c570ef249b7c81b">update_print_internal</a></div><div class="ttdeci">M0_INTERNAL void update_print_internal(const struct m0_dtm_update *update, bool history)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00297">update.c:297</a></div></div>
<div class="ttc" id="structm0__dtm__update_html_a1a6fa28142300b79be7cd2c085f91b27"><div class="ttname"><a href="../../d4/d50/structm0__dtm__update.html#a1a6fa28142300b79be7cd2c085f91b27">m0_dtm_update::upd_comm</a></div><div class="ttdeci">struct m0_dtm_update_comm upd_comm</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00075">update.h:75</a></div></div>
<div class="ttc" id="structm0__dtm__up_html_aad7421c8d83c2cd58a9f15ecdde2cb04"><div class="ttname"><a href="../../df/d38/structm0__dtm__up.html#aad7421c8d83c2cd58a9f15ecdde2cb04">m0_dtm_up::up_state</a></div><div class="ttdeci">enum m0_dtm_state up_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00094">nucleus.h:94</a></div></div>
<div class="ttc" id="structm0__dtm__update__descr_html_a1f331da39d349839b62aa039581c37f1"><div class="ttname"><a href="../../d3/d01/structm0__dtm__update__descr.html#a1f331da39d349839b62aa039581c37f1">m0_dtm_update_descr::udd_data</a></div><div class="ttdeci">struct m0_dtm_update_data udd_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00118">update.h:118</a></div></div>
<div class="ttc" id="structm0__dtm__update__comm_html_a399085da21f91aa9626ad8d4bfcc3c91"><div class="ttname"><a href="../../d0/de4/structm0__dtm__update__comm.html#a399085da21f91aa9626ad8d4bfcc3c91">m0_dtm_update_comm::uc_body</a></div><div class="ttdeci">struct m0_fop * uc_body</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00068">update.h:68</a></div></div>
<div class="ttc" id="lib_2ut_2list_8c_html_a510d1f3465504f3f259cf505d0e14d98"><div class="ttname"><a href="../../dd/d94/lib_2ut_2list_8c.html#a510d1f3465504f3f259cf505d0e14d98">list</a></div><div class="ttdeci">static struct m0_list list</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d94/lib_2ut_2list_8c_source.html#l00144">list.c:144</a></div></div>
<div class="ttc" id="trace_8h_html"><div class="ttname"><a href="../../d1/d1b/trace_8h.html">trace.h</a></div></div>
<div class="ttc" id="structm0__dtm__up_html_a36a7f8155d72bfb0895c2fadd8f6258e"><div class="ttname"><a href="../../df/d38/structm0__dtm__up.html#a36a7f8155d72bfb0895c2fadd8f6258e">m0_dtm_up::up_orig_ver</a></div><div class="ttdeci">m0_dtm_ver_t up_orig_ver</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00097">nucleus.h:97</a></div></div>
<div class="ttc" id="group__dtm_html_gad4134c67f2d252cafd40c3db47cb262d"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gad4134c67f2d252cafd40c3db47cb262d">m0_dtm_update_unpack</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_update_unpack(struct m0_dtm_update *update, const struct m0_dtm_update_descr *updd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00113">update.c:113</a></div></div>
<div class="ttc" id="structm0__dtm__op_html_afd3307b37b2c0074fcc966ab548ec37b"><div class="ttname"><a href="../../de/d2f/structm0__dtm__op.html#afd3307b37b2c0074fcc966ab548ec37b">m0_dtm_op::op_nu</a></div><div class="ttdeci">struct m0_dtm_nu * op_nu</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00106">nucleus.h:106</a></div></div>
<div class="ttc" id="lib_2user__space_2misc_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df8/lib_2user__space_2misc_8h_source.html#l00038">misc.h:38</a></div></div>
<div class="ttc" id="group__dtm_html_gga4ffb9e46a4e75aa5b17456d89e6b9a77ab674113acfaf51b3fee118c4a04171ca"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77ab674113acfaf51b3fee118c4a04171ca">M0_DOS_PREPARE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00055">nucleus.h:55</a></div></div>
<div class="ttc" id="lib_2misc_8h_html_a7f75ab6839d468f4d23480a9c65724c5"><div class="ttname"><a href="../../df/d2a/lib_2misc_8h.html#a7f75ab6839d468f4d23480a9c65724c5">ergo</a></div><div class="ttdeci">#define ergo(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/lib_2misc_8h_source.html#l00293">misc.h:293</a></div></div>
<div class="ttc" id="errno_8h_html"><div class="ttname"><a href="../../d8/dc2/errno_8h.html">errno.h</a></div></div>
<div class="ttc" id="structm0__dtm__history__id_html_ad824a1030a39b5a8991c15c490450c9c"><div class="ttname"><a href="../../d5/dcd/structm0__dtm__history__id.html#ad824a1030a39b5a8991c15c490450c9c">m0_dtm_history_id::hid_htype</a></div><div class="ttdeci">uint8_t hid_htype</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00114">update.h:114</a></div></div>
<div class="ttc" id="structm0__dtm__update__data_html"><div class="ttname"><a href="../../d7/d4d/structm0__dtm__update__data.html">m0_dtm_update_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00095">update.h:95</a></div></div>
<div class="ttc" id="structm0__dtm__update__type_html_a88a72586c39561c4c6c32c0ab6316b18"><div class="ttname"><a href="../../db/d4d/structm0__dtm__update__type.html#a88a72586c39561c4c6c32c0ab6316b18">m0_dtm_update_type::updtt_name</a></div><div class="ttdeci">const char * updtt_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00092">update.h:92</a></div></div>
<div class="ttc" id="structm0__dtm__hi_html_a695823eaa3fc37d17a4d877f4e698490"><div class="ttname"><a href="../../df/d76/structm0__dtm__hi.html#a695823eaa3fc37d17a4d877f4e698490">m0_dtm_hi::hi_flags</a></div><div class="ttdeci">uint64_t hi_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00065">nucleus.h:65</a></div></div>
<div class="ttc" id="structm0__dtm__history_html_ad989b83728b007c870120ec1c7e17d55"><div class="ttname"><a href="../../d0/d91/structm0__dtm__history.html#ad989b83728b007c870120ec1c7e17d55">m0_dtm_history::h_rem</a></div><div class="ttdeci">struct m0_dtm_remote * h_rem</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d04/history_8h_source.html#l00059">history.h:59</a></div></div>
<div class="ttc" id="group__trace_html_gabf13f904bc760a195c4e3b75fa471f58"><div class="ttname"><a href="../../d8/d98/group__trace.html#gabf13f904bc760a195c4e3b75fa471f58">M0_LOG</a></div><div class="ttdeci">#define M0_LOG(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1b/trace_8h_source.html#l00167">trace.h:167</a></div></div>
<div class="ttc" id="group__dtm_html_ga01b17a0f3ebc673f494da03549d23e31"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga01b17a0f3ebc673f494da03549d23e31">m0_dtm_update_invariant</a></div><div class="ttdeci">M0_INTERNAL bool m0_dtm_update_invariant(const struct m0_dtm_update *update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00065">update.c:65</a></div></div>
<div class="ttc" id="structm0__rpc__item_html"><div class="ttname"><a href="../../de/d21/structm0__rpc__item.html">m0_rpc_item</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1f/item_8h_source.html#l00130">item.h:130</a></div></div>
<div class="ttc" id="group__dtm_html_ga600aebd1014f58e0537d94a24a8f9d3a"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga600aebd1014f58e0537d94a24a8f9d3a">UPDATE_UP</a></div><div class="ttdeci">#define UPDATE_UP(update)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d48/dtm__internal_8h_source.html#l00097">dtm_internal.h:97</a></div></div>
<div class="ttc" id="group__dtm_html_gab6d2801051ec9d8369ad0af14fd3c1e5"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gab6d2801051ec9d8369ad0af14fd3c1e5">m0_dtm_up_invariant</a></div><div class="ttdeci">M0_INTERNAL bool m0_dtm_up_invariant(const struct m0_dtm_up *up)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d04/nucleus_8c_source.html#l00448">nucleus.c:448</a></div></div>
<div class="ttc" id="dtm__internal_8h_html"><div class="ttname"><a href="../../db/d48/dtm__internal_8h.html">dtm_internal.h</a></div></div>
<div class="ttc" id="structm0__dtm__update__data_html_a7127dbefb3672b1d4136af5ecb2701e7"><div class="ttname"><a href="../../d7/d4d/structm0__dtm__update__data.html#a7127dbefb3672b1d4136af5ecb2701e7">m0_dtm_update_data::da_label</a></div><div class="ttdeci">uint32_t da_label</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00098">update.h:98</a></div></div>
<div class="ttc" id="structm0__dtm__remote__ops_html_a02950237f008985d2705f414585d12d5"><div class="ttname"><a href="../../df/dbe/structm0__dtm__remote__ops.html#a02950237f008985d2705f414585d12d5">m0_dtm_remote_ops::reo_send</a></div><div class="ttdeci">void(* reo_send)(struct m0_dtm_remote *rem, struct m0_dtm_update *update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/remote_8h_source.html#l00070">remote.h:70</a></div></div>
<div class="ttc" id="magic_8h_html_a82bffe7189227eff068dab27a6040119a5701188528f344ed482ac23af179de6b"><div class="ttname"><a href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a5701188528f344ed482ac23af179de6b">M0_DTM_OP_MAGIX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/magic_8h_source.html#l00428">magic.h:428</a></div></div>
<div class="ttc" id="structm0__dtm__remote__ops_html_aeeb3a4793e42886224d151c5262be5dc"><div class="ttname"><a href="../../df/dbe/structm0__dtm__remote__ops.html#aeeb3a4793e42886224d151c5262be5dc">m0_dtm_remote_ops::reo_resend</a></div><div class="ttdeci">void(* reo_resend)(struct m0_dtm_remote *rem, struct m0_dtm_update *update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/remote_8h_source.html#l00072">remote.h:72</a></div></div>
<div class="ttc" id="ut_2di_8c_html_a3de5f992cc2347f66878d072e5934900"><div class="ttname"><a href="../../d4/d00/ut_2di_8c.html#a3de5f992cc2347f66878d072e5934900">data</a></div><div class="ttdeci">struct m0_bufvec data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d00/ut_2di_8c_source.html#l00040">di.c:40</a></div></div>
<div class="ttc" id="structm0__dtm__oper_html_ad742cc67df9c028830adf54dcbd234d6"><div class="ttname"><a href="../../d0/d2d/structm0__dtm__oper.html#ad742cc67df9c028830adf54dcbd234d6">m0_dtm_oper::oprt_op</a></div><div class="ttdeci">struct m0_dtm_op oprt_op</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbd/operation_8h_source.html#l00048">operation.h:48</a></div></div>
<div class="ttc" id="group__dtm_html_gga4ffb9e46a4e75aa5b17456d89e6b9a77ac1f2b7bce4096637a6e66459eeb3a197"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77ac1f2b7bce4096637a6e66459eeb3a197">M0_DOS_FUTURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00054">nucleus.h:54</a></div></div>
<div class="ttc" id="structm0__rpc__item__ops_html"><div class="ttname"><a href="../../dd/d2e/structm0__rpc__item__ops.html">m0_rpc_item_ops</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1f/item_8h_source.html#l00256">item.h:256</a></div></div>
<div class="ttc" id="group__dtm_html_ga498ff96d8fc68e4103ce3693ade0f953"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga498ff96d8fc68e4103ce3693ade0f953">m0_dtm_update_is_user</a></div><div class="ttdeci">M0_INTERNAL bool m0_dtm_update_is_user(const struct m0_dtm_update *update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00087">update.c:87</a></div></div>
<div class="ttc" id="group__dtm_html_gga531b9ee4430cc252eaff26996e9b6cfea3fd06495a95078d0feb7007bcc3fd360"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea3fd06495a95078d0feb7007bcc3fd360">M0_DUX_NEW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00055">update.h:55</a></div></div>
<div class="ttc" id="group__dtm_html_gafc6f438476185033152b59e42a9333e5"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gafc6f438476185033152b59e42a9333e5">nu_dtm</a></div><div class="ttdeci">M0_INTERNAL struct m0_dtm * nu_dtm(struct m0_dtm_nu *nu)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d98/dtm_8c_source.html#l00154">dtm.c:154</a></div></div>
<div class="ttc" id="structm0__dtm__history_html_a4191a28c0feaf2d4e49d39d1f9d28567"><div class="ttname"><a href="../../d0/d91/structm0__dtm__history.html#a4191a28c0feaf2d4e49d39d1f9d28567">m0_dtm_history::h_hi</a></div><div class="ttdeci">struct m0_dtm_hi h_hi</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d04/history_8h_source.html#l00056">history.h:56</a></div></div>
<div class="ttc" id="structm0__dtm__history_html"><div class="ttname"><a href="../../d0/d91/structm0__dtm__history.html">m0_dtm_history</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d04/history_8h_source.html#l00055">history.h:55</a></div></div>
<div class="ttc" id="lib_2user__space_2misc_8h_html_af8c317a42292b61c93aae91e59118a46"><div class="ttname"><a href="../../db/df8/lib_2user__space_2misc_8h.html#af8c317a42292b61c93aae91e59118a46">container_of</a></div><div class="ttdeci">#define container_of(ptr, type, member)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df8/lib_2user__space_2misc_8h_source.html#l00033">misc.h:33</a></div></div>
<div class="ttc" id="magic_8h_html"><div class="ttname"><a href="../../dd/d08/magic_8h.html">magic.h</a></div></div>
<div class="ttc" id="group__dtm_html_ga33621c2c17f9d4d01072a05adc3d756f"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga33621c2c17f9d4d01072a05adc3d756f">up_update</a></div><div class="ttdeci">M0_INTERNAL struct m0_dtm_update * up_update(struct m0_dtm_up *up)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00228">update.c:228</a></div></div>
<div class="ttc" id="ut_2item_8c_html_ae944bcb72fdcfcfb06a9a27759eb347a"><div class="ttname"><a href="../../d9/dbf/ut_2item_8c.html#ae944bcb72fdcfcfb06a9a27759eb347a">item</a></div><div class="ttdeci">static struct m0_rpc_item * item</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/ut_2item_8c_source.html#l00056">item.c:56</a></div></div>
<div class="ttc" id="structm0__dtm__up_html_a094b522367f3cc323099c64dfd3d4f16"><div class="ttname"><a href="../../df/d38/structm0__dtm__up.html#a094b522367f3cc323099c64dfd3d4f16">m0_dtm_up::up_ver</a></div><div class="ttdeci">m0_dtm_ver_t up_ver</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00096">nucleus.h:96</a></div></div>
<div class="ttc" id="structm0__dtm__update_html_afcc78636cfe88ef12c2e37f7fab26213"><div class="ttname"><a href="../../d4/d50/structm0__dtm__update.html#afcc78636cfe88ef12c2e37f7fab26213">m0_dtm_update::upd_ops</a></div><div class="ttdeci">const struct m0_dtm_update_ops * upd_ops</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00074">update.h:74</a></div></div>
<div class="ttc" id="structm0__dtm__update_html_a389a2c45079e2b285bd32a0feb2f59b0"><div class="ttname"><a href="../../d4/d50/structm0__dtm__update.html#a389a2c45079e2b285bd32a0feb2f59b0">m0_dtm_update::upd_label</a></div><div class="ttdeci">uint32_t upd_label</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00073">update.h:73</a></div></div>
<div class="ttc" id="structbuf_html"><div class="ttname"><a href="../../d9/dd0/structbuf.html">buf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d1a/sock_8c_source.html#l00887">sock.c:887</a></div></div>
<div class="ttc" id="structm0__dtm__up_html_a78201fce3e40881f2098958d9d4d49aa"><div class="ttname"><a href="../../df/d38/structm0__dtm__up.html#a78201fce3e40881f2098958d9d4d49aa">m0_dtm_up::up_op</a></div><div class="ttdeci">struct m0_dtm_op * up_op</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00100">nucleus.h:100</a></div></div>
<div class="ttc" id="structm0__dtm__remote_html"><div class="ttname"><a href="../../dc/d0c/structm0__dtm__remote.html">m0_dtm_remote</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/remote_8h_source.html#l00054">remote.h:54</a></div></div>
<div class="ttc" id="m0t1fs_2linux__kernel_2dir_8c_html_ae3831fffc49e626dd50da5fa40537d3e"><div class="ttname"><a href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ae3831fffc49e626dd50da5fa40537d3e">body</a></div><div class="ttdeci">struct m0_fop_cob * body</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c_source.html#l01436">dir.c:1436</a></div></div>
<div class="ttc" id="group__dtm_html_gga4ffb9e46a4e75aa5b17456d89e6b9a77a3b5275b780617818898ccf8620180cff"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77a3b5275b780617818898ccf8620180cff">M0_DOS_INPROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00056">nucleus.h:56</a></div></div>
<div class="ttc" id="group__tlist_html_gaef8bbd93c23f12be0bfbb16ced9ad206"><div class="ttname"><a href="../../d7/d08/group__tlist.html#gaef8bbd93c23f12be0bfbb16ced9ad206">m0_tl_endfor</a></div><div class="ttdeci">#define m0_tl_endfor</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d30/tlist_8h_source.html#l00700">tlist.h:700</a></div></div>
<div class="ttc" id="structm0__dtm__history__ops_html_ac0c6393e8346ef33b651c9b25dbed923"><div class="ttname"><a href="../../d7/d17/structm0__dtm__history__ops.html#ac0c6393e8346ef33b651c9b25dbed923">m0_dtm_history_ops::hio_update</a></div><div class="ttdeci">int(* hio_update)(struct m0_dtm_history *history, uint8_t id, struct m0_dtm_update *update)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d04/history_8h_source.html#l00083">history.h:83</a></div></div>
<div class="ttc" id="group__dtm_html_gada87223a12c4048b455a65fcdadf0cb9"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gada87223a12c4048b455a65fcdadf0cb9">history_lock</a></div><div class="ttdeci">M0_INTERNAL void history_lock(const struct m0_dtm_history *history)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d08/history_8c_source.html#l00288">history.c:288</a></div></div>
<div class="ttc" id="group__dtm_html_gaa55cc276def1a071844e9f6f86ecefc1"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gaa55cc276def1a071844e9f6f86ecefc1">m0_dtm_update_link</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_update_link(struct m0_tl *list, struct m0_dtm_update *update, uint32_t nr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00221">update.c:221</a></div></div>
<div class="ttc" id="group__dtm_html_gga2012ab1ab1d52a562c64902160ec5c8daf9ad866f405759b3c13c62b4d2d54ac8"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga2012ab1ab1d52a562c64902160ec5c8daf9ad866f405759b3c13c62b4d2d54ac8">M0_DUCF_REPLIED_CALLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00061">update.h:61</a></div></div>
<div class="ttc" id="group__dtm_html_gac9dd72b58735f32e811522c8b439ee69"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gac9dd72b58735f32e811522c8b439ee69">update_print</a></div><div class="ttdeci">M0_INTERNAL void update_print(const struct m0_dtm_update *update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00317">update.c:317</a></div></div>
<div class="ttc" id="group__dtm_html_ga42ab44938c31e4ef30a3a6c7d06d2253"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga42ab44938c31e4ef30a3a6c7d06d2253">update_is_earlier</a></div><div class="ttdeci">M0_INTERNAL bool update_is_earlier(struct m0_dtm_update *update0, struct m0_dtm_update *update1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00234">update.c:234</a></div></div>
<div class="ttc" id="group__cas_html_ga46a9e7a418c24303a1e6f2df2fa3cf84"><div class="ttname"><a href="../../d4/d44/group__cas.html#ga46a9e7a418c24303a1e6f2df2fa3cf84">upd</a></div><div class="ttdeci">static void upd(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d53/cas_2ut_2client__ut_8c_source.html#l02974">client_ut.c:2974</a></div></div>
<div class="ttc" id="group__dtm_html_ga6d990acb500a7dee2db28836a1330f23"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga6d990acb500a7dee2db28836a1330f23">M0_TL_DEFINE</a></div><div class="ttdeci">M0_TL_DEFINE(history, M0_INTERNAL, struct m0_dtm_update)</div></div>
<div class="ttc" id="group__trace_html_gadcff472fb398402105feb7fa41add0a5"><div class="ttname"><a href="../../d8/d98/group__trace.html#gadcff472fb398402105feb7fa41add0a5">M0_ERR_INFO</a></div><div class="ttdeci">#define M0_ERR_INFO(rc, fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1b/trace_8h_source.html#l00215">trace.h:215</a></div></div>
<div class="ttc" id="group__dtm_html_gadb84bb13e1c17b8c62ee8a674f466b6d"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gadb84bb13e1c17b8c62ee8a674f466b6d">UPDATE_HISTORY</a></div><div class="ttdeci">#define UPDATE_HISTORY(update)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d48/dtm__internal_8h_source.html#l00104">dtm_internal.h:104</a></div></div>
<div class="ttc" id="group__dtm_html_gga531b9ee4430cc252eaff26996e9b6cfea9c830c4e5bdc8e4a5086077436764821"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea9c830c4e5bdc8e4a5086077436764821">M0_DUX_INFLIGHT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00056">update.h:56</a></div></div>
<div class="ttc" id="assert_8h_html"><div class="ttname"><a href="../../dc/da7/assert_8h.html">assert.h</a></div></div>
<div class="ttc" id="structm0__dtm__update__comm_html_ab226d8d1737feae23bb08f04bba934c6"><div class="ttname"><a href="../../d0/de4/structm0__dtm__update__comm.html#ab226d8d1737feae23bb08f04bba934c6">m0_dtm_update_comm::uc_instance</a></div><div class="ttdeci">uint64_t uc_instance</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00067">update.h:67</a></div></div>
<div class="ttc" id="group__dtm_html_ga848a67fc44760f24087552f3f3ecc573"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga848a67fc44760f24087552f3f3ecc573">M0_TL_DESCR_DEFINE</a></div><div class="ttdeci">M0_TL_DESCR_DEFINE(history, &quot;dtm history updates&quot;, M0_INTERNAL, struct m0_dtm_update, upd_up.up_hi_linkage, upd_up.up_magix, M0_DTM_UP_MAGIX, M0_DTM_HI_MAGIX)</div></div>
<div class="ttc" id="group__dtm_html_gaa2f0b1a41fca2db76256ff2dcc4acd23"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gaa2f0b1a41fca2db76256ff2dcc4acd23">m0_dtm_history_unpack</a></div><div class="ttdeci">M0_INTERNAL int m0_dtm_history_unpack(struct m0_dtm *dtm, const struct m0_dtm_history_id *id, struct m0_dtm_history **out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d08/history_8c_source.html#l00248">history.c:248</a></div></div>
<div class="ttc" id="group__dtm_html_gabb248d073e3b94b4f495beda7f5d3d63"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gabb248d073e3b94b4f495beda7f5d3d63">m0_dtm_descr_matches_update</a></div><div class="ttdeci">M0_INTERNAL bool m0_dtm_descr_matches_update(const struct m0_dtm_update *update, const struct m0_dtm_update_descr *updd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00166">update.c:166</a></div></div>
<div class="ttc" id="nucleus_8h_html"><div class="ttname"><a href="../../d0/d06/nucleus_8h.html">nucleus.h</a></div></div>
<div class="ttc" id="structm0__tl_html"><div class="ttname"><a href="../../d4/d8a/structm0__tl.html">m0_tl</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d30/tlist_8h_source.html#l00251">tlist.h:251</a></div></div>
<div class="ttc" id="group__dtm_html_ga3fdc5c01d17b363a2cef993d28567179"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga3fdc5c01d17b363a2cef993d28567179">m0_dtm_comm_set</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_comm_set(struct m0_dtm_update *update, struct m0_fop *fop)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00205">update.c:205</a></div></div>
<div class="ttc" id="group__dtm_html_gab2a7ff61a98b4b36bc5c042773c62cf7"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gab2a7ff61a98b4b36bc5c042773c62cf7">dtm_update_replied</a></div><div class="ttdeci">static void dtm_update_replied(struct m0_rpc_item *item)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00262">update.c:262</a></div></div>
<div class="ttc" id="group__dtm_html_ga7c446b2497ca71f833f9f1c8ab65a701"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga7c446b2497ca71f833f9f1c8ab65a701">update_reint</a></div><div class="ttdeci">M0_INTERNAL void update_reint(struct m0_dtm_update *update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00240">update.c:240</a></div></div>
<div class="ttc" id="structm0__fop_html_aa051939365c18e36fe127cf81546c018"><div class="ttname"><a href="../../d5/d01/structm0__fop.html#aa051939365c18e36fe127cf81546c018">m0_fop::f_opaque</a></div><div class="ttdeci">void * f_opaque</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d51/fop_2fop_8h_source.html#l00085">fop.h:85</a></div></div>
<div class="ttc" id="assert_8h_html_aea86d55595126b703b9e619887f09a22"><div class="ttname"><a href="../../dc/da7/assert_8h.html#aea86d55595126b703b9e619887f09a22">M0_POST</a></div><div class="ttdeci">#define M0_POST(cond)</div></div>
<div class="ttc" id="history_8h_html"><div class="ttname"><a href="../../df/d04/history_8h.html">history.h</a></div></div>
<div class="ttc" id="structm0__dtm__op_html_a6bdf502e5d2af2e386e00ffc3f701ebc"><div class="ttname"><a href="../../de/d2f/structm0__dtm__op.html#a6bdf502e5d2af2e386e00ffc3f701ebc">m0_dtm_op::op_ups</a></div><div class="ttdeci">struct m0_tl op_ups</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00107">nucleus.h:107</a></div></div>
<div class="ttc" id="structm0__dtm__update__ops_html_af4ffce45ac4ab06d19cb8d45c02b30e5"><div class="ttname"><a href="../../d3/d2b/structm0__dtm__update__ops.html#af4ffce45ac4ab06d19cb8d45c02b30e5">m0_dtm_update_ops::updo_type</a></div><div class="ttdeci">const struct m0_dtm_update_type * updo_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00087">update.h:87</a></div></div>
<div class="ttc" id="group__dtm_html_gaf09c3e4beb1e35f21bbce386678fbb5c"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gaf09c3e4beb1e35f21bbce386678fbb5c">dtm_update_item_ops</a></div><div class="ttdeci">static const struct m0_rpc_item_ops dtm_update_item_ops</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00203">update.c:203</a></div></div>
<div class="ttc" id="structm0__dtm__update__comm_html_a082b4c68550053ea5fa444aeea9c6edd"><div class="ttname"><a href="../../d0/de4/structm0__dtm__update__comm.html#a082b4c68550053ea5fa444aeea9c6edd">m0_dtm_update_comm::uc_flags</a></div><div class="ttdeci">uint64_t uc_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00066">update.h:66</a></div></div>
<div class="ttc" id="structm0__dtm__up_html_a9414e6549c5871aa032170188157f6e7"><div class="ttname"><a href="../../df/d38/structm0__dtm__up.html#a9414e6549c5871aa032170188157f6e7">m0_dtm_up::up_rule</a></div><div class="ttdeci">enum m0_dtm_up_rule up_rule</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00095">nucleus.h:95</a></div></div>
<div class="ttc" id="group__dtm_html_ga60630952cd2adcfd7d96ac9bb9b473fd"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga60630952cd2adcfd7d96ac9bb9b473fd">up_is_earlier</a></div><div class="ttdeci">M0_INTERNAL bool up_is_earlier(struct m0_dtm_up *up0, struct m0_dtm_up *up1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d04/nucleus_8c_source.html#l00410">nucleus.c:410</a></div></div>
<div class="ttc" id="magic_8h_html_a82bffe7189227eff068dab27a6040119a532ced42019c12d59f2ecdee7c5c6ae9"><div class="ttname"><a href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a532ced42019c12d59f2ecdee7c5c6ae9">M0_DTM_HI_MAGIX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/magic_8h_source.html#l00426">magic.h:426</a></div></div>
<div class="ttc" id="structm0__dtm__update__data_html_a6b012f0d978c92b2eda31c5319d0d81a"><div class="ttname"><a href="../../d7/d4d/structm0__dtm__update__data.html#a6b012f0d978c92b2eda31c5319d0d81a">m0_dtm_update_data::da_ver</a></div><div class="ttdeci">uint64_t da_ver</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00096">update.h:96</a></div></div>
<div class="ttc" id="group__dtm_html_gga4ffb9e46a4e75aa5b17456d89e6b9a77a76d545ccc77ce257dcc7b8d02f63c0db"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga4ffb9e46a4e75aa5b17456d89e6b9a77a76d545ccc77ce257dcc7b8d02f63c0db">M0_DOS_LIMBO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00053">nucleus.h:53</a></div></div>
<div class="ttc" id="group__dtm_html_ga19192261c60a882a3deca0013deaa714"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga19192261c60a882a3deca0013deaa714">UPDATE_REM</a></div><div class="ttdeci">#define UPDATE_REM(update)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d48/dtm__internal_8h_source.html#l00105">dtm_internal.h:105</a></div></div>
<div class="ttc" id="magic_8h_html_a82bffe7189227eff068dab27a6040119aa530331cec85970b0383abb171cc7f32"><div class="ttname"><a href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119aa530331cec85970b0383abb171cc7f32">M0_DTM_UP_MAGIX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/magic_8h_source.html#l00424">magic.h:424</a></div></div>
<div class="ttc" id="group__dtm_html_gga531b9ee4430cc252eaff26996e9b6cfea8442a8a3daf5755bb25d595ba99c3c71"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga531b9ee4430cc252eaff26996e9b6cfea8442a8a3daf5755bb25d595ba99c3c71">M0_DUX_REPLIED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00057">update.h:57</a></div></div>
<div class="ttc" id="structm0__dtm__update__comm_html"><div class="ttname"><a href="../../d0/de4/structm0__dtm__update__comm.html">m0_dtm_update_comm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00064">update.h:64</a></div></div>
<div class="ttc" id="group__dtm_html_ga0fcd164bf889efd21d1fe708b6fd118b"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga0fcd164bf889efd21d1fe708b6fd118b">m0_dtm_history_pack</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_history_pack(const struct m0_dtm_history *history, struct m0_dtm_history_id *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d08/history_8c_source.html#l00239">history.c:239</a></div></div>
<div class="ttc" id="structm0__rpc__item__ops_html_a00212f6709ea07d7c4d5ec09f8c98469"><div class="ttname"><a href="../../dd/d2e/structm0__rpc__item__ops.html#a00212f6709ea07d7c4d5ec09f8c98469">m0_rpc_item_ops::rio_replied</a></div><div class="ttdeci">void(* rio_replied)(struct m0_rpc_item *item)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1f/item_8h_source.html#l00300">item.h:300</a></div></div>
<div class="ttc" id="group__dtm_html_gacd4994b2a9d4d8dd1b568d9a831f7885"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gacd4994b2a9d4d8dd1b568d9a831f7885">history_unlock</a></div><div class="ttdeci">M0_INTERNAL void history_unlock(const struct m0_dtm_history *history)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d08/history_8c_source.html#l00293">history.c:293</a></div></div>
<div class="ttc" id="structm0__dtm__up_html"><div class="ttname"><a href="../../df/d38/structm0__dtm__up.html">m0_dtm_up</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00092">nucleus.h:92</a></div></div>
<div class="ttc" id="structm0__dtm__update__ops_html_a50abdb60a1ac701dd306967420bc84b1"><div class="ttname"><a href="../../d3/d2b/structm0__dtm__update__ops.html#a50abdb60a1ac701dd306967420bc84b1">m0_dtm_update_ops::updto_replied</a></div><div class="ttdeci">void(* updto_replied)(struct m0_dtm_update *updt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00086">update.h:86</a></div></div>
<div class="ttc" id="structm0__dtm__update__comm_html_a9c84c5cae862973ed217902491644f88"><div class="ttname"><a href="../../d0/de4/structm0__dtm__update__comm.html#a9c84c5cae862973ed217902491644f88">m0_dtm_update_comm::uc_state</a></div><div class="ttdeci">enum m0_dtm_update_comm_state uc_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00065">update.h:65</a></div></div>
<div class="ttc" id="operation_8h_html"><div class="ttname"><a href="../../d8/dbd/operation_8h.html">operation.h</a></div></div>
<div class="ttc" id="group__dtm_html_ga49c547cd96a1df659006ae90d5c3596d"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga49c547cd96a1df659006ae90d5c3596d">m0_dtm_update_init</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_update_init(struct m0_dtm_update *update, struct m0_dtm_history *history, struct m0_dtm_oper *oper, const struct m0_dtm_update_data *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00047">update.c:47</a></div></div>
<div class="ttc" id="group__dtm_html_ga4ee3d1dd79d55130647f1b8356a8c582"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga4ee3d1dd79d55130647f1b8356a8c582">m0_dtm_update_reint</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_update_reint(struct m0_dtm_update *update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00192">update.c:192</a></div></div>
<div class="ttc" id="lib_2misc_8h_html"><div class="ttname"><a href="../../df/d2a/lib_2misc_8h.html">misc.h</a></div></div>
<div class="ttc" id="structm0__rpc__item_html_a6aa5edcd589a8e8b25d32c0c54fe6536"><div class="ttname"><a href="../../de/d21/structm0__rpc__item.html#a6aa5edcd589a8e8b25d32c0c54fe6536">m0_rpc_item::ri_ops</a></div><div class="ttdeci">const struct m0_rpc_item_ops * ri_ops</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d1f/item_8h_source.html#l00149">item.h:149</a></div></div>
<div class="ttc" id="group__dtm_html_ga60d2644343876de839f97cec6d4dc647"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga60d2644343876de839f97cec6d4dc647">m0_dtm_update_matches_descr</a></div><div class="ttdeci">M0_INTERNAL bool m0_dtm_update_matches_descr(const struct m0_dtm_update *update, const struct m0_dtm_update_descr *updd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00154">update.c:154</a></div></div>
<div class="ttc" id="structm0__dtm__update__data_html_a17147b68fba5df1b9ad4eea6e317f871"><div class="ttname"><a href="../../d7/d4d/structm0__dtm__update__data.html#a17147b68fba5df1b9ad4eea6e317f871">m0_dtm_update_data::da_rule</a></div><div class="ttdeci">uint8_t da_rule</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00099">update.h:99</a></div></div>
<div class="ttc" id="remote_8h_html"><div class="ttname"><a href="../../d6/d06/remote_8h.html">remote.h</a></div></div>
<div class="ttc" id="group__dtm_html_gabcbc1f0f85575350fa0085f43f9f446b"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gabcbc1f0f85575350fa0085f43f9f446b">m0_dtm_update_list_fini</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_update_list_fini(struct m0_tl *list)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00182">update.c:182</a></div></div>
<div class="ttc" id="group__assert_html_gaa830530062e2cf2e3f619985e59881a6"><div class="ttname"><a href="../../db/dca/group__assert.html#gaa830530062e2cf2e3f619985e59881a6">_0C</a></div><div class="ttdeci">#define _0C(exp)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da7/assert_8h_source.html#l00311">assert.h:311</a></div></div>
<div class="ttc" id="structm0__dtm__remote_html_a3fc3a1f448979b7cf94643e0a1e45281"><div class="ttname"><a href="../../dc/d0c/structm0__dtm__remote.html#a3fc3a1f448979b7cf94643e0a1e45281">m0_dtm_remote::re_instance</a></div><div class="ttdeci">uint64_t re_instance</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/remote_8h_source.html#l00056">remote.h:56</a></div></div>
<div class="ttc" id="group__dtm_html_ga32f292daeadb7db81f1a8b7dc25a6034"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga32f292daeadb7db81f1a8b7dc25a6034">m0_dtm_update_pack</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_update_pack(const struct m0_dtm_update *update, struct m0_dtm_update_descr *updd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00093">update.c:93</a></div></div>
<div class="ttc" id="structm0__dtm__remote_html_a94ab1d9520c85be0fde9c10bdb7b1e99"><div class="ttname"><a href="../../dc/d0c/structm0__dtm__remote.html#a94ab1d9520c85be0fde9c10bdb7b1e99">m0_dtm_remote::re_ops</a></div><div class="ttdeci">const struct m0_dtm_remote_ops * re_ops</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d06/remote_8h_source.html#l00057">remote.h:57</a></div></div>
<div class="ttc" id="ut_2item_8c_html_aa6954df11aaf0bcf90cf350315b8c544"><div class="ttname"><a href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a></div><div class="ttdeci">static struct m0_fop * fop</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dbf/ut_2item_8c_source.html#l00057">item.c:57</a></div></div>
<div class="ttc" id="group__fop_html_ga8544e1edf0cb8a03920ecf624c72c971"><div class="ttname"><a href="../../d6/d39/group__fop.html#ga8544e1edf0cb8a03920ecf624c72c971">m0_rpc_item_to_fop</a></div><div class="ttdeci">struct m0_fop * m0_rpc_item_to_fop(const struct m0_rpc_item *item)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d64/fop_2fop_8c_source.html#l00345">fop.c:345</a></div></div>
<div class="ttc" id="structm0__dtm_html"><div class="ttname"><a href="../../db/d9f/structm0__dtm.html">m0_dtm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/dtm_8h_source.html#l00529">dtm.h:529</a></div></div>
<div class="ttc" id="group__dtm_html_ga14378815cd4ba1ee375b6e8cf012314b"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga14378815cd4ba1ee375b6e8cf012314b">m0_dtm_up_init</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_up_init(struct m0_dtm_up *up, struct m0_dtm_hi *hi, struct m0_dtm_op *op, enum m0_dtm_up_rule rule, m0_dtm_ver_t ver, m0_dtm_ver_t orig_ver)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d04/nucleus_8c_source.html#l00286">nucleus.c:286</a></div></div>
<div class="ttc" id="group__dtm_html_ga0d615c1f65e78d3ce5db7b570aeed029"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga0d615c1f65e78d3ce5db7b570aeed029">m0_dtm_update_list_init</a></div><div class="ttdeci">M0_INTERNAL void m0_dtm_update_list_init(struct m0_tl *list)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d69/update_8c_source.html#l00177">update.c:177</a></div></div>
<div class="ttc" id="structm0__dtm__update__type_html_a5117adb79981d73588b880b72a219840"><div class="ttname"><a href="../../db/d4d/structm0__dtm__update__type.html#a5117adb79981d73588b880b72a219840">m0_dtm_update_type::updtt_id</a></div><div class="ttdeci">uint8_t updtt_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00091">update.h:91</a></div></div>
<div class="ttc" id="group__dtm_html_ga531b9ee4430cc252eaff26996e9b6cfe"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga531b9ee4430cc252eaff26996e9b6cfe">m0_dtm_update_comm_state</a></div><div class="ttdeci">m0_dtm_update_comm_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00054">update.h:54</a></div></div>
<div class="ttc" id="structm0__dtm__update__descr_html"><div class="ttname"><a href="../../d3/d01/structm0__dtm__update__descr.html">m0_dtm_update_descr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00117">update.h:117</a></div></div>
<div class="ttc" id="group__trace_html_gga222dfe20eda8c002fbab0ebbb2a7848ba7d2a2b8fd8fa28703d1bf5d40087ac70"><div class="ttname"><a href="../../d8/d98/group__trace.html#gga222dfe20eda8c002fbab0ebbb2a7848ba7d2a2b8fd8fa28703d1bf5d40087ac70">M0_FATAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d1b/trace_8h_source.html#l00468">trace.h:468</a></div></div>
<div class="ttc" id="group__dtm_html_gga8feb5a39a55448c86e0dfc20f53a6c1da5c83788e408458777f6439368ee503af"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga8feb5a39a55448c86e0dfc20f53a6c1da5c83788e408458777f6439368ee503af">M0_DTM_USER_UPDATE_BASE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00080">update.h:80</a></div></div>
<div class="ttc" id="structm0__dtm__update__descr_html_a2e2a8858ea5d9014b7496a69b5a7219c"><div class="ttname"><a href="../../d3/d01/structm0__dtm__update__descr.html#a2e2a8858ea5d9014b7496a69b5a7219c">m0_dtm_update_descr::udd_utype</a></div><div class="ttdeci">uint8_t udd_utype</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00120">update.h:120</a></div></div>
<div class="ttc" id="group__be_html_ga3e228246ddb549616a176cca6d44301d"><div class="ttname"><a href="../../d9/dcf/group__be.html#ga3e228246ddb549616a176cca6d44301d">scan</a></div><div class="ttdeci">static int scan(struct scanner *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d8d/beck_8c_source.html#l00963">beck.c:963</a></div></div>
<div class="ttc" id="structm0__dtm__update__data_html_a8da9c9feba994bc3876a9aa59f608201"><div class="ttname"><a href="../../d7/d4d/structm0__dtm__update__data.html#a8da9c9feba994bc3876a9aa59f608201">m0_dtm_update_data::da_orig_ver</a></div><div class="ttdeci">uint64_t da_orig_ver</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00097">update.h:97</a></div></div>
<div class="ttc" id="group__dtm_html_ga2cc573b4889d369e6aa21ced8a56d355"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga2cc573b4889d369e6aa21ced8a56d355">m0_dtm_oper_invariant</a></div><div class="ttdeci">M0_INTERNAL bool m0_dtm_oper_invariant(const struct m0_dtm_oper *oper)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/operation_8c_source.html#l00069">operation.c:69</a></div></div>
<div class="ttc" id="group__tlist_html_ga6c73104b68112bed660165c64164fadf"><div class="ttname"><a href="../../d7/d08/group__tlist.html#ga6c73104b68112bed660165c64164fadf">m0_tl_for</a></div><div class="ttdeci">#define m0_tl_for(name, head, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d30/tlist_8h_source.html#l00695">tlist.h:695</a></div></div>
<div class="ttc" id="structm0__dtm__update_html"><div class="ttname"><a href="../../d4/d50/structm0__dtm__update.html">m0_dtm_update</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d72/update_8h_source.html#l00071">update.h:71</a></div></div>
<div class="ttc" id="structm0__fop_html_a0b7e78b55b052002c4f0a5f4ca411b3d"><div class="ttname"><a href="../../d5/d01/structm0__fop.html#a0b7e78b55b052002c4f0a5f4ca411b3d">m0_fop::f_item</a></div><div class="ttdeci">struct m0_rpc_item f_item</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d51/fop_2fop_8h_source.html#l00084">fop.h:84</a></div></div>
<div class="ttc" id="group__dtm_html_ga4ffb9e46a4e75aa5b17456d89e6b9a77"><div class="ttname"><a href="../../d2/d66/group__dtm.html#ga4ffb9e46a4e75aa5b17456d89e6b9a77">m0_dtm_state</a></div><div class="ttdeci">m0_dtm_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d06/nucleus_8h_source.html#l00052">nucleus.h:52</a></div></div>
<div class="ttc" id="group__dtm_html_gga103a6550e97d6e3bb9a45768373e27dcae93cf08991966fe4ea38c20da5e94229"><div class="ttname"><a href="../../d2/d66/group__dtm.html#gga103a6550e97d6e3bb9a45768373e27dcae93cf08991966fe4ea38c20da5e94229">M0_DHF_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d04/history_8h_source.html#l00074">history.h:74</a></div></div>
<div class="ttc" id="structm0__dtm__oper_html"><div class="ttname"><a href="../../d0/d2d/structm0__dtm__oper.html">m0_dtm_oper</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dbd/operation_8h_source.html#l00047">operation.h:47</a></div></div>
<div class="ttc" id="group__tlist_html_gaff792c7170b8ef517d40f1a37eb5340d"><div class="ttname"><a href="../../d7/d08/group__tlist.html#gaff792c7170b8ef517d40f1a37eb5340d">m0_tl_exists</a></div><div class="ttdeci">#define m0_tl_exists(name, var, head,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d30/tlist_8h_source.html#l00774">tlist.h:774</a></div></div>
<div class="ttc" id="structm0__fop_html"><div class="ttname"><a href="../../d5/d01/structm0__fop.html">m0_fop</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d51/fop_2fop_8h_source.html#l00080">fop.h:80</a></div></div>
<div class="ttc" id="group__tlist_html_gaff6f93b3ca67a19e8460cc469f5eabda"><div class="ttname"><a href="../../d7/d08/group__tlist.html#gaff6f93b3ca67a19e8460cc469f5eabda">m0_tl_forall</a></div><div class="ttdeci">#define m0_tl_forall(name, var, head,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d30/tlist_8h_source.html#l00735">tlist.h:735</a></div></div>
<div class="ttc" id="structm0__dtm__history_html_a7c0c493b622e3bed255cee1e3a8c646c"><div class="ttname"><a href="../../d0/d91/structm0__dtm__history.html#a7c0c493b622e3bed255cee1e3a8c646c">m0_dtm_history::h_ops</a></div><div class="ttdeci">const struct m0_dtm_history_ops * h_ops</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d04/history_8h_source.html#l00065">history.h:65</a></div></div>
<div class="ttc" id="update_8h_html"><div class="ttname"><a href="../../d8/d72/update_8h.html">update.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_ca05d7358596c7a44d960dcb113181ee.html">dtm</a></li><li class="navelem"><a class="el" href="../../d1/d69/update_8c.html">update.c</a></li>
    <li class="footer">Generated on Fri May 20 2022 10:34:56 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
