<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: m0_sm_state_descr Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('da/d29/structm0__sm__state__descr.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">m0_sm_state_descr Struct Reference<div class="ingroups"><a class="el" href="../../d1/dc1/group__sm.html">State machine</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for m0_sm_state_descr:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/dbc/structm0__sm__state__descr__coll__graph.png" border="0" usemap="#m0__sm__state__descr_coll__map" alt="Collaboration graph"/></div>
<map name="m0__sm__state__descr_coll__map" id="m0__sm__state__descr_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a284eb2338c2b471e56b13fc5e601a71b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d29/structm0__sm__state__descr.html#a284eb2338c2b471e56b13fc5e601a71b">sd_flags</a></td></tr>
<tr class="separator:a284eb2338c2b471e56b13fc5e601a71b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa4b4ef5c4b7c75b07ddabcb9877008b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d29/structm0__sm__state__descr.html#aaa4b4ef5c4b7c75b07ddabcb9877008b">sd_name</a></td></tr>
<tr class="separator:aaa4b4ef5c4b7c75b07ddabcb9877008b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfcbdd9dc5092bf7138045716db065c1"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d29/structm0__sm__state__descr.html#acfcbdd9dc5092bf7138045716db065c1">sd_in</a> )(struct <a class="el" href="../../db/d49/structm0__sm.html">m0_sm</a> *<a class="el" href="../../d0/d9e/group__addb2.html#gad1b6fc93713e2e36989cfb6c4d35a7de">mach</a>)</td></tr>
<tr class="separator:acfcbdd9dc5092bf7138045716db065c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacabbec077f7cb762b17ef84bd290326"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d29/structm0__sm__state__descr.html#aacabbec077f7cb762b17ef84bd290326">sd_ex</a> )(struct <a class="el" href="../../db/d49/structm0__sm.html">m0_sm</a> *<a class="el" href="../../d0/d9e/group__addb2.html#gad1b6fc93713e2e36989cfb6c4d35a7de">mach</a>)</td></tr>
<tr class="separator:aacabbec077f7cb762b17ef84bd290326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4efabba62dd05a732b696b565388b2"><td class="memItemLeft" align="right" valign="top">bool(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d29/structm0__sm__state__descr.html#abf4efabba62dd05a732b696b565388b2">sd_invariant</a> )(const struct <a class="el" href="../../db/d49/structm0__sm.html">m0_sm</a> *<a class="el" href="../../d0/d9e/group__addb2.html#gad1b6fc93713e2e36989cfb6c4d35a7de">mach</a>)</td></tr>
<tr class="separator:abf4efabba62dd05a732b696b565388b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48c0b15a3b5b9480c2232273a436af1a"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d29/structm0__sm__state__descr.html#a48c0b15a3b5b9480c2232273a436af1a">sd_allowed</a></td></tr>
<tr class="separator:a48c0b15a3b5b9480c2232273a436af1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe9b0023da83ee58ae35802b6d3abdc"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d29/structm0__sm__state__descr.html#a3fe9b0023da83ee58ae35802b6d3abdc">sd_trans</a> [<a class="el" href="../../d1/dc1/group__sm.html#ggac8709e3ac50ca0bc759d823fac185dd1a2f295847b6c43767eb5189d0b4d5482f">M0_SM_MAX_STATES</a>]</td></tr>
<tr class="separator:a3fe9b0023da83ee58ae35802b6d3abdc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Description of some state machine state. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d56/sm_8h_source.html#l00373">373</a> of file <a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a>.</p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a48c0b15a3b5b9480c2232273a436af1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48c0b15a3b5b9480c2232273a436af1a">&#9670;&nbsp;</a></span>sd_allowed</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t sd_allowed</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A bitmap of states to which transitions from this state are allowed.</p>
<dl class="section note"><dt>Note</dt><dd>this limits the number of states to 64, which should be more than enough. Should a need in extra complicated machines arise, this can be replaced with <a class="el" href="../../d9/d78/structm0__bitmap.html">m0_bitmap</a>, as the expense of making static <a class="el" href="../../da/d29/structm0__sm__state__descr.html">m0_sm_state_descr</a> more complicated. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d7/d56/sm_8h_source.html#l00422">422</a> of file <a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a>.</p>

</div>
</div>
<a id="aacabbec077f7cb762b17ef84bd290326"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacabbec077f7cb762b17ef84bd290326">&#9670;&nbsp;</a></span>sd_ex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* sd_ex) (struct <a class="el" href="../../db/d49/structm0__sm.html">m0_sm</a> *<a class="el" href="../../d0/d9e/group__addb2.html#gad1b6fc93713e2e36989cfb6c4d35a7de">mach</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function (if non-NULL) is called by <a class="el" href="../../d1/dc1/group__sm.html#ga44ae6c237c23107f3a9c5b9202582416">m0_sm_state_set()</a> when the state is left. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d56/sm_8h_source.html#l00402">402</a> of file <a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a>.</p>

</div>
</div>
<a id="a284eb2338c2b471e56b13fc5e601a71b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a284eb2338c2b471e56b13fc5e601a71b">&#9670;&nbsp;</a></span>sd_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t sd_flags</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flags, broadly classifying the state, taken from m0_sm_state_descr_flags. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d56/sm_8h_source.html#l00378">378</a> of file <a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a>.</p>

</div>
</div>
<a id="acfcbdd9dc5092bf7138045716db065c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfcbdd9dc5092bf7138045716db065c1">&#9670;&nbsp;</a></span>sd_in</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* sd_in) (struct <a class="el" href="../../db/d49/structm0__sm.html">m0_sm</a> *<a class="el" href="../../d0/d9e/group__addb2.html#gad1b6fc93713e2e36989cfb6c4d35a7de">mach</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function (if non-NULL) is called by <a class="el" href="../../d1/dc1/group__sm.html#ga44ae6c237c23107f3a9c5b9202582416">m0_sm_state_set()</a> when the state is entered.</p>
<p>If this function returns a non-negative number, the state machine immediately transits to the returned state (this transition includes all usual side-effects, like machine channel broadcast and invocation of the target state -&gt;<a class="el" href="../../da/d29/structm0__sm__state__descr.html#acfcbdd9dc5092bf7138045716db065c1">sd_in()</a> method). This process repeats until -&gt;<a class="el" href="../../da/d29/structm0__sm__state__descr.html#acfcbdd9dc5092bf7138045716db065c1">sd_in()</a> returns negative number. Such state transitions are called "chained", see "chain" UT for examples. To fail the state machine, set <a class="el" href="../../db/d49/structm0__sm.html#aae17393da3a8b1f9d299b515a73cd954">m0_sm::sm_rc</a> manually and return one of M0_SDF_FAILURE states, see C_OVER -&gt; C_LOSE transition in the "chain" UT. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d56/sm_8h_source.html#l00397">397</a> of file <a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a>.</p>

</div>
</div>
<a id="abf4efabba62dd05a732b696b565388b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf4efabba62dd05a732b696b565388b2">&#9670;&nbsp;</a></span>sd_invariant</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool(* sd_invariant) (const struct <a class="el" href="../../db/d49/structm0__sm.html">m0_sm</a> *<a class="el" href="../../d0/d9e/group__addb2.html#gad1b6fc93713e2e36989cfb6c4d35a7de">mach</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Invariant that must hold while in this state. Specifically, this invariant is checked under the state machine lock once transition to this state completed, checked under the same lock just before a transition out of the state is about to happen and is checked (under the lock) whenever a <a class="el" href="../../db/d49/structm0__sm.html">m0_sm</a> call finds the target state machine in this state.</p>
<p>If this field is NULL, no invariant checks are done. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d56/sm_8h_source.html#l00413">413</a> of file <a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a>.</p>

</div>
</div>
<a id="aaa4b4ef5c4b7c75b07ddabcb9877008b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa4b4ef5c4b7c75b07ddabcb9877008b">&#9670;&nbsp;</a></span>sd_name</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* sd_name</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Human readable state name for debugging. This field is NULL for "invalid" states, which state machine may never enter. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d56/sm_8h_source.html#l00383">383</a> of file <a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a>.</p>

</div>
</div>
<a id="a3fe9b0023da83ee58ae35802b6d3abdc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fe9b0023da83ee58ae35802b6d3abdc">&#9670;&nbsp;</a></span>sd_trans</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t sd_trans[<a class="el" href="../../d1/dc1/group__sm.html#ggac8709e3ac50ca0bc759d823fac185dd1a2f295847b6c43767eb5189d0b4d5482f">M0_SM_MAX_STATES</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An index map of allowed transitions from this state. The index here is the state to which transition is allowed. The value maps to the index in transitions array (<a class="el" href="../../de/dbb/structm0__sm__conf.html#a69113af617ea4315047ac2b37b35555d">m0_sm_conf::scf_trans</a>). The value of ~0 means that transition is not allowed. This field is constructed at run-time in <a class="el" href="../../d1/dc1/group__sm.html#ga851deafe4c8d220bab667cf4c222bc84">m0_sm_conf_init()</a> routine, which must be called before state machine with this configuration can be constructed. </p>

<p class="definition">Definition at line <a class="el" href="../../d7/d56/sm_8h_source.html#l00433">433</a> of file <a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>sm/<a class="el" href="../../d7/d56/sm_8h_source.html">sm.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../da/d29/structm0__sm__state__descr.html">m0_sm_state_descr</a></li>
    <li class="footer">Generated on Fri May 20 2022 10:36:15 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
