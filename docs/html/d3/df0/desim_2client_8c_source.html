<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: desim/client.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/df0/desim_2client_8c_source.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">client.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d3/df0/desim_2client_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Copyright (c) 2011-2020 Seagate Technology LLC and/or its Affiliates</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * You may obtain a copy of the License at</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * See the License for the specific language governing permissions and</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * limitations under the License.</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * For any questions about this software or licensing,</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * please email opensource@seagate.com or cortx-questions@seagate.com.</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/da7/assert_8h.html">lib/assert.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d08/magic_8h.html">motr/magic.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d94/sim_8h.html">desim/sim.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d55/desim_2net_8h.html">desim/net.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d06/desim_2client_8h.html">desim/client.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno"><a class="line" href="../../d0/dac/structclient__thread__param.html">   35</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/dac/structclient__thread__param.html">client_thread_param</a> {</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="../../d0/dac/structclient__thread__param.html#afee4e1fbebc00b1dd2994069aae559a1">   36</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/d04/structclient__conf.html">client_conf</a> *<a class="code" href="../../d0/dac/structclient__thread__param.html#afee4e1fbebc00b1dd2994069aae559a1">ctp_conf</a>;</div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="../../d0/dac/structclient__thread__param.html#a477907d653d2755501c641d523f93795">   37</a></span>&#160;        <span class="keywordtype">unsigned</span>            <a class="code" href="../../d0/dac/structclient__thread__param.html#a477907d653d2755501c641d523f93795">ctp_client</a>;</div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="../../d0/dac/structclient__thread__param.html#ae5e54b08f6357da94d525611e2f20e84">   38</a></span>&#160;        <span class="keywordtype">unsigned</span>            <a class="code" href="../../d0/dac/structclient__thread__param.html#ae5e54b08f6357da94d525611e2f20e84">ctp_thread</a>;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;};</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="../../db/d35/structclient__write__ext.html">   41</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/d35/structclient__write__ext.html">client_write_ext</a> {</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="../../db/d35/structclient__write__ext.html#afbf46f7f687567d48ce4e2e1ff6905f8">   42</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>  <a class="code" href="../../db/d35/structclient__write__ext.html#afbf46f7f687567d48ce4e2e1ff6905f8">cwe_offset</a>;</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="../../db/d35/structclient__write__ext.html#a79dbe5745bfbad21a6b6b5fef9ab3111">   43</a></span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>       <a class="code" href="../../db/d35/structclient__write__ext.html#a79dbe5745bfbad21a6b6b5fef9ab3111">cwe_count</a>;</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../db/d35/structclient__write__ext.html#ae6482d43504304af29e0362b0139db5a">   44</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d9/de0/structm0__tlink.html">m0_tlink</a>     <a class="code" href="../../db/d35/structclient__write__ext.html#ae6482d43504304af29e0362b0139db5a">cwe_linkage</a>;</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="../../db/d35/structclient__write__ext.html#ab252a88a044cfd80bb41db4afdeea635">   45</a></span>&#160;        uint64_t            <a class="code" href="../../db/d35/structclient__write__ext.html#ab252a88a044cfd80bb41db4afdeea635">cwe_magic</a>;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;};</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<a class="code" href="../../dc/d7e/group__desim.html#ga527f30820090c4426e1e30c3b8ea7e7f">M0_TL_DESCR_DEFINE</a>(cl, <span class="stringliteral">&quot;client write extents&quot;</span>, <span class="keyword">static</span>, <span class="keyword">struct</span> <a class="code" href="../../db/d35/structclient__write__ext.html">client_write_ext</a>,</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                   cwe_linkage, cwe_magic, <a class="code" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a809bac8bed4e8e03d55b85ae5ae49e9f">M0_DESIM_CLIENT_WRITE_EXT_MAGIC</a>,</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                   <a class="code" href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a9ffbfce0a174e64dc94be201bb45eaf3">M0_DESIM_CLIENT_WRITE_EXT_HEAD_MAGIC</a>);</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<a class="code" href="../../dc/d7e/group__desim.html#gac5bedd6eceafc63b2da4fac5b385b686">M0_TL_DEFINE</a>(cl, <span class="keyword">static</span>, <span class="keyword">struct</span> <a class="code" href="../../db/d35/structclient__write__ext.html">client_write_ext</a>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../dc/d7e/group__desim.html#ga352b46bf293ad2d99ca583d273437803">   53</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d7e/group__desim.html#ga352b46bf293ad2d99ca583d273437803">client_pageout</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structsim.html">sim</a> *<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#aee6e517d35e5b77a829ee476518f6a5d">s</a>, <span class="keyword">struct</span> <a class="code" href="../../dd/d21/structsim__thread.html">sim_thread</a> *<a class="code" href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a>, <span class="keywordtype">void</span> *arg)</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d3/db7/structclient.html">client</a>           *<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>    = arg;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/d04/structclient__conf.html">client_conf</a>      *<a class="code" href="../../d5/d89/namespaceconf.html">conf</a> = <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_conf;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordtype">unsigned</span>                 <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a> = <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_opt_count;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../db/d35/structclient__write__ext.html">client_write_ext</a> *ext;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d7/ddd/structm0__stob__id.html">m0_stob_id</a>        stob_id;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                <span class="keywordflow">while</span> (<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_dirty - <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_io &lt; <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                        <a class="code" href="../../dc/d7e/group__desim.html#ga0801132a80d0463be24d98b7b9d61f94">sim_chan_wait</a>(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cache_busy, <a class="code" href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a>);</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_shutdown)</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                <a class="code" href="../../dc/d7e/group__desim.html#gad91ed09600c2181b3c5535ca7b993683">sim_thread_exit</a>(<a class="code" href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a>);</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                }</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <a class="code" href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a>(!cl_tlist_is_empty(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_write_ext));</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                ext = cl_tlist_head(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_write_ext);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                <span class="comment">/* no real cache management for now */</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <a class="code" href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a>(ext-&gt;<a class="code" href="../../db/d35/structclient__write__ext.html#a79dbe5745bfbad21a6b6b5fef9ab3111">cwe_count</a> == <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                cl_tlink_del_fini(ext);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#ga9d4384df55c7bfca104875c759e9acef">sim_log</a>(<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#aee6e517d35e5b77a829ee476518f6a5d">s</a>, <a class="code" href="../../dc/d7e/group__desim.html#gga180756a7189dd37d95d347a6508371faad92d2ea275f8cf05739f454a5b5e74cf">SLL_TRACE</a>, <span class="stringliteral">&quot;P%2i/%2i: %6lu %10llu %8u\n&quot;</span>, <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_id,</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                        <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_inflight, <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_fid, ext-&gt;<a class="code" href="../../db/d35/structclient__write__ext.html#afbf46f7f687567d48ce4e2e1ff6905f8">cwe_offset</a>, <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_io += <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_inflight++;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <a class="code" href="../../d9/d6a/group__stob.html#ga73edd9e177abafdf4b508ffb2b467218">m0_stob_id_make</a>(0, <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_fid, &amp;<a class="code" href="../../dd/d5f/group__fid.html#ga0a5ebd45f745eeee1cc583e6e568aa40">M0_FID_INIT</a>(0, <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_fid), &amp;stob_id);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#ga7e542df20c7a673efd627d5d897314fe">net_rpc_process</a>(<a class="code" href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a>, <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_net, <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_srv,</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                                &amp;stob_id, ext-&gt;<a class="code" href="../../db/d35/structclient__write__ext.html#afbf46f7f687567d48ce4e2e1ff6905f8">cwe_offset</a>, <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_inflight--;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_io -= <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                <a class="code" href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a>(<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cached &gt;= <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <a class="code" href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a>(<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_dirty  &gt;= <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cached -= <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_dirty  -= <a class="code" href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#ga506c5e64b4c496284ea9095af978dfbc">sim_chan_broadcast</a>(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cache_free);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#gaf51ba60c04a4301e5ce7ea97c4f90bee">sim_free</a>(ext);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../dc/d7e/group__desim.html#ga7392588ec28c54fca846bbdbe8042c7c">   90</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../dc/d7e/group__desim.html#ga7392588ec28c54fca846bbdbe8042c7c">client_write_loop</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structsim.html">sim</a> *<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#aee6e517d35e5b77a829ee476518f6a5d">s</a>, <span class="keyword">struct</span> <a class="code" href="../../dd/d21/structsim__thread.html">sim_thread</a> *<a class="code" href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a>, <span class="keywordtype">void</span> *arg)</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/dac/structclient__thread__param.html">client_thread_param</a> *<a class="code" href="../../de/dd5/structparam.html">param</a> = arg;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordtype">unsigned</span>                    clid  = <a class="code" href="../../de/dd5/structparam.html">param</a>-&gt;ctp_client;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordtype">unsigned</span>                    trid  = <a class="code" href="../../de/dd5/structparam.html">param</a>-&gt;ctp_thread;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/d04/structclient__conf.html">client_conf</a>         *<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>  = <a class="code" href="../../de/dd5/structparam.html">param</a>-&gt;ctp_conf;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d3/db7/structclient.html">client</a>              *cl    = &amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_client[clid];</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>               nob   = 0;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordtype">unsigned</span>                    <a class="code" href="../../d6/d0c/ut_2xcode_8c.html#a5f7d24ded17bf1ab44fdadf38c54a8b5">count</a> = <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_count;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>          off   = <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_total * trid;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../db/d35/structclient__write__ext.html">client_write_ext</a>    *ext;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a>(<a class="code" href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a> == &amp;cl-&gt;<a class="code" href="../../d3/db7/structclient.html#a04f0957a4fddc9fdaca620c665560dd4">cl_thread</a>[trid]);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a>(cl-&gt;<a class="code" href="../../d3/db7/structclient.html#a853291a13fe9bd467a30f59d6d64fdf8">cl_id</a> == clid);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">while</span> (nob &lt; conf-&gt;cc_total) {</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#ga5eb6afc30ea6e42ae88b61e02949ad98">sim_sleep</a>(<a class="code" href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a>, <a class="code" href="../../dc/d7e/group__desim.html#ga4d058e31a2d3a206f4d7c1164386d2c9">sim_rnd</a>(<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_delay_min, <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_delay_max));</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <span class="keywordflow">while</span> (cl-&gt;<a class="code" href="../../d3/db7/structclient.html#a6f57711e5471df02428f29384743af9c">cl_dirty</a> + <a class="code" href="../../d6/d0c/ut_2xcode_8c.html#a5f7d24ded17bf1ab44fdadf38c54a8b5">count</a> &gt; <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_dirty_max)</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                        <a class="code" href="../../dc/d7e/group__desim.html#ga0801132a80d0463be24d98b7b9d61f94">sim_chan_wait</a>(&amp;cl-&gt;<a class="code" href="../../d3/db7/structclient.html#a697dbb9320eed7155d30ad3c49a169cc">cl_cache_free</a>, <a class="code" href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                ext = <a class="code" href="../../dc/d7e/group__desim.html#ga92c5c35eca3f0b82e3e0d9b3e4fdca9b">sim_alloc</a>(<span class="keyword">sizeof</span> *ext);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                ext-&gt;<a class="code" href="../../db/d35/structclient__write__ext.html#afbf46f7f687567d48ce4e2e1ff6905f8">cwe_offset</a> = off;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                ext-&gt;<a class="code" href="../../db/d35/structclient__write__ext.html#a79dbe5745bfbad21a6b6b5fef9ab3111">cwe_count</a>  = <a class="code" href="../../d6/d0c/ut_2xcode_8c.html#a5f7d24ded17bf1ab44fdadf38c54a8b5">count</a>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                cl_tlink_init_at_tail(ext, &amp;cl-&gt;<a class="code" href="../../d3/db7/structclient.html#a7eb31c95e9b8a0bba673e8cfecfbfbf1">cl_write_ext</a>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                cl-&gt;<a class="code" href="../../d3/db7/structclient.html#a35e08ddf4149e3ad6617a6fac3a4b1c2">cl_cached</a> += <a class="code" href="../../d6/d0c/ut_2xcode_8c.html#a5f7d24ded17bf1ab44fdadf38c54a8b5">count</a>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                cl-&gt;<a class="code" href="../../d3/db7/structclient.html#a6f57711e5471df02428f29384743af9c">cl_dirty</a>  += <a class="code" href="../../d6/d0c/ut_2xcode_8c.html#a5f7d24ded17bf1ab44fdadf38c54a8b5">count</a>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#ga506c5e64b4c496284ea9095af978dfbc">sim_chan_broadcast</a>(&amp;cl-&gt;<a class="code" href="../../d3/db7/structclient.html#a4fa8effabd182a0fd089de1bb801e2fd">cl_cache_busy</a>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#ga9d4384df55c7bfca104875c759e9acef">sim_log</a>(<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#aee6e517d35e5b77a829ee476518f6a5d">s</a>, <a class="code" href="../../dc/d7e/group__desim.html#gga180756a7189dd37d95d347a6508371faad92d2ea275f8cf05739f454a5b5e74cf">SLL_TRACE</a>, <span class="stringliteral">&quot;W%2i/%2i: %6lu %10llu %8u\n&quot;</span>,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                        clid, trid, cl-&gt;<a class="code" href="../../d3/db7/structclient.html#a927dd8488a65351f4b611c8522354476">cl_fid</a>, off, <a class="code" href="../../d6/d0c/ut_2xcode_8c.html#a5f7d24ded17bf1ab44fdadf38c54a8b5">count</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                nob += <a class="code" href="../../d6/d0c/ut_2xcode_8c.html#a5f7d24ded17bf1ab44fdadf38c54a8b5">count</a>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                off += <a class="code" href="../../d6/d0c/ut_2xcode_8c.html#a5f7d24ded17bf1ab44fdadf38c54a8b5">count</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        }</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <a class="code" href="../../dc/d7e/group__desim.html#gad91ed09600c2181b3c5535ca7b993683">sim_thread_exit</a>(<a class="code" href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;}</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../dc/d7e/group__desim.html#ga89225c9fce38a498c84865a4cc3e11a7">  124</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/d7e/group__desim.html#ga89225c9fce38a498c84865a4cc3e11a7">client_threads_start</a>(<span class="keyword">struct</span> <a class="code" href="../../de/d3c/structsim__callout.html">sim_callout</a> *call)</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/d04/structclient__conf.html">client_conf</a>        *<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>  = call-&gt;<a class="code" href="../../de/d3c/structsim__callout.html#adf7a670427c2b60df5ba861060b80c8f">sc_datum</a>;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d0/dac/structclient__thread__param.html">client_thread_param</a> <a class="code" href="../../de/dd5/structparam.html">param</a> = {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                .ctp_conf = <a class="code" href="../../d5/d89/namespaceconf.html">conf</a></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        };</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="keywordtype">unsigned</span> j;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> = 0; <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> &lt; <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_nr_clients; ++<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="keyword">struct </span><a class="code" href="../../d3/db7/structclient.html">client</a> *<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a> = &amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_client[<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>];</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_nr_threads; ++j) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                        <a class="code" href="../../de/dd5/structparam.html">param</a>.ctp_client = <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        <a class="code" href="../../de/dd5/structparam.html">param</a>.ctp_thread = j;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                        <a class="code" href="../../dc/d7e/group__desim.html#gab8e1171bcadd6b5a0cf6ce8a6915c34c">sim_thread_init</a>(call-&gt;<a class="code" href="../../de/d3c/structsim__callout.html#a27fc4d61b389831dbecad93352dd1e96">sc_sim</a>, &amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_thread[j], 0,</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                                        <a class="code" href="../../dc/d7e/group__desim.html#ga7392588ec28c54fca846bbdbe8042c7c">client_write_loop</a>, &amp;<a class="code" href="../../de/dd5/structparam.html">param</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_inflight_max; ++j)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        <a class="code" href="../../dc/d7e/group__desim.html#gab8e1171bcadd6b5a0cf6ce8a6915c34c">sim_thread_init</a>(call-&gt;<a class="code" href="../../de/d3c/structsim__callout.html#a27fc4d61b389831dbecad93352dd1e96">sc_sim</a>, &amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_pageout[j], 0,</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                        <a class="code" href="../../dc/d7e/group__desim.html#ga352b46bf293ad2d99ca583d273437803">client_pageout</a>, <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="../../dc/d7e/group__desim.html#gad4462027baecb5a5139cf4304807062e">  148</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../dc/d7e/group__desim.html#gad4462027baecb5a5139cf4304807062e">client_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d0e/structsim.html">sim</a> *<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#aee6e517d35e5b77a829ee476518f6a5d">s</a>, <span class="keyword">struct</span> <a class="code" href="../../d0/d04/structclient__conf.html">client_conf</a> *<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>)</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;{</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <a class="code" href="../../dc/d7e/group__desim.html#gaf84cbb0d07b37fbd8577de77f8c7f0f8">cnt_init</a>(&amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_cache_free, <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;client::cache-free&quot;</span>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <a class="code" href="../../dc/d7e/group__desim.html#gaf84cbb0d07b37fbd8577de77f8c7f0f8">cnt_init</a>(&amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_cache_busy, <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;client::cache-busy&quot;</span>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_client = <a class="code" href="../../dc/d7e/group__desim.html#ga92c5c35eca3f0b82e3e0d9b3e4fdca9b">sim_alloc</a>(<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_nr_clients *</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                                    <span class="keyword">sizeof</span> <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_client[0]);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> = 0; <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> &lt; <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_nr_clients; ++<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>) {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                <span class="keyword">struct </span><a class="code" href="../../d3/db7/structclient.html">client</a> *<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a> = &amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_client[<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>];</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                cl_tlist_init(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_write_ext);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_conf = <a class="code" href="../../d3/dec/motr_2st_2utils_2client_8c.html#a10e6260f504b15b8c56a1c921494f298">conf</a>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_fid  = <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_id   = <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#gaf850014ff6f6e7babe2ae177863453bb">sim_chan_init</a>(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cache_free, <span class="stringliteral">&quot;client-%04i::cache-free&quot;</span>, <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#gaf850014ff6f6e7babe2ae177863453bb">sim_chan_init</a>(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cache_busy, <span class="stringliteral">&quot;client-%04i::cache-busy&quot;</span>, <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cache_free.ch_cnt_sleep.c_parent = &amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_cache_free;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cache_busy.ch_cnt_sleep.c_parent = &amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_cache_busy;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_thread = <a class="code" href="../../dc/d7e/group__desim.html#ga92c5c35eca3f0b82e3e0d9b3e4fdca9b">sim_alloc</a>(<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_nr_threads *</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                         <span class="keyword">sizeof</span> <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_thread[0]);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_pageout = <a class="code" href="../../dc/d7e/group__desim.html#ga92c5c35eca3f0b82e3e0d9b3e4fdca9b">sim_alloc</a>(<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_inflight_max *</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                                          <span class="keyword">sizeof</span> <a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_pageout[0]);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        <a class="code" href="../../dc/d7e/group__desim.html#gaf38ca0eecc8700d3dc2e1fc3638ed5e5">sim_timer_add</a>(<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#aee6e517d35e5b77a829ee476518f6a5d">s</a>, 0, <a class="code" href="../../dc/d7e/group__desim.html#ga89225c9fce38a498c84865a4cc3e11a7">client_threads_start</a>, <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>);</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="../../dc/d7e/group__desim.html#ga223352d3b6fa9bcc53c9fe60e12c977c">  177</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../dc/d7e/group__desim.html#ga223352d3b6fa9bcc53c9fe60e12c977c">client_fini</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d04/structclient__conf.html">client_conf</a> *<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>)</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordtype">unsigned</span> <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="keywordtype">unsigned</span> j;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_shutdown = 1;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_client != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                <span class="keywordflow">for</span> (<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> = 0; <a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a> &lt; <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_nr_clients; ++<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>) {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        <span class="keyword">struct </span><a class="code" href="../../d3/db7/structclient.html">client</a> *<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a> = &amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_client[<a class="code" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a>];</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                        <a class="code" href="../../dc/d7e/group__desim.html#ga506c5e64b4c496284ea9095af978dfbc">sim_chan_broadcast</a>(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cache_busy);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                        <a class="code" href="../../dc/d7e/group__desim.html#ga0501b8b0d3877ac32d6a89b6e440870d">sim_chan_fini</a>(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cache_free);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                        <a class="code" href="../../dc/d7e/group__desim.html#ga0501b8b0d3877ac32d6a89b6e440870d">sim_chan_fini</a>(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_cache_busy);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_thread != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_nr_threads; ++j) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                        <span class="comment">/*</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">                                         * run simulation to drain events posted</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">                                         * during finalisation (e.g., by</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">                                         * sim_chan_broadcast() above).</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">                                         */</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                                        <a class="code" href="../../dc/d7e/group__desim.html#ga51a37432cbfbd3784241244d2deb2378">sim_run</a>(<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_thread[j].st_sim);</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                                        <a class="code" href="../../dc/d7e/group__desim.html#ga85782bfd7e68a8d160b96b8749730a54">sim_thread_fini</a>(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_thread[j]);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                                }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                <a class="code" href="../../dc/d7e/group__desim.html#gaf51ba60c04a4301e5ce7ea97c4f90bee">sim_free</a>(<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_thread);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_pageout != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                                <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_inflight_max; ++j) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                        <a class="code" href="../../dc/d7e/group__desim.html#ga51a37432cbfbd3784241244d2deb2378">sim_run</a>(<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_pageout[j].st_sim);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                        <a class="code" href="../../dc/d7e/group__desim.html#ga85782bfd7e68a8d160b96b8749730a54">sim_thread_fini</a>(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_pageout[j]);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                                }</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                                <a class="code" href="../../dc/d7e/group__desim.html#gaf51ba60c04a4301e5ce7ea97c4f90bee">sim_free</a>(<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_pageout);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        cl_tlist_fini(&amp;<a class="code" href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a>-&gt;cl_write_ext);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                <a class="code" href="../../dc/d7e/group__desim.html#gaf51ba60c04a4301e5ce7ea97c4f90bee">sim_free</a>(<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_client);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="../../dc/d7e/group__desim.html#ga5fe1622c729ac2186f7bb651d9c1e783">cnt_fini</a>(&amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_cache_free);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <a class="code" href="../../dc/d7e/group__desim.html#ga5fe1622c729ac2186f7bb651d9c1e783">cnt_fini</a>(&amp;<a class="code" href="../../d5/d89/namespaceconf.html">conf</a>-&gt;cc_cache_busy);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"> *  Local variables:</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"> *  c-indentation-style: &quot;K&amp;R&quot;</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"> *  c-basic-offset: 8</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment"> *  tab-width: 8</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment"> *  fill-column: 80</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment"> *  scroll-step: 1</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment"> *  End:</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment"> */</span></div><div class="ttc" id="group__desim_html_gab8e1171bcadd6b5a0cf6ce8a6915c34c"><div class="ttname"><a href="../../dc/d7e/group__desim.html#gab8e1171bcadd6b5a0cf6ce8a6915c34c">sim_thread_init</a></div><div class="ttdeci">M0_INTERNAL void sim_thread_init(struct sim *state, struct sim_thread *thread, unsigned stacksize, sim_func_t func, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00293">sim.c:293</a></div></div>
<div class="ttc" id="structsim_html"><div class="ttname"><a href="../../d4/d0e/structsim.html">sim</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d94/sim_8h_source.html#l00152">sim.h:152</a></div></div>
<div class="ttc" id="motr_2st_2utils_2client_8c_html_a10e6260f504b15b8c56a1c921494f298"><div class="ttname"><a href="../../d3/dec/motr_2st_2utils_2client_8c.html#a10e6260f504b15b8c56a1c921494f298">conf</a></div><div class="ttdeci">static struct m0_config conf</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dec/motr_2st_2utils_2client_8c_source.html#l00048">client.c:48</a></div></div>
<div class="ttc" id="structclient_html_a927dd8488a65351f4b611c8522354476"><div class="ttname"><a href="../../d3/db7/structclient.html#a927dd8488a65351f4b611c8522354476">client::cl_fid</a></div><div class="ttdeci">unsigned long cl_fid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00043">client.h:43</a></div></div>
<div class="ttc" id="lib_2user__space_2misc_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df8/lib_2user__space_2misc_8h_source.html#l00038">misc.h:38</a></div></div>
<div class="ttc" id="desim_2net_8h_html"><div class="ttname"><a href="../../d8/d55/desim_2net_8h.html">net.h</a></div></div>
<div class="ttc" id="structclient__conf_html"><div class="ttname"><a href="../../d0/d04/structclient__conf.html">client_conf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00052">client.h:52</a></div></div>
<div class="ttc" id="group__desim_html_ga0501b8b0d3877ac32d6a89b6e440870d"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga0501b8b0d3877ac32d6a89b6e440870d">sim_chan_fini</a></div><div class="ttdeci">M0_INTERNAL void sim_chan_fini(struct sim_chan *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00400">sim.c:400</a></div></div>
<div class="ttc" id="group__desim_html_gaf51ba60c04a4301e5ce7ea97c4f90bee"><div class="ttname"><a href="../../dc/d7e/group__desim.html#gaf51ba60c04a4301e5ce7ea97c4f90bee">sim_free</a></div><div class="ttdeci">M0_INTERNAL void sim_free(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00098">sim.c:98</a></div></div>
<div class="ttc" id="desim_2client_8h_html"><div class="ttname"><a href="../../d1/d06/desim_2client_8h.html">client.h</a></div></div>
<div class="ttc" id="group__fid_html_ga0a5ebd45f745eeee1cc583e6e568aa40"><div class="ttname"><a href="../../dd/d5f/group__fid.html#ga0a5ebd45f745eeee1cc583e6e568aa40">M0_FID_INIT</a></div><div class="ttdeci">#define M0_FID_INIT(container, key)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dcf/fid_8h_source.html#l00084">fid.h:84</a></div></div>
<div class="ttc" id="structclient__write__ext_html_ab252a88a044cfd80bb41db4afdeea635"><div class="ttname"><a href="../../db/d35/structclient__write__ext.html#ab252a88a044cfd80bb41db4afdeea635">client_write_ext::cwe_magic</a></div><div class="ttdeci">uint64_t cwe_magic</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00045">client.c:45</a></div></div>
<div class="ttc" id="structclient__thread__param_html"><div class="ttname"><a href="../../d0/dac/structclient__thread__param.html">client_thread_param</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00035">client.c:35</a></div></div>
<div class="ttc" id="group__desim_html_ga9d4384df55c7bfca104875c759e9acef"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga9d4384df55c7bfca104875c759e9acef">sim_log</a></div><div class="ttdeci">M0_INTERNAL void sim_log(struct sim *s, enum sim_log_level level, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00527">sim.c:527</a></div></div>
<div class="ttc" id="namespaceconf_html"><div class="ttname"><a href="../../d5/d89/namespaceconf.html">conf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/ded/data-flow_2conf_8py_source.html#l00001">conf.py:1</a></div></div>
<div class="ttc" id="group__desim_html_gad4462027baecb5a5139cf4304807062e"><div class="ttname"><a href="../../dc/d7e/group__desim.html#gad4462027baecb5a5139cf4304807062e">client_init</a></div><div class="ttdeci">M0_INTERNAL void client_init(struct sim *s, struct client_conf *conf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00148">client.c:148</a></div></div>
<div class="ttc" id="group__desim_html_ga352b46bf293ad2d99ca583d273437803"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga352b46bf293ad2d99ca583d273437803">client_pageout</a></div><div class="ttdeci">static void client_pageout(struct sim *s, struct sim_thread *t, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00053">client.c:53</a></div></div>
<div class="ttc" id="group__desim_html_ga506c5e64b4c496284ea9095af978dfbc"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga506c5e64b4c496284ea9095af978dfbc">sim_chan_broadcast</a></div><div class="ttdeci">M0_INTERNAL void sim_chan_broadcast(struct sim_chan *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00456">sim.c:456</a></div></div>
<div class="ttc" id="structclient__thread__param_html_a477907d653d2755501c641d523f93795"><div class="ttname"><a href="../../d0/dac/structclient__thread__param.html#a477907d653d2755501c641d523f93795">client_thread_param::ctp_client</a></div><div class="ttdeci">unsigned ctp_client</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00037">client.c:37</a></div></div>
<div class="ttc" id="structclient_html_a7eb31c95e9b8a0bba673e8cfecfbfbf1"><div class="ttname"><a href="../../d3/db7/structclient.html#a7eb31c95e9b8a0bba673e8cfecfbfbf1">client::cl_write_ext</a></div><div class="ttdeci">struct m0_tl cl_write_ext</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00049">client.h:49</a></div></div>
<div class="ttc" id="magic_8h_html"><div class="ttname"><a href="../../dd/d08/magic_8h.html">magic.h</a></div></div>
<div class="ttc" id="group__desim_html_gaf84cbb0d07b37fbd8577de77f8c7f0f8"><div class="ttname"><a href="../../dc/d7e/group__desim.html#gaf84cbb0d07b37fbd8577de77f8c7f0f8">cnt_init</a></div><div class="ttdeci">M0_INTERNAL void cnt_init(struct cnt *cnt, struct cnt *parent, const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/cnt_8c_source.html#l00044">cnt.c:44</a></div></div>
<div class="ttc" id="group__desim_html_ga7e542df20c7a673efd627d5d897314fe"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga7e542df20c7a673efd627d5d897314fe">net_rpc_process</a></div><div class="ttdeci">M0_INTERNAL void net_rpc_process(struct sim_thread *t, struct net_conf *net, struct net_srv *srv, struct m0_stob_id *stob_id, unsigned long long offset, unsigned long count)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d29/desim_2net_8c_source.html#l00222">net.c:222</a></div></div>
<div class="ttc" id="ut_2xcode_8c_html_a5f7d24ded17bf1ab44fdadf38c54a8b5"><div class="ttname"><a href="../../d6/d0c/ut_2xcode_8c.html#a5f7d24ded17bf1ab44fdadf38c54a8b5">count</a></div><div class="ttdeci">static m0_bcount_t count</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d0c/ut_2xcode_8c_source.html#l00167">xcode.c:167</a></div></div>
<div class="ttc" id="group__desim_html_gaf850014ff6f6e7babe2ae177863453bb"><div class="ttname"><a href="../../dc/d7e/group__desim.html#gaf850014ff6f6e7babe2ae177863453bb">sim_chan_init</a></div><div class="ttdeci">M0_INTERNAL void sim_chan_init(struct sim_chan *chan, char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00385">sim.c:385</a></div></div>
<div class="ttc" id="group__desim_html_gad91ed09600c2181b3c5535ca7b993683"><div class="ttname"><a href="../../dc/d7e/group__desim.html#gad91ed09600c2181b3c5535ca7b993683">sim_thread_exit</a></div><div class="ttdeci">M0_INTERNAL void sim_thread_exit(struct sim_thread *thread)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00346">sim.c:346</a></div></div>
<div class="ttc" id="structclient__write__ext_html_ae6482d43504304af29e0362b0139db5a"><div class="ttname"><a href="../../db/d35/structclient__write__ext.html#ae6482d43504304af29e0362b0139db5a">client_write_ext::cwe_linkage</a></div><div class="ttdeci">struct m0_tlink cwe_linkage</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00044">client.c:44</a></div></div>
<div class="ttc" id="group__desim_html_ga51a37432cbfbd3784241244d2deb2378"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga51a37432cbfbd3784241244d2deb2378">sim_run</a></div><div class="ttdeci">M0_INTERNAL void sim_run(struct sim *state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00129">sim.c:129</a></div></div>
<div class="ttc" id="m0t1fs_2linux__kernel_2dir_8c_html_a7e98b8a17c0aad30ba64d47b74e2a6c1"><div class="ttname"><a href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a7e98b8a17c0aad30ba64d47b74e2a6c1">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c_source.html#l01033">dir.c:1033</a></div></div>
<div class="ttc" id="group__desim_html_gac5bedd6eceafc63b2da4fac5b385b686"><div class="ttname"><a href="../../dc/d7e/group__desim.html#gac5bedd6eceafc63b2da4fac5b385b686">M0_TL_DEFINE</a></div><div class="ttdeci">M0_TL_DEFINE(cl, static, struct client_write_ext)</div></div>
<div class="ttc" id="assert_8h_html"><div class="ttname"><a href="../../dc/da7/assert_8h.html">assert.h</a></div></div>
<div class="ttc" id="group__desim_html_ga85782bfd7e68a8d160b96b8749730a54"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga85782bfd7e68a8d160b96b8749730a54">sim_thread_fini</a></div><div class="ttdeci">M0_INTERNAL void sim_thread_fini(struct sim_thread *thread)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00333">sim.c:333</a></div></div>
<div class="ttc" id="structclient_html_a04f0957a4fddc9fdaca620c665560dd4"><div class="ttname"><a href="../../d3/db7/structclient.html#a04f0957a4fddc9fdaca620c665560dd4">client::cl_thread</a></div><div class="ttdeci">struct sim_thread * cl_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00038">client.h:38</a></div></div>
<div class="ttc" id="structclient_html_a697dbb9320eed7155d30ad3c49a169cc"><div class="ttname"><a href="../../d3/db7/structclient.html#a697dbb9320eed7155d30ad3c49a169cc">client::cl_cache_free</a></div><div class="ttdeci">struct sim_chan cl_cache_free</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00046">client.h:46</a></div></div>
<div class="ttc" id="group__desim_html_ga7392588ec28c54fca846bbdbe8042c7c"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga7392588ec28c54fca846bbdbe8042c7c">client_write_loop</a></div><div class="ttdeci">static void client_write_loop(struct sim *s, struct sim_thread *t, void *arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00090">client.c:90</a></div></div>
<div class="ttc" id="structm0__stob__id_html"><div class="ttname"><a href="../../d7/ddd/structm0__stob__id.html">m0_stob_id</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc9/stob_2stob_8h_source.html#l00101">stob.h:101</a></div></div>
<div class="ttc" id="structclient_html_a6f57711e5471df02428f29384743af9c"><div class="ttname"><a href="../../d3/db7/structclient.html#a6f57711e5471df02428f29384743af9c">client::cl_dirty</a></div><div class="ttdeci">unsigned long cl_dirty</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00041">client.h:41</a></div></div>
<div class="ttc" id="assert_8h_html_ac8bebb1ebb72c1dae891a1a1c24e7aec"><div class="ttname"><a href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a></div><div class="ttdeci">#define M0_ASSERT(cond)</div></div>
<div class="ttc" id="ut_2consumer_8c_html_af2960ac510395cc94af670c17478e6ab"><div class="ttname"><a href="../../d6/d7d/ut_2consumer_8c.html#af2960ac510395cc94af670c17478e6ab">c</a></div><div class="ttdeci">static struct m0_addb2_callback c</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7d/ut_2consumer_8c_source.html#l00041">consumer.c:41</a></div></div>
<div class="ttc" id="group__cas_html_ga5d544e7766a9ca095a37614378c444f0"><div class="ttname"><a href="../../d4/d44/group__cas.html#ga5d544e7766a9ca095a37614378c444f0">t</a></div><div class="ttdeci">static struct m0_thread t[8]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d09/cas_2ut_2service__ut_8c_source.html#l01231">service_ut.c:1231</a></div></div>
<div class="ttc" id="structclient_html"><div class="ttname"><a href="../../d3/db7/structclient.html">client</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00037">client.h:37</a></div></div>
<div class="ttc" id="group__desim_html_gaf38ca0eecc8700d3dc2e1fc3638ed5e5"><div class="ttname"><a href="../../dc/d7e/group__desim.html#gaf38ca0eecc8700d3dc2e1fc3638ed5e5">sim_timer_add</a></div><div class="ttdeci">M0_INTERNAL void sim_timer_add(struct sim *state, sim_time_t delta, sim_call_t *cfunc, void *datum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00189">sim.c:189</a></div></div>
<div class="ttc" id="group__stob_html_ga73edd9e177abafdf4b508ffb2b467218"><div class="ttname"><a href="../../d9/d6a/group__stob.html#ga73edd9e177abafdf4b508ffb2b467218">m0_stob_id_make</a></div><div class="ttdeci">M0_INTERNAL void m0_stob_id_make(uint64_t container, uint64_t key, const struct m0_fid *dom_id, struct m0_stob_id *stob_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d26/stob_2stob_8c_source.html#l00343">stob.c:343</a></div></div>
<div class="ttc" id="magic_8h_html_a82bffe7189227eff068dab27a6040119a9ffbfce0a174e64dc94be201bb45eaf3"><div class="ttname"><a href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a9ffbfce0a174e64dc94be201bb45eaf3">M0_DESIM_CLIENT_WRITE_EXT_HEAD_MAGIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/magic_8h_source.html#l00390">magic.h:390</a></div></div>
<div class="ttc" id="group__desim_html_ga5eb6afc30ea6e42ae88b61e02949ad98"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga5eb6afc30ea6e42ae88b61e02949ad98">sim_sleep</a></div><div class="ttdeci">M0_INTERNAL void sim_sleep(struct sim_thread *thread, sim_time_t nap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00372">sim.c:372</a></div></div>
<div class="ttc" id="group__desim_html_ga0801132a80d0463be24d98b7b9d61f94"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga0801132a80d0463be24d98b7b9d61f94">sim_chan_wait</a></div><div class="ttdeci">M0_INTERNAL void sim_chan_wait(struct sim_chan *chan, struct sim_thread *thread)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00411">sim.c:411</a></div></div>
<div class="ttc" id="group__desim_html_ga4d058e31a2d3a206f4d7c1164386d2c9"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga4d058e31a2d3a206f4d7c1164386d2c9">sim_rnd</a></div><div class="ttdeci">M0_INTERNAL unsigned long long sim_rnd(unsigned long long a, unsigned long long b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00471">sim.c:471</a></div></div>
<div class="ttc" id="structsim__callout_html"><div class="ttname"><a href="../../de/d3c/structsim__callout.html">sim_callout</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d94/sim_8h_source.html#l00126">sim.h:126</a></div></div>
<div class="ttc" id="structclient_html_a35e08ddf4149e3ad6617a6fac3a4b1c2"><div class="ttname"><a href="../../d3/db7/structclient.html#a35e08ddf4149e3ad6617a6fac3a4b1c2">client::cl_cached</a></div><div class="ttdeci">unsigned long cl_cached</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00040">client.h:40</a></div></div>
<div class="ttc" id="group__desim_html_ga92c5c35eca3f0b82e3e0d9b3e4fdca9b"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga92c5c35eca3f0b82e3e0d9b3e4fdca9b">sim_alloc</a></div><div class="ttdeci">M0_INTERNAL void * sim_alloc(size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d02/sim_8c_source.html#l00085">sim.c:85</a></div></div>
<div class="ttc" id="structparam_html"><div class="ttname"><a href="../../de/dd5/structparam.html">param</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8c/m0hsm__api_8c_source.html#l00097">m0hsm_api.c:97</a></div></div>
<div class="ttc" id="structsim__thread_html"><div class="ttname"><a href="../../dd/d21/structsim__thread.html">sim_thread</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d94/sim_8h_source.html#l00202">sim.h:202</a></div></div>
<div class="ttc" id="magic_8h_html_a82bffe7189227eff068dab27a6040119a809bac8bed4e8e03d55b85ae5ae49e9f"><div class="ttname"><a href="../../dd/d08/magic_8h.html#a82bffe7189227eff068dab27a6040119a809bac8bed4e8e03d55b85ae5ae49e9f">M0_DESIM_CLIENT_WRITE_EXT_MAGIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d08/magic_8h_source.html#l00387">magic.h:387</a></div></div>
<div class="ttc" id="structclient__write__ext_html_afbf46f7f687567d48ce4e2e1ff6905f8"><div class="ttname"><a href="../../db/d35/structclient__write__ext.html#afbf46f7f687567d48ce4e2e1ff6905f8">client_write_ext::cwe_offset</a></div><div class="ttdeci">unsigned long long cwe_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00042">client.c:42</a></div></div>
<div class="ttc" id="structm0__tlink_html"><div class="ttname"><a href="../../d9/de0/structm0__tlink.html">m0_tlink</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d30/tlist_8h_source.html#l00264">tlist.h:264</a></div></div>
<div class="ttc" id="structsim__callout_html_adf7a670427c2b60df5ba861060b80c8f"><div class="ttname"><a href="../../de/d3c/structsim__callout.html#adf7a670427c2b60df5ba861060b80c8f">sim_callout::sc_datum</a></div><div class="ttdeci">void * sc_datum</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d94/sim_8h_source.html#l00138">sim.h:138</a></div></div>
<div class="ttc" id="structsim__callout_html_a27fc4d61b389831dbecad93352dd1e96"><div class="ttname"><a href="../../de/d3c/structsim__callout.html#a27fc4d61b389831dbecad93352dd1e96">sim_callout::sc_sim</a></div><div class="ttdeci">struct sim * sc_sim</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d94/sim_8h_source.html#l00142">sim.h:142</a></div></div>
<div class="ttc" id="structclient__thread__param_html_afee4e1fbebc00b1dd2994069aae559a1"><div class="ttname"><a href="../../d0/dac/structclient__thread__param.html#afee4e1fbebc00b1dd2994069aae559a1">client_thread_param::ctp_conf</a></div><div class="ttdeci">struct client_conf * ctp_conf</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00036">client.c:36</a></div></div>
<div class="ttc" id="structclient__thread__param_html_ae5e54b08f6357da94d525611e2f20e84"><div class="ttname"><a href="../../d0/dac/structclient__thread__param.html#ae5e54b08f6357da94d525611e2f20e84">client_thread_param::ctp_thread</a></div><div class="ttdeci">unsigned ctp_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00038">client.c:38</a></div></div>
<div class="ttc" id="ut_2di_8c_html_a8629956d8c29c6159e411f38f24c140d"><div class="ttname"><a href="../../d4/d00/ut_2di_8c.html#a8629956d8c29c6159e411f38f24c140d">size</a></div><div class="ttdeci">m0_bcount_t size</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d00/ut_2di_8c_source.html#l00039">di.c:39</a></div></div>
<div class="ttc" id="structclient_html_a853291a13fe9bd467a30f59d6d64fdf8"><div class="ttname"><a href="../../d3/db7/structclient.html#a853291a13fe9bd467a30f59d6d64fdf8">client::cl_id</a></div><div class="ttdeci">unsigned cl_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00044">client.h:44</a></div></div>
<div class="ttc" id="group__desim_html_ga89225c9fce38a498c84865a4cc3e11a7"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga89225c9fce38a498c84865a4cc3e11a7">client_threads_start</a></div><div class="ttdeci">static int client_threads_start(struct sim_callout *call)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00124">client.c:124</a></div></div>
<div class="ttc" id="group__desim_html_ga223352d3b6fa9bcc53c9fe60e12c977c"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga223352d3b6fa9bcc53c9fe60e12c977c">client_fini</a></div><div class="ttdeci">M0_INTERNAL void client_fini(struct client_conf *conf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00177">client.c:177</a></div></div>
<div class="ttc" id="structclient__write__ext_html"><div class="ttname"><a href="../../db/d35/structclient__write__ext.html">client_write_ext</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00041">client.c:41</a></div></div>
<div class="ttc" id="structclient__write__ext_html_a79dbe5745bfbad21a6b6b5fef9ab3111"><div class="ttname"><a href="../../db/d35/structclient__write__ext.html#a79dbe5745bfbad21a6b6b5fef9ab3111">client_write_ext::cwe_count</a></div><div class="ttdeci">unsigned long cwe_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/df0/desim_2client_8c_source.html#l00043">client.c:43</a></div></div>
<div class="ttc" id="group__desim_html_ga527f30820090c4426e1e30c3b8ea7e7f"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga527f30820090c4426e1e30c3b8ea7e7f">M0_TL_DESCR_DEFINE</a></div><div class="ttdeci">M0_TL_DESCR_DEFINE(cl, &quot;client write extents&quot;, static, struct client_write_ext, cwe_linkage, cwe_magic, M0_DESIM_CLIENT_WRITE_EXT_MAGIC, M0_DESIM_CLIENT_WRITE_EXT_HEAD_MAGIC)</div></div>
<div class="ttc" id="ut_2consumer_8c_html_aee6e517d35e5b77a829ee476518f6a5d"><div class="ttname"><a href="../../d6/d7d/ut_2consumer_8c.html#aee6e517d35e5b77a829ee476518f6a5d">s</a></div><div class="ttdeci">static struct m0_addb2_source * s</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7d/ut_2consumer_8c_source.html#l00039">consumer.c:39</a></div></div>
<div class="ttc" id="sim_8h_html"><div class="ttname"><a href="../../d2/d94/sim_8h.html">sim.h</a></div></div>
<div class="ttc" id="structclient_html_a4fa8effabd182a0fd089de1bb801e2fd"><div class="ttname"><a href="../../d3/db7/structclient.html#a4fa8effabd182a0fd089de1bb801e2fd">client::cl_cache_busy</a></div><div class="ttdeci">struct sim_chan cl_cache_busy</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d06/desim_2client_8h_source.html#l00047">client.h:47</a></div></div>
<div class="ttc" id="group__desim_html_gga180756a7189dd37d95d347a6508371faad92d2ea275f8cf05739f454a5b5e74cf"><div class="ttname"><a href="../../dc/d7e/group__desim.html#gga180756a7189dd37d95d347a6508371faad92d2ea275f8cf05739f454a5b5e74cf">SLL_TRACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d94/sim_8h_source.html#l00287">sim.h:287</a></div></div>
<div class="ttc" id="group__desim_html_ga5fe1622c729ac2186f7bb651d9c1e783"><div class="ttname"><a href="../../dc/d7e/group__desim.html#ga5fe1622c729ac2186f7bb651d9c1e783">cnt_fini</a></div><div class="ttdeci">M0_INTERNAL void cnt_fini(struct cnt *cnt)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d19/cnt_8c_source.html#l00083">cnt.c:83</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_6a256e7c3df4b0e9dd092cb93a6b47e5.html">desim</a></li><li class="navelem"><a class="el" href="../../d3/df0/desim_2client_8c.html">client.c</a></li>
    <li class="footer">Generated on Fri May 20 2022 10:34:53 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
