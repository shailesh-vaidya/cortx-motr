<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: m0_rm_resource_ops Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/d16/structm0__rm__resource__ops.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">m0_rm_resource_ops Struct Reference<div class="ingroups"><a class="el" href="../../d2/deb/group__rm.html">Resource management</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for m0_rm_resource_ops:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d70/structm0__rm__resource__ops__coll__graph.png" border="0" usemap="#m0__rm__resource__ops_coll__map" alt="Collaboration graph"/></div>
<map name="m0__rm__resource__ops_coll__map" id="m0__rm__resource__ops_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:aece451f2b26cf45b2c3551aacbc715c1"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d16/structm0__rm__resource__ops.html#aece451f2b26cf45b2c3551aacbc715c1">rop_credit_decode</a> )(struct <a class="el" href="../../d3/d7b/structm0__rm__resource.html">m0_rm_resource</a> *resource, struct <a class="el" href="../../d6/d46/structm0__rm__credit.html">m0_rm_credit</a> *credit, struct <a class="el" href="../../d5/d06/structm0__bufvec__cursor.html">m0_bufvec_cursor</a> *<a class="el" href="../../db/d13/module_2ut_2module_8c.html#a94298e2c586650b2a8a346c594f34c9d">cur</a>)</td></tr>
<tr class="separator:aece451f2b26cf45b2c3551aacbc715c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a076d3060d1afe242942abd95841e992c"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d16/structm0__rm__resource__ops.html#a076d3060d1afe242942abd95841e992c">rop_policy</a> )(struct <a class="el" href="../../d3/d7b/structm0__rm__resource.html">m0_rm_resource</a> *resource, struct <a class="el" href="../../d3/db4/structm0__rm__incoming.html">m0_rm_incoming</a> *in)</td></tr>
<tr class="separator:a076d3060d1afe242942abd95841e992c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83b5d991f593b99a9bdcbce3113eaa4d"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d16/structm0__rm__resource__ops.html#a83b5d991f593b99a9bdcbce3113eaa4d">rop_credit_init</a> )(struct <a class="el" href="../../d3/d7b/structm0__rm__resource.html">m0_rm_resource</a> *resource, struct <a class="el" href="../../d6/d46/structm0__rm__credit.html">m0_rm_credit</a> *credit)</td></tr>
<tr class="separator:a83b5d991f593b99a9bdcbce3113eaa4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4af348f9e6faf023e6fbfb57836ecb6"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d16/structm0__rm__resource__ops.html#aa4af348f9e6faf023e6fbfb57836ecb6">rop_resource_free</a> )(struct <a class="el" href="../../d3/d7b/structm0__rm__resource.html">m0_rm_resource</a> *resource)</td></tr>
<tr class="separator:aa4af348f9e6faf023e6fbfb57836ecb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00334">334</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="aece451f2b26cf45b2c3551aacbc715c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aece451f2b26cf45b2c3551aacbc715c1">&#9670;&nbsp;</a></span>rop_credit_decode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* rop_credit_decode) (struct <a class="el" href="../../d3/d7b/structm0__rm__resource.html">m0_rm_resource</a> *resource, struct <a class="el" href="../../d6/d46/structm0__rm__credit.html">m0_rm_credit</a> *credit, struct <a class="el" href="../../d5/d06/structm0__bufvec__cursor.html">m0_bufvec_cursor</a> *<a class="el" href="../../db/d13/module_2ut_2module_8c.html#a94298e2c586650b2a8a346c594f34c9d">cur</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called when a new credit is allocated for the resource. The resource specific code should parse the credit description stored in the buffer and fill <a class="el" href="../../d6/d46/structm0__rm__credit.html#a01f52a5410714110243b3592d10ab472">m0_rm_credit::cr_datum</a> appropriately. </p>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00340">340</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a83b5d991f593b99a9bdcbce3113eaa4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83b5d991f593b99a9bdcbce3113eaa4d">&#9670;&nbsp;</a></span>rop_credit_init</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* rop_credit_init) (struct <a class="el" href="../../d3/d7b/structm0__rm__resource.html">m0_rm_resource</a> *resource, struct <a class="el" href="../../d6/d46/structm0__rm__credit.html">m0_rm_credit</a> *credit)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called to initialise a usage credit for this resource. Sets up <a class="el" href="../../d6/d46/structm0__rm__credit.html#a30ae0145f8aff162cdd611be0a384c39">m0_rm_credit::cr_ops</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00365">365</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="a076d3060d1afe242942abd95841e992c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a076d3060d1afe242942abd95841e992c">&#9670;&nbsp;</a></span>rop_policy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* rop_policy) (struct <a class="el" href="../../d3/d7b/structm0__rm__resource.html">m0_rm_resource</a> *resource, struct <a class="el" href="../../d3/db4/structm0__rm__incoming.html">m0_rm_incoming</a> *in)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decides which credit should be granted, sublet, or revoked.</p>
<p>"Policy" defines which credit to actually grant. E.g., a client doing a write to the first 4KB page in a file asks for [0, 4KB) extent lock. If nobody else accesses the file, RM would grant [0, ~0ULL) lock instead to avoid repeated lock requests in case of sequential IO. If there are other conflicting locks, already granted on the file, the policy might expand requested credit to the largest credit that doesn't overlap with conflicting credits. And so on, there are multiple options. So this is literally a "credit policy" as used by banks. The name stems all the way back to VAX VMS lock manager.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d2/deb/group__rm.html#gac7536c07764347b610ee35dfd23d060c">m0_rm_incoming_policy</a> &mdash; a <a class="el" href="../../dc/dc9/ut_2tlist_8c.html#a290b1e0e27cc13a1067701409640975a">list</a> of a few predefined policies. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00359">359</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<a id="aa4af348f9e6faf023e6fbfb57836ecb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4af348f9e6faf023e6fbfb57836ecb6">&#9670;&nbsp;</a></span>rop_resource_free</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* rop_resource_free) (struct <a class="el" href="../../d3/d7b/structm0__rm__resource.html">m0_rm_resource</a> *resource)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../db/df8/rm_8h_source.html#l00368">368</a> of file <a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>rm/<a class="el" href="../../db/df8/rm_8h_source.html">rm.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d3/d16/structm0__rm__resource__ops.html">m0_rm_resource_ops</a></li>
    <li class="footer">Generated on Fri May 20 2022 10:36:14 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
