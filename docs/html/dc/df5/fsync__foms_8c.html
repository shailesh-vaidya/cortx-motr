<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: mdservice/fsync_foms.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dc/df5/fsync__foms_8c.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">fsync_foms.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../d9/d51/fop_2fop_8h_source.html">fop/fop.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/da7/assert_8h_source.html">lib/assert.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/dc2/errno_8h_source.html">lib/errno.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d18/memory_8h_source.html">lib/memory.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d1b/trace_8h_source.html">lib/trace.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/df1/fsync__foms_8h_source.html">mdservice/fsync_foms.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/dd5/fsync__fops_8h_source.html">mdservice/fsync_fops.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d3e/io__fops_8h_source.html">ioservice/io_fops.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/dbf/cas_8h_source.html">cas/cas.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d4b/rpc__opcodes_8h_source.html">rpc/rpc_opcodes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d88/storage__dev_8h_source.html">ioservice/storage_dev.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/df7/setup_8h_source.html">motr/setup.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/dab/fom__generic_8h_source.html">fop/fom_generic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d37/be_2domain_8h_source.html">be/domain.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d55/engine_8h_source.html">be/engine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d0c/reqh_8h_source.html">reqh/reqh.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for fsync_foms.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d7c/fsync__foms_8c__incl.png" border="0" usemap="#mdservice_2fsync__foms_8c" alt=""/></div>
<map name="mdservice_2fsync__foms_8c" id="mdservice_2fsync__foms_8c">
<area shape="rect" id="node2" href="../../d9/d51/fop_2fop_8h.html" title="fop/fop.h" alt="" coords="163,155,236,181"/>
<area shape="rect" id="node3" href="../../d8/dc2/errno_8h.html" title="lib/errno.h" alt="" coords="32,229,111,256"/>
<area shape="rect" id="node4" href="../../dc/da7/assert_8h.html" title="lib/assert.h" alt="" coords="35,155,121,181"/>
<area shape="rect" id="node5" href="../../dc/d18/memory_8h.html" title="lib/memory.h" alt="" coords="49,80,145,107"/>
<area shape="rect" id="node6" href="../../d1/d1b/trace_8h.html" title="lib/trace.h" alt="" coords="220,80,299,107"/>
<area shape="rect" id="node7" href="../../da/df1/fsync__foms_8h.html" title="mdservice/fsync_foms.h" alt="" coords="323,80,489,107"/>
<area shape="rect" id="node8" href="../../d8/dd5/fsync__fops_8h.html" title="mdservice/fsync_fops.h" alt="" coords="513,80,675,107"/>
<area shape="rect" id="node9" href="../../dd/d3e/io__fops_8h.html" title="ioservice/io_fops.h" alt="" coords="699,80,830,107"/>
<area shape="rect" id="node10" href="../../d0/dab/fom__generic_8h.html" title="fop/fom_generic.h" alt="" coords="752,155,879,181"/>
<area shape="rect" id="node11" href="../../d1/dbf/cas_8h.html" title="cas/cas.h" alt="" coords="905,80,984,107"/>
<area shape="rect" id="node12" href="../../dd/d4b/rpc__opcodes_8h.html" title="rpc/rpc_opcodes.h" alt="" coords="1008,80,1137,107"/>
<area shape="rect" id="node13" href="../../d3/d88/storage__dev_8h.html" title="ioservice/storage_dev.h" alt="" coords="1161,80,1320,107"/>
<area shape="rect" id="node14" href="../../d7/df7/setup_8h.html" title="motr/setup.h" alt="" coords="1344,80,1439,107"/>
<area shape="rect" id="node15" href="../../d7/d0c/reqh_8h.html" title="reqh/reqh.h" alt="" coords="1376,155,1463,181"/>
<area shape="rect" id="node16" href="../../dc/d37/be_2domain_8h.html" title="be/domain.h" alt="" coords="1514,80,1607,107"/>
<area shape="rect" id="node17" href="../../d1/d55/engine_8h.html" title="be/engine.h" alt="" coords="1557,155,1647,181"/>
</map>
</div>
</div>
<p><a href="../../dc/df5/fsync__foms_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ae762ad8776496e788bf62e0fa1615b61"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#ae762ad8776496e788bf62e0fa1615b61">M0_TRACE_SUBSYSTEM</a>&#160;&#160;&#160;M0_TRACE_SUBSYS_COB</td></tr>
<tr class="separator:ae762ad8776496e788bf62e0fa1615b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a87ec79620bcfb6137d988f2a3e73cd3d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3d">fsync_fom_phase</a> { <a class="el" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa">M0_FOPH_FSYNC_FOM_START</a> = M0_FOPH_NR + 1, 
<a class="el" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>, 
<a class="el" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a>
 }</td></tr>
<tr class="separator:a87ec79620bcfb6137d988f2a3e73cd3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad528c3e1562764bc9a0ff3625a03bd68"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#ad528c3e1562764bc9a0ff3625a03bd68">fsync_fom_fini</a> (struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *<a class="el" href="../../d7/d59/structfom.html">fom</a>)</td></tr>
<tr class="separator:ad528c3e1562764bc9a0ff3625a03bd68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d92cfbd67dc7ba832f8441b5b4ec8c4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#a3d92cfbd67dc7ba832f8441b5b4ec8c4">fsync_fom_tick</a> (struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *<a class="el" href="../../d7/d59/structfom.html">fom</a>)</td></tr>
<tr class="separator:a3d92cfbd67dc7ba832f8441b5b4ec8c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d22c701ea40c4380c3ff1935d0e4cf9"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#a8d22c701ea40c4380c3ff1935d0e4cf9">fsync_fom_locality_get</a> (const struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *<a class="el" href="../../d7/d59/structfom.html">fom</a>)</td></tr>
<tr class="separator:a8d22c701ea40c4380c3ff1935d0e4cf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a643a4452c50d42250498bdcb9459236d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#a643a4452c50d42250498bdcb9459236d">fsync_target_tx_get</a> (struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *<a class="el" href="../../d7/d59/structfom.html">fom</a>, uint64_t txid)</td></tr>
<tr class="separator:a643a4452c50d42250498bdcb9459236d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc3ac2b4d399995df9eed8599eb02446"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#afc3ac2b4d399995df9eed8599eb02446">m0_fsync_req_fom_create</a> (struct <a class="el" href="../../d5/d01/structm0__fop.html">m0_fop</a> *<a class="el" href="../../d9/dbf/ut_2item_8c.html#aa6954df11aaf0bcf90cf350315b8c544">fop</a>, struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> **<a class="el" href="../../dd/d6d/group__xcode.html#ga50fe33eaae68b43814656f241a6ac907">out</a>, struct <a class="el" href="../../d9/da2/structm0__reqh.html">m0_reqh</a> *<a class="el" href="../../d9/d5b/repair_2ut_2xform_8c.html#afec035bc8585ee79d8913aa127f29c9b">reqh</a>)</td></tr>
<tr class="separator:afc3ac2b4d399995df9eed8599eb02446"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5c08eac82236372ec7e6a811a3798953"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d6/dda/structm0__fom__ops.html">m0_fom_ops</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#a5c08eac82236372ec7e6a811a3798953">fsync_fom_ops</a></td></tr>
<tr class="separator:a5c08eac82236372ec7e6a811a3798953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11badd7cc1ee28f6b3e1c5f0d8dddaa7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../da/d29/structm0__sm__state__descr.html">m0_sm_state_descr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#a11badd7cc1ee28f6b3e1c5f0d8dddaa7">m0_fsync_fom_phases</a> []</td></tr>
<tr class="separator:a11badd7cc1ee28f6b3e1c5f0d8dddaa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff960f5714ef287f928cc6d6aa4ab32d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/dd9/structm0__sm__trans__descr.html">m0_sm_trans_descr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#aff960f5714ef287f928cc6d6aa4ab32d">fsync_fom_phases_trans</a> []</td></tr>
<tr class="separator:aff960f5714ef287f928cc6d6aa4ab32d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a307c12fb53b8967f47ac1eb3c6560de6"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL struct <a class="el" href="../../de/dbb/structm0__sm__conf.html">m0_sm_conf</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df5/fsync__foms_8c.html#a307c12fb53b8967f47ac1eb3c6560de6">m0_fsync_fom_conf</a></td></tr>
<tr class="separator:a307c12fb53b8967f47ac1eb3c6560de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ae762ad8776496e788bf62e0fa1615b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae762ad8776496e788bf62e0fa1615b61">&#9670;&nbsp;</a></span>M0_TRACE_SUBSYSTEM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define M0_TRACE_SUBSYSTEM&#160;&#160;&#160;M0_TRACE_SUBSYS_COB</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00022">22</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a87ec79620bcfb6137d988f2a3e73cd3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87ec79620bcfb6137d988f2a3e73cd3d">&#9670;&nbsp;</a></span>fsync_fom_phase</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3d">fsync_fom_phase</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Phase names of an fsync fom </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa"></a>M0_FOPH_FSYNC_FOM_START&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5"></a>M0_FOPH_FSYNC_FOM_WAIT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd"></a>M0_FOPH_FSYNC_DATASYNC&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00060">60</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad528c3e1562764bc9a0ff3625a03bd68"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad528c3e1562764bc9a0ff3625a03bd68">&#9670;&nbsp;</a></span>fsync_fom_fini()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fsync_fom_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *&#160;</td>
          <td class="paramname"><em>fom</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Finalizes and releases an fsync fom. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fom</td><td>fsync fom to be released. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00321">321</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/df5/fsync__foms_8c_ad528c3e1562764bc9a0ff3625a03bd68_cgraph.png" border="0" usemap="#dc/df5/fsync__foms_8c_ad528c3e1562764bc9a0ff3625a03bd68_cgraph" alt=""/></div>
<map name="dc/df5/fsync__foms_8c_ad528c3e1562764bc9a0ff3625a03bd68_cgraph" id="dc/df5/fsync__foms_8c_ad528c3e1562764bc9a0ff3625a03bd68_cgraph">
<area shape="rect" id="node2" href="../../d1/d59/group__fom.html#ga16052f86d32e6cae9dba4627e77bd4e0" title="m0_fom_fini" alt="" coords="160,5,253,32"/>
</map>
</div>

</div>
</div>
<a id="a8d22c701ea40c4380c3ff1935d0e4cf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d22c701ea40c4380c3ff1935d0e4cf9">&#9670;&nbsp;</a></span>fsync_fom_locality_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t fsync_fom_locality_get </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *&#160;</td>
          <td class="paramname"><em>fom</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the locality of an fsync fom. This affects the processor where the fom is to be processed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fom</td><td>fom whose locality is to be retrieved. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A locality ID. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00308">308</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/df5/fsync__foms_8c_a8d22c701ea40c4380c3ff1935d0e4cf9_cgraph.png" border="0" usemap="#dc/df5/fsync__foms_8c_a8d22c701ea40c4380c3ff1935d0e4cf9_cgraph" alt=""/></div>
<map name="dc/df5/fsync__foms_8c_a8d22c701ea40c4380c3ff1935d0e4cf9_cgraph" id="dc/df5/fsync__foms_8c_a8d22c701ea40c4380c3ff1935d0e4cf9_cgraph">
<area shape="rect" id="node2" href="../../d6/d39/group__fop.html#ga514d8cd13fb698f7498be1147831f5b0" title="m0_fop_data" alt="" coords="209,5,307,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/df5/fsync__foms_8c_a8d22c701ea40c4380c3ff1935d0e4cf9_icgraph.png" border="0" usemap="#dc/df5/fsync__foms_8c_a8d22c701ea40c4380c3ff1935d0e4cf9_icgraph" alt=""/></div>
<map name="dc/df5/fsync__foms_8c_a8d22c701ea40c4380c3ff1935d0e4cf9_icgraph" id="dc/df5/fsync__foms_8c_a8d22c701ea40c4380c3ff1935d0e4cf9_icgraph">
<area shape="rect" id="node2" href="../../d7/d93/mdservice_2ut_2mdstore_8c.html#a6f1c0745c8b054ab4cedcb4d8017acf9" title="ut_fsync_create_fom" alt="" coords="209,5,353,32"/>
</map>
</div>

</div>
</div>
<a id="a3d92cfbd67dc7ba832f8441b5b4ec8c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d92cfbd67dc7ba832f8441b5b4ec8c4">&#9670;&nbsp;</a></span>fsync_fom_tick()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int fsync_fom_tick </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *&#160;</td>
          <td class="paramname"><em>fom</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Controls the simple logic of the fsync fom's state machine. If the target transaction is already logged, the processing of the fsync fop is finished. If, on the contrary, the target transaction has not been logged yet, the fsync fom performs the following actions depending on the phase of the fsync state machine:</p>
<ul>
<li>M0_FOPH_FSYNC_FOM_START: If the fop request includes the M0_BT_ACTIVE mode flag, the target transaction gets forced. The fom's phase then changes to M0_FOPH_FSYNC_FOM_WAIT.</li>
<li>M0_FOPH_FSYNC_FOM_WAIT: The fsync fom registers itself to be notified when the state of the target transaction changes and then waits. Whenever the target transaction gets finally logged, the fsync fom gets woken up so it can complete the processing of the fsync request and send the corresponding fsync reply.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fom</td><td>fsync fom processing the fsync FOP request. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always M0_FSO_WAIT. Note that if the processing of the fsync fop is considered completed, the phase of the fsync fom is set to M0_FOPH_FSYNC_FOM_FINISH. In this later case, a return code is included in the fsync fop reply. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00174">174</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/df5/fsync__foms_8c_a3d92cfbd67dc7ba832f8441b5b4ec8c4_cgraph.png" border="0" usemap="#dc/df5/fsync__foms_8c_a3d92cfbd67dc7ba832f8441b5b4ec8c4_cgraph" alt=""/></div>
<map name="dc/df5/fsync__foms_8c_a3d92cfbd67dc7ba832f8441b5b4ec8c4_cgraph" id="dc/df5/fsync__foms_8c_a3d92cfbd67dc7ba832f8441b5b4ec8c4_cgraph">
<area shape="rect" id="node2" href="../../d6/d39/group__fop.html#ga514d8cd13fb698f7498be1147831f5b0" title="m0_fop_data" alt="" coords="210,5,307,32"/>
<area shape="rect" id="node3" href="../../d1/d59/group__fom.html#ga1499e1e71e1c59d130775ea0e91585fe" title="m0_fom_reqh" alt="" coords="419,411,520,437"/>
<area shape="rect" id="node4" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="425,81,514,108"/>
<area shape="rect" id="node5" href="../../d1/d59/group__fom.html#ga604374b8c983f14fbae8cd5be4791289" title="m0_fom_tick_generic" alt="" coords="185,107,332,133"/>
<area shape="rect" id="node6" href="../../d1/d59/group__fom.html#ga49c0886e7459bf20d1ba974852f18fcd" title="m0_fom_phase_set" alt="" coords="401,132,537,159"/>
<area shape="rect" id="node7" href="../../df/dca/group__m0d.html#gac46fb755845a2224cfae67b60e87c6e3" title="m0_cs_storage_devs_get" alt="" coords="173,259,344,285"/>
<area shape="rect" id="node8" href="../../d1/d59/group__fom.html#ga743737aa6426c5610be5b3be98e81777" title="m0_fom_block_enter" alt="" coords="187,309,330,336"/>
<area shape="rect" id="node9" href="../../d0/dfe/group__sdev.html#ga0f1fc9d4bec212e1c5dc697f3f1f43cf" title="m0_storage_devs_lock" alt="" coords="181,360,337,387"/>
<area shape="rect" id="node10" href="../../d0/dfe/group__sdev.html#ga7ea5c44dc45ddc659676989760048503" title="m0_storage_devs_fdatasync" alt="" coords="164,411,353,437"/>
<area shape="rect" id="node11" href="../../d0/dfe/group__sdev.html#ga4fd8a8b58fff58915e393ebabb60f0dd" title="m0_storage_devs_unlock" alt="" coords="173,461,344,488"/>
<area shape="rect" id="node12" href="../../d1/d59/group__fom.html#ga2329efad9db4fff88bf3ff8570b8524d" title="m0_fom_block_leave" alt="" coords="186,512,331,539"/>
<area shape="rect" id="node13" href="../../d1/d59/group__fom.html#ga3b8cb77ed93374f275425a4f0929d443" title="m0_fom_phase_moveif" alt="" coords="180,563,337,589"/>
<area shape="rect" id="node14" href="../../dc/df5/fsync__foms_8c.html#a643a4452c50d42250498bdcb9459236d" title="fsync_target_tx_get" alt="" coords="190,613,327,640"/>
<area shape="rect" id="node15" href="../../d5/d54/be_2linux__kernel_2stubs_8c.html#ga9e056c8be3495545fa76d9b7612646a3" title="m0_be_tx_put" alt="" coords="207,664,311,691"/>
<area shape="rect" id="node16" href="../../d9/dcf/group__be.html#ga174f219c25061b07e098c97ad43610bf" title="m0_be_tx_force" alt="" coords="201,715,316,741"/>
<area shape="rect" id="node17" href="../../d1/d59/group__fom.html#ga3da36b83a0def226d7aba23fd436e7fc" title="m0_fom_wait_on" alt="" coords="198,765,319,792"/>
</map>
</div>

</div>
</div>
<a id="a643a4452c50d42250498bdcb9459236d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a643a4452c50d42250498bdcb9459236d">&#9670;&nbsp;</a></span>fsync_target_tx_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a>* fsync_target_tx_get </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> *&#160;</td>
          <td class="paramname"><em>fom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>txid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets the transaction an fsync fop request is targeted to.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fom</td><td>fom associated to the fsync fop request being processed. </td></tr>
    <tr><td class="paramname">txid</td><td>ID of the target transaction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the target transaction or NULL if the operation failed. </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>This function acquires a reference on the target transaction. Call m0_be_tx_put once you are done with the tx, so it can be eventually completed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00141">141</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/df5/fsync__foms_8c_a643a4452c50d42250498bdcb9459236d_cgraph.png" border="0" usemap="#dc/df5/fsync__foms_8c_a643a4452c50d42250498bdcb9459236d_cgraph" alt=""/></div>
<map name="dc/df5/fsync__foms_8c_a643a4452c50d42250498bdcb9459236d_cgraph" id="dc/df5/fsync__foms_8c_a643a4452c50d42250498bdcb9459236d_cgraph">
<area shape="rect" id="node2" href="../../d1/d59/group__fom.html#ga1499e1e71e1c59d130775ea0e91585fe" title="m0_fom_reqh" alt="" coords="219,5,321,32"/>
<area shape="rect" id="node3" href="../../d9/dcf/group__be.html#ga8185b0d5a18cccd585edfc571f8bcf75" title="m0_be_engine__tx_find" alt="" coords="191,56,349,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/df5/fsync__foms_8c_a643a4452c50d42250498bdcb9459236d_icgraph.png" border="0" usemap="#dc/df5/fsync__foms_8c_a643a4452c50d42250498bdcb9459236d_icgraph" alt=""/></div>
<map name="dc/df5/fsync__foms_8c_a643a4452c50d42250498bdcb9459236d_icgraph" id="dc/df5/fsync__foms_8c_a643a4452c50d42250498bdcb9459236d_icgraph">
<area shape="rect" id="node2" href="../../dc/df5/fsync__foms_8c.html#a3d92cfbd67dc7ba832f8441b5b4ec8c4" title="fsync_fom_tick" alt="" coords="191,5,301,32"/>
</map>
</div>

</div>
</div>
<a id="afc3ac2b4d399995df9eed8599eb02446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc3ac2b4d399995df9eed8599eb02446">&#9670;&nbsp;</a></span>m0_fsync_req_fom_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_fsync_req_fom_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d01/structm0__fop.html">m0_fop</a> *&#160;</td>
          <td class="paramname"><em>fop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/db7/structm0__fom.html">m0_fom</a> **&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/da2/structm0__reqh.html">m0_reqh</a> *&#160;</td>
          <td class="paramname"><em>reqh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new fsync fom for a given fsync fop request. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00330">330</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/df5/fsync__foms_8c_afc3ac2b4d399995df9eed8599eb02446_cgraph.png" border="0" usemap="#dc/df5/fsync__foms_8c_afc3ac2b4d399995df9eed8599eb02446_cgraph" alt=""/></div>
<map name="dc/df5/fsync__foms_8c_afc3ac2b4d399995df9eed8599eb02446_cgraph" id="dc/df5/fsync__foms_8c_afc3ac2b4d399995df9eed8599eb02446_cgraph">
<area shape="rect" id="node2" href="../../d6/d39/group__fop.html#gaef54b6768d7bb551b0e8223f365f0943" title="m0_fop_opcode" alt="" coords="412,8,527,34"/>
<area shape="rect" id="node3" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="425,109,514,136"/>
<area shape="rect" id="node4" href="../../d6/d39/group__fop.html#gad880caddbfb81a251493c2f973bbe4f6" title="m0_fop_reply_alloc" alt="" coords="229,84,364,110"/>
<area shape="rect" id="node5" href="../../d7/ded/group__memory.html#ga0b8533a3024754008602759e71337eb3" title="m0_free" alt="" coords="262,134,331,161"/>
<area shape="rect" id="node6" href="../../d1/d59/group__fom.html#gaa8d2269a41daa6b2913cf8b18eefbfcc" title="m0_fom_init" alt="" coords="250,33,343,60"/>
<area shape="rect" id="node7" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="263,236,330,262"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/df5/fsync__foms_8c_afc3ac2b4d399995df9eed8599eb02446_icgraph.png" border="0" usemap="#dc/df5/fsync__foms_8c_afc3ac2b4d399995df9eed8599eb02446_icgraph" alt=""/></div>
<map name="dc/df5/fsync__foms_8c_afc3ac2b4d399995df9eed8599eb02446_icgraph" id="dc/df5/fsync__foms_8c_afc3ac2b4d399995df9eed8599eb02446_icgraph">
<area shape="rect" id="node2" href="../../d7/d93/mdservice_2ut_2mdstore_8c.html#a6f1c0745c8b054ab4cedcb4d8017acf9" title="ut_fsync_create_fom" alt="" coords="229,5,373,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a5c08eac82236372ec7e6a811a3798953"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c08eac82236372ec7e6a811a3798953">&#9670;&nbsp;</a></span>fsync_fom_ops</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d6/dda/structm0__fom__ops.html">m0_fom_ops</a> fsync_fom_ops</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">        .fo_fini          = <a class="code" href="../../dc/df5/fsync__foms_8c.html#ad528c3e1562764bc9a0ff3625a03bd68">fsync_fom_fini</a>,</div><div class="line">        .fo_tick          = <a class="code" href="../../dc/df5/fsync__foms_8c.html#a3d92cfbd67dc7ba832f8441b5b4ec8c4">fsync_fom_tick</a>,</div><div class="line">        .fo_home_locality = <a class="code" href="../../dc/df5/fsync__foms_8c.html#a8d22c701ea40c4380c3ff1935d0e4cf9">fsync_fom_locality_get</a></div><div class="line">}</div><div class="ttc" id="fsync__foms_8c_html_ad528c3e1562764bc9a0ff3625a03bd68"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#ad528c3e1562764bc9a0ff3625a03bd68">fsync_fom_fini</a></div><div class="ttdeci">static void fsync_fom_fini(struct m0_fom *fom)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00321">fsync_foms.c:321</a></div></div>
<div class="ttc" id="fsync__foms_8c_html_a8d22c701ea40c4380c3ff1935d0e4cf9"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#a8d22c701ea40c4380c3ff1935d0e4cf9">fsync_fom_locality_get</a></div><div class="ttdeci">static size_t fsync_fom_locality_get(const struct m0_fom *fom)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00308">fsync_foms.c:308</a></div></div>
<div class="ttc" id="fsync__foms_8c_html_a3d92cfbd67dc7ba832f8441b5b4ec8c4"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#a3d92cfbd67dc7ba832f8441b5b4ec8c4">fsync_fom_tick</a></div><div class="ttdeci">static int fsync_fom_tick(struct m0_fom *fom)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00174">fsync_foms.c:174</a></div></div>
</div><!-- fragment --><p>fsync fom operations </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00051">51</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>

</div>
</div>
<a id="aff960f5714ef287f928cc6d6aa4ab32d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff960f5714ef287f928cc6d6aa4ab32d">&#9670;&nbsp;</a></span>fsync_fom_phases_trans</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/dd9/structm0__sm__trans__descr.html">m0_sm_trans_descr</a> fsync_fom_phases_trans[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">        [<a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(<a class="code" href="../../d1/d59/group__fom.html#ga4a45b264a79717f769f849b912290cc6">m0_generic_phases_trans</a>)] =</div><div class="line">        { <span class="stringliteral">&quot;tx wait&quot;</span>,      <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa">M0_FOPH_FSYNC_FOM_START</a>, <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>},</div><div class="line">        { <span class="stringliteral">&quot;start tx=0&quot;</span>,   <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa">M0_FOPH_FSYNC_FOM_START</a>, <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a>},</div><div class="line">        { <span class="stringliteral">&quot;start failed&quot;</span>, <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa">M0_FOPH_FSYNC_FOM_START</a>, <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a">M0_FOPH_FAILURE</a>},</div><div class="line">        { <span class="stringliteral">&quot;no wait&quot;</span>,      <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa">M0_FOPH_FSYNC_FOM_START</a>, <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b">M0_FOPH_SUCCESS</a>},</div><div class="line">        { <span class="stringliteral">&quot;wait failed&quot;</span>,  <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>,  <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a">M0_FOPH_FAILURE</a>},</div><div class="line">        { <span class="stringliteral">&quot;wait more&quot;</span>,    <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>,  <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>},</div><div class="line">        { <span class="stringliteral">&quot;wait done&quot;</span>,    <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>,  <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b">M0_FOPH_SUCCESS</a>},</div><div class="line">        { <span class="stringliteral">&quot;sync&quot;</span>,         <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>,  <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a>},</div><div class="line">        { <span class="stringliteral">&quot;sync done&quot;</span>,    <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a>,  <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b">M0_FOPH_SUCCESS</a>},</div><div class="line">        { <span class="stringliteral">&quot;sync failed&quot;</span>,  <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a>,  <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a">M0_FOPH_FAILURE</a>},</div><div class="line">}</div><div class="ttc" id="fom__generic_8h_html_a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a"><div class="ttname"><a href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a">M0_FOPH_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dab/fom__generic_8h_source.html#l00084">fom_generic.h:84</a></div></div>
<div class="ttc" id="fsync__foms_8c_html_a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00062">fsync_foms.c:62</a></div></div>
<div class="ttc" id="fsync__foms_8c_html_a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00063">fsync_foms.c:63</a></div></div>
<div class="ttc" id="fom__generic_8h_html_a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b"><div class="ttname"><a href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b">M0_FOPH_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dab/fom__generic_8h_source.html#l00074">fom_generic.h:74</a></div></div>
<div class="ttc" id="fsync__foms_8c_html_a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa">M0_FOPH_FSYNC_FOM_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00061">fsync_foms.c:61</a></div></div>
<div class="ttc" id="group__fom_html_ga4a45b264a79717f769f849b912290cc6"><div class="ttname"><a href="../../d1/d59/group__fom.html#ga4a45b264a79717f769f849b912290cc6">m0_generic_phases_trans</a></div><div class="ttdeci">struct m0_sm_trans_descr m0_generic_phases_trans[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/ded/fom__generic_8c_source.html#l00765">fom_generic.c:765</a></div></div>
<div class="ttc" id="lib_2user__space_2misc_8h_html_a25f003de16c08a4888b69f619d70f427"><div class="ttname"><a href="../../db/df8/lib_2user__space_2misc_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df8/lib_2user__space_2misc_8h_source.html#l00045">misc.h:45</a></div></div>
</div><!-- fragment --><p>Valid phase transitions for an fsync fom. </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00094">94</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>

</div>
</div>
<a id="a307c12fb53b8967f47ac1eb3c6560de6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a307c12fb53b8967f47ac1eb3c6560de6">&#9670;&nbsp;</a></span>m0_fsync_fom_conf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL struct <a class="el" href="../../de/dbb/structm0__sm__conf.html">m0_sm_conf</a> m0_fsync_fom_conf</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">        .scf_name      = <span class="stringliteral">&quot;fsync&quot;</span>,</div><div class="line">        .scf_nr_states = <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(<a class="code" href="../../dc/df5/fsync__foms_8c.html#a11badd7cc1ee28f6b3e1c5f0d8dddaa7">m0_fsync_fom_phases</a>),</div><div class="line">        .scf_state     = <a class="code" href="../../dc/df5/fsync__foms_8c.html#a11badd7cc1ee28f6b3e1c5f0d8dddaa7">m0_fsync_fom_phases</a>,</div><div class="line">        .scf_trans_nr  = <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a>(<a class="code" href="../../dc/df5/fsync__foms_8c.html#aff960f5714ef287f928cc6d6aa4ab32d">fsync_fom_phases_trans</a>),</div><div class="line">        .scf_trans     = <a class="code" href="../../dc/df5/fsync__foms_8c.html#aff960f5714ef287f928cc6d6aa4ab32d">fsync_fom_phases_trans</a>,</div><div class="line">}</div><div class="ttc" id="fsync__foms_8c_html_a11badd7cc1ee28f6b3e1c5f0d8dddaa7"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#a11badd7cc1ee28f6b3e1c5f0d8dddaa7">m0_fsync_fom_phases</a></div><div class="ttdeci">struct m0_sm_state_descr m0_fsync_fom_phases[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00069">fsync_foms.c:69</a></div></div>
<div class="ttc" id="fsync__foms_8c_html_aff960f5714ef287f928cc6d6aa4ab32d"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#aff960f5714ef287f928cc6d6aa4ab32d">fsync_fom_phases_trans</a></div><div class="ttdeci">static struct m0_sm_trans_descr fsync_fom_phases_trans[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00094">fsync_foms.c:94</a></div></div>
<div class="ttc" id="lib_2user__space_2misc_8h_html_a25f003de16c08a4888b69f619d70f427"><div class="ttname"><a href="../../db/df8/lib_2user__space_2misc_8h.html#a25f003de16c08a4888b69f619d70f427">ARRAY_SIZE</a></div><div class="ttdeci">#define ARRAY_SIZE(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df8/lib_2user__space_2misc_8h_source.html#l00045">misc.h:45</a></div></div>
</div><!-- fragment --><p>This object defines the phases of an fsync fom. It is used when initializing an fsync fom.</p>
<p>An fsync fom has two different phases: </p><pre class="fragment"> - M0_FOPH_FSYNC_FOM_START: This is the initial state for any fsync fom.
 In this phase, the fom knows its tick function has not been invoked
 before. Only if the fsync request includes the M0_FSYNC_MODE_ACTIVE
 mode, the target transaction is forced. In any case, after the first
 tick the machine's phase changes to M0_FOPH_FSYNC_FOM_WAIT.

 - M0_FOPH_FSYNC_FOM_WAIT: The fom waits on the target transaction until
 its state changes to M0_BTS_LOGGED.</pre> 
<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00123">123</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>

</div>
</div>
<a id="a11badd7cc1ee28f6b3e1c5f0d8dddaa7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11badd7cc1ee28f6b3e1c5f0d8dddaa7">&#9670;&nbsp;</a></span>m0_fsync_fom_phases</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../da/d29/structm0__sm__state__descr.html">m0_sm_state_descr</a> m0_fsync_fom_phases[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">        [<a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa">M0_FOPH_FSYNC_FOM_START</a>] = {</div><div class="line">                .sd_name    = <span class="stringliteral">&quot;start&quot;</span>,</div><div class="line">                .sd_allowed = <a class="code" href="../../df/d2a/lib_2misc_8h.html#ae644c20b9d43e4e0810716647b3d16be">M0_BITS</a>(<a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>,</div><div class="line">                                      <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a>,</div><div class="line">                                      <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b">M0_FOPH_SUCCESS</a>,</div><div class="line">                                      <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a">M0_FOPH_FAILURE</a>)</div><div class="line">        },</div><div class="line">        [<a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>] = {</div><div class="line">                .sd_name    = <span class="stringliteral">&quot;wait&quot;</span>,</div><div class="line">                .sd_allowed = <a class="code" href="../../df/d2a/lib_2misc_8h.html#ae644c20b9d43e4e0810716647b3d16be">M0_BITS</a>(<a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a">M0_FOPH_FAILURE</a>,</div><div class="line">                                      <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a>,</div><div class="line">                                      <a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a>,</div><div class="line">                                      <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b">M0_FOPH_SUCCESS</a>)</div><div class="line">        },</div><div class="line">        [<a class="code" href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a>] = {</div><div class="line">                .sd_name    = <span class="stringliteral">&quot;datasync&quot;</span>,</div><div class="line">                .sd_allowed = <a class="code" href="../../df/d2a/lib_2misc_8h.html#ae644c20b9d43e4e0810716647b3d16be">M0_BITS</a>(<a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a">M0_FOPH_FAILURE</a>,</div><div class="line">                                      <a class="code" href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b">M0_FOPH_SUCCESS</a>)</div><div class="line">        },</div><div class="line">}</div><div class="ttc" id="fom__generic_8h_html_a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a"><div class="ttname"><a href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa3377e1fbc449c37e7f70808a07ba526a">M0_FOPH_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dab/fom__generic_8h_source.html#l00084">fom_generic.h:84</a></div></div>
<div class="ttc" id="lib_2misc_8h_html_ae644c20b9d43e4e0810716647b3d16be"><div class="ttname"><a href="../../df/d2a/lib_2misc_8h.html#ae644c20b9d43e4e0810716647b3d16be">M0_BITS</a></div><div class="ttdeci">#define M0_BITS(...)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2a/lib_2misc_8h_source.html#l00236">misc.h:236</a></div></div>
<div class="ttc" id="fsync__foms_8c_html_a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3dadd26b2371bf8aa80879261d82f87cbd5">M0_FOPH_FSYNC_FOM_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00062">fsync_foms.c:62</a></div></div>
<div class="ttc" id="fsync__foms_8c_html_a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da634dc6264d1f6fbe8767489edb3131fd">M0_FOPH_FSYNC_DATASYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00063">fsync_foms.c:63</a></div></div>
<div class="ttc" id="fom__generic_8h_html_a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b"><div class="ttname"><a href="../../d0/dab/fom__generic_8h.html#a9bdcd08824d91256bba79487cab478caa0f2a414596916adc48230665851a3c4b">M0_FOPH_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dab/fom__generic_8h_source.html#l00074">fom_generic.h:74</a></div></div>
<div class="ttc" id="fsync__foms_8c_html_a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa"><div class="ttname"><a href="../../dc/df5/fsync__foms_8c.html#a87ec79620bcfb6137d988f2a3e73cd3da2c856ba199d7cbe2873d100eb454b8fa">M0_FOPH_FSYNC_FOM_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df5/fsync__foms_8c_source.html#l00061">fsync_foms.c:61</a></div></div>
</div><!-- fragment --><p>Phases of an fsync fom </p>

<p class="definition">Definition at line <a class="el" href="../../dc/df5/fsync__foms_8c_source.html#l00069">69</a> of file <a class="el" href="../../dc/df5/fsync__foms_8c_source.html">fsync_foms.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_2478e6f09f911031b35068659243fe18.html">mdservice</a></li><li class="navelem"><a class="el" href="../../dc/df5/fsync__foms_8c.html">fsync_foms.c</a></li>
    <li class="footer">Generated on Fri May 20 2022 10:35:20 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
