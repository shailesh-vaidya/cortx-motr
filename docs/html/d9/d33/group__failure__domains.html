<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: Failure Domains</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/d33/group__failure__domains.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Failure Domains</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d56/structm0__fd__tile__cell.html">m0_fd_tile_cell</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dea/structm0__fd__tile.html">m0_fd_tile</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d48/structm0__fd__perm__cache.html">m0_fd_perm_cache</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d90/structm0__fd__cache__info.html">m0_fd_cache_info</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/structm0__fd__tree.html">m0_fd_tree</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d81/structm0__fd__tree__node.html">m0_fd_tree_node</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga97b93a916457dedb91987eaa3e44d37e"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#ga97b93a916457dedb91987eaa3e44d37e">m0_fd_tolerance_check</a> (struct <a class="el" href="../../d1/d8e/structm0__conf__pver.html">m0_conf_pver</a> *<a class="el" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#abca09bfc08dbedfd274735f1a0f3ed10">pv</a>, uint32_t *failure_level)</td></tr>
<tr class="separator:ga97b93a916457dedb91987eaa3e44d37e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6eef06c1deefcc1c0da2ad43851bb4e2"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#ga6eef06c1deefcc1c0da2ad43851bb4e2">m0_fd_tile_build</a> (const struct <a class="el" href="../../d1/d8e/structm0__conf__pver.html">m0_conf_pver</a> *<a class="el" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#abca09bfc08dbedfd274735f1a0f3ed10">pv</a>, struct <a class="el" href="../../dd/d2c/structm0__pool__version.html">m0_pool_version</a> *<a class="el" href="../../df/ded/ut_2fd_8c.html#acdbb2d4076314c206d2792faf57b151b">pool_ver</a>, uint32_t *failure_level)</td></tr>
<tr class="separator:ga6eef06c1deefcc1c0da2ad43851bb4e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa491195319c6d1195aa6a812c433146b"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#gaa491195319c6d1195aa6a812c433146b">m0_fd_tile_destroy</a> (struct <a class="el" href="../../d6/dea/structm0__fd__tile.html">m0_fd_tile</a> *tile)</td></tr>
<tr class="separator:gaa491195319c6d1195aa6a812c433146b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4386d98fb176ff799a86ee80ddfde685"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#ga4386d98fb176ff799a86ee80ddfde685">m0_fd_src_to_tgt</a> (const struct <a class="el" href="../../d6/dea/structm0__fd__tile.html">m0_fd_tile</a> *tile, const struct <a class="el" href="../../dc/d68/structm0__pdclust__src__addr.html">m0_pdclust_src_addr</a> *<a class="el" href="../../d9/d5b/repair_2ut_2xform_8c.html#ab2bc5728a520e102f9b313443b7acc80">src</a>, struct <a class="el" href="../../da/d36/structm0__pdclust__tgt__addr.html">m0_pdclust_tgt_addr</a> *<a class="el" href="../../df/ded/ut_2fd_8c.html#a71c20dda6f28285e2e67284efccaf3dc">tgt</a>)</td></tr>
<tr class="separator:ga4386d98fb176ff799a86ee80ddfde685"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14b7ae7e2e71454ce48aae0cba81fe32"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#ga14b7ae7e2e71454ce48aae0cba81fe32">m0_fd_tgt_to_src</a> (const struct <a class="el" href="../../d6/dea/structm0__fd__tile.html">m0_fd_tile</a> *tile, const struct <a class="el" href="../../da/d36/structm0__pdclust__tgt__addr.html">m0_pdclust_tgt_addr</a> *<a class="el" href="../../df/ded/ut_2fd_8c.html#a71c20dda6f28285e2e67284efccaf3dc">tgt</a>, struct <a class="el" href="../../dc/d68/structm0__pdclust__src__addr.html">m0_pdclust_src_addr</a> *<a class="el" href="../../d9/d5b/repair_2ut_2xform_8c.html#ab2bc5728a520e102f9b313443b7acc80">src</a>)</td></tr>
<tr class="separator:ga14b7ae7e2e71454ce48aae0cba81fe32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1cdc41d7d9f5ea939005e501cf971818"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#ga1cdc41d7d9f5ea939005e501cf971818">m0_fd_tree_build</a> (const struct <a class="el" href="../../d1/d8e/structm0__conf__pver.html">m0_conf_pver</a> *<a class="el" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#abca09bfc08dbedfd274735f1a0f3ed10">pv</a>, struct <a class="el" href="../../dd/d94/structm0__fd__tree.html">m0_fd_tree</a> *tree)</td></tr>
<tr class="separator:ga1cdc41d7d9f5ea939005e501cf971818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga437e63b729ecb8eec3dcebaa7d1229b3"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#ga437e63b729ecb8eec3dcebaa7d1229b3">m0_fd_tree_destroy</a> (struct <a class="el" href="../../dd/d94/structm0__fd__tree.html">m0_fd_tree</a> *tree)</td></tr>
<tr class="separator:ga437e63b729ecb8eec3dcebaa7d1229b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3d49961d155e7c76f8285ebc7a388d2a"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#ga3d49961d155e7c76f8285ebc7a388d2a">m0_fd_fwd_map</a> (struct <a class="el" href="../../d9/d8c/structm0__pdclust__instance.html">m0_pdclust_instance</a> *<a class="el" href="../../df/ded/ut_2fd_8c.html#adfb924096de5c419246512d22e5be551">pi</a>, const struct <a class="el" href="../../dc/d68/structm0__pdclust__src__addr.html">m0_pdclust_src_addr</a> *<a class="el" href="../../d9/d5b/repair_2ut_2xform_8c.html#ab2bc5728a520e102f9b313443b7acc80">src</a>, struct <a class="el" href="../../da/d36/structm0__pdclust__tgt__addr.html">m0_pdclust_tgt_addr</a> *<a class="el" href="../../df/ded/ut_2fd_8c.html#a71c20dda6f28285e2e67284efccaf3dc">tgt</a>)</td></tr>
<tr class="separator:ga3d49961d155e7c76f8285ebc7a388d2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga66132eec8e0fd28d20197ad6760fc359"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#ga66132eec8e0fd28d20197ad6760fc359">m0_fd_bwd_map</a> (struct <a class="el" href="../../d9/d8c/structm0__pdclust__instance.html">m0_pdclust_instance</a> *<a class="el" href="../../df/ded/ut_2fd_8c.html#adfb924096de5c419246512d22e5be551">pi</a>, const struct <a class="el" href="../../da/d36/structm0__pdclust__tgt__addr.html">m0_pdclust_tgt_addr</a> *<a class="el" href="../../df/ded/ut_2fd_8c.html#a71c20dda6f28285e2e67284efccaf3dc">tgt</a>, struct <a class="el" href="../../dc/d68/structm0__pdclust__src__addr.html">m0_pdclust_src_addr</a> *<a class="el" href="../../d9/d5b/repair_2ut_2xform_8c.html#ab2bc5728a520e102f9b313443b7acc80">src</a>)</td></tr>
<tr class="separator:ga66132eec8e0fd28d20197ad6760fc359"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3fd141456731e480e7dbe603b032f5c8"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#ga3fd141456731e480e7dbe603b032f5c8">m0_fd_perm_cache_init</a> (struct <a class="el" href="../../dd/d48/structm0__fd__perm__cache.html">m0_fd_perm_cache</a> *<a class="el" href="../../d1/df6/structcache.html">cache</a>, uint64_t len)</td></tr>
<tr class="separator:ga3fd141456731e480e7dbe603b032f5c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae209cce512cc16338b35abcde35174ab"><td class="memItemLeft" align="right" valign="top">M0_INTERNAL void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d33/group__failure__domains.html#gae209cce512cc16338b35abcde35174ab">m0_fd_perm_cache_fini</a> (struct <a class="el" href="../../dd/d48/structm0__fd__perm__cache.html">m0_fd_perm_cache</a> *<a class="el" href="../../d1/df6/structcache.html">cache</a>)</td></tr>
<tr class="separator:gae209cce512cc16338b35abcde35174ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="DLD-failure-domains-intro"></a>
Overview</h1>
<p>A parity declustered layout divides a file into a collection of parity groups. Each parity group has N number of data units, K number of parity units, and S spare units, where S &gt;= K. A parity declustered layout de-clusters these parity groups across the available pool of hardware resources, in such a way that:</p><ul>
<li>load per hardware resource is minimal in case of failure of any of the h/w resource.</li>
<li>load across all h/w resources is as uniform as possible.</li>
</ul>
<p>A pool of h/w resources includes (but is not restricted to) racks, enclosures, controllers, and disks. These resources form a hierarchical structure that forms a tree. We call each of these resources a failure-domain.</p>
<h1><a class="anchor" id="DLD-failure-domains-def"></a>
Definitions</h1>
<ul>
<li>Failure domain: Any h/w resource failure of which can cause a loss of a file data is called as a failure domain.</li>
<li>Failure domain tree: A hierarchical topology in which failure domains are arranged is called a failure domain tree.</li>
<li>Tolerance constraint: A vector of the size of height of failure domain tree, i^th member of which represents expected tolerable failures at that level of failure domain tree.</li>
<li>Base tile: When parity groups from a tile are laid down sequentially over available pool of targets then we call such arrangement a base tile.</li>
<li>Fault tolerant tile: A fault-tolerant permutation of base tile, that is applicable to all tiles across all files.</li>
</ul>
<h1><a class="anchor" id="DLD-failure-domains-highlights"></a>
Design Highlights</h1>
<p>We aim to address two key issues:</p><ul>
<li>ensure that parity groups are declustered across the pool of resources such that user provided tolerance constraint is supported.</li>
<li>data is distributed in such a way that load balancing is achieved during IO and repair of data.</li>
</ul>
<p>Failure domains algorithm achieves the first goal by creating a fault tolerant tile, mapping of which will be common across all tiles across all files. This tile is created only once, when pool version is built. The second objective is attained by applying a sequence of cascaded permutations to units from the fault tolerant tile, one at each level of failure domains tree. These permutations are applied when IO or SNS-repair require to map a parity group and unit, to target and frame (and vice versa).</p>
<p>HLD : For documentation links, please refer to this file : doc/motr-design-doc-list.rst</p>
<h1><a class="anchor" id="DLD-failure-domains-req"></a>
Requirements</h1>
<p><b>r.conf.pool.pool_version.fault_tolerant_permutation</b> Implementation must generate a fault tolerant permutation of base tile that guarantees the required tolerance constraint for failure domains.</p>
<h1><a class="anchor" id="DLD-failure-domains-dep"></a>
Dependencies</h1>
<p>Pools in confc: Pools in confc are required in order to create a fault-tolerant tile. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga66132eec8e0fd28d20197ad6760fc359"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga66132eec8e0fd28d20197ad6760fc359">&#9670;&nbsp;</a></span>m0_fd_bwd_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_fd_bwd_map </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d8c/structm0__pdclust__instance.html">m0_pdclust_instance</a> *&#160;</td>
          <td class="paramname"><em>pi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/d36/structm0__pdclust__tgt__addr.html">m0_pdclust_tgt_addr</a> *&#160;</td>
          <td class="paramname"><em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d68/structm0__pdclust__src__addr.html">m0_pdclust_src_addr</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maps a target and frame from the pool version, to appropriate parity group and its unit. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pi</td><td>Parity declustered layout instance for a particular file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tgt</td><td>Target and frame to be maped. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">src</td><td>Parity group adn unit to which tgt maps. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00959">959</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga66132eec8e0fd28d20197ad6760fc359_cgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga66132eec8e0fd28d20197ad6760fc359_cgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga66132eec8e0fd28d20197ad6760fc359_cgraph" id="d9/d33/group__failure__domains_ga66132eec8e0fd28d20197ad6760fc359_cgraph">
<area shape="rect" id="node2" href="../../d4/da4/fd_8c.html#a383465cfb795c24a3924e23440d93fab" title="pool_ver_get" alt="" coords="397,15,493,41"/>
<area shape="rect" id="node3" href="../../db/dc9/group__arith.html#ga037100647ff38c8963b304045ca3ea91" title="m0_dec" alt="" coords="411,91,479,117"/>
<area shape="rect" id="node4" href="../../d4/da4/fd_8c.html#ad630a2fb6151f9caeb7bf25d2718d1e3" title="inverse_permuted_idx_get" alt="" coords="175,27,349,53"/>
<area shape="rect" id="node5" href="../../d9/d33/group__failure__domains.html#ga14b7ae7e2e71454ce48aae0cba81fe32" title="m0_fd_tgt_to_src" alt="" coords="201,128,323,155"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga66132eec8e0fd28d20197ad6760fc359_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga66132eec8e0fd28d20197ad6760fc359_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga66132eec8e0fd28d20197ad6760fc359_icgraph" id="d9/d33/group__failure__domains_ga66132eec8e0fd28d20197ad6760fc359_icgraph">
<area shape="rect" id="node2" href="../../df/ded/ut_2fd_8c.html#a160de87dd39fd2cad4b974d9975ffa18" title="fd_mapping_check" alt="" coords="199,5,330,32"/>
<area shape="rect" id="node3" href="../../d0/dec/m0t1fs_2linux__kernel_2file_8c.html#af17612ee4d780f8bf7a20c6fe41b8007" title="pargrp_src_addr" alt="" coords="207,56,322,83"/>
<area shape="rect" id="node4" href="../../da/d03/m0t1fs_2linux__kernel_2ut_2file_8c.html#a67185937a057c1233131e9fc1976477d" title="dgmode_readio_test" alt="" coords="403,81,541,108"/>
<area shape="rect" id="node5" href="../../d3/d25/group___s_n_s_c_m_f_i_l_e.html#ga6f05500127eb55be15eecdfbac3e23a1" title="_max_group_set" alt="" coords="205,157,324,184"/>
<area shape="rect" id="node6" href="../../d3/d25/group___s_n_s_c_m_f_i_l_e.html#ga48db503783d14048a5a5aef21e3cfb31" title="m0_sns_cm_file_bwd_map" alt="" coords="175,208,355,235"/>
<area shape="rect" id="node7" href="../../d7/d0c/parity__repair_8c.html#a03471b637e90104f0026dc4cc6cedebc" title="frame_eq" alt="" coords="227,259,303,285"/>
<area shape="rect" id="node8" href="../../d9/d59/parity__repair_8h.html#a38cc03448ae4f6b0cb740199657085ca" title="m0_sns_repair_data_map" alt="" coords="179,309,350,336"/>
</map>
</div>

</div>
</div>
<a id="ga3d49961d155e7c76f8285ebc7a388d2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3d49961d155e7c76f8285ebc7a388d2a">&#9670;&nbsp;</a></span>m0_fd_fwd_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_fd_fwd_map </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d8c/structm0__pdclust__instance.html">m0_pdclust_instance</a> *&#160;</td>
          <td class="paramname"><em>pi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d68/structm0__pdclust__src__addr.html">m0_pdclust_src_addr</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d36/structm0__pdclust__tgt__addr.html">m0_pdclust_tgt_addr</a> *&#160;</td>
          <td class="paramname"><em>tgt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maps the source parity group and parity unit to appropriate target and a frame from the pool version. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pi</td><td>Parity declustered layout instance for a particular file. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>Parity group and unit to be mapped. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tgt</td><td>Target to which src maps. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00838">838</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga3d49961d155e7c76f8285ebc7a388d2a_cgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga3d49961d155e7c76f8285ebc7a388d2a_cgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga3d49961d155e7c76f8285ebc7a388d2a_cgraph" id="d9/d33/group__failure__domains_ga3d49961d155e7c76f8285ebc7a388d2a_cgraph">
<area shape="rect" id="node2" href="../../d4/da4/fd_8c.html#a383465cfb795c24a3924e23440d93fab" title="pool_ver_get" alt="" coords="343,12,439,39"/>
<area shape="rect" id="node3" href="../../d9/d33/group__failure__domains.html#ga4386d98fb176ff799a86ee80ddfde685" title="m0_fd_src_to_tgt" alt="" coords="172,75,295,102"/>
<area shape="rect" id="node4" href="../../db/dc9/group__arith.html#ga037100647ff38c8963b304045ca3ea91" title="m0_dec" alt="" coords="357,88,425,115"/>
<area shape="rect" id="node5" href="../../d4/da4/fd_8c.html#aa5f036ef4f5dd4bf0ec0370ffa0ca797" title="permuted_tgt_get" alt="" coords="172,24,295,51"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga3d49961d155e7c76f8285ebc7a388d2a_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga3d49961d155e7c76f8285ebc7a388d2a_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga3d49961d155e7c76f8285ebc7a388d2a_icgraph" id="d9/d33/group__failure__domains_ga3d49961d155e7c76f8285ebc7a388d2a_icgraph">
<area shape="rect" id="node2" href="../../dd/d33/group__dix.html#ga380e069ac3fdb22986c9df6ca28c007f" title="m0_dix_target" alt="" coords="209,5,313,32"/>
<area shape="rect" id="node3" href="../../df/ded/ut_2fd_8c.html#a160de87dd39fd2cad4b974d9975ffa18" title="fd_mapping_check" alt="" coords="195,56,326,83"/>
<area shape="rect" id="node4" href="../../df/ded/ut_2fd_8c.html#a8ddfa3b94b6382599f722f7fd8d7d788" title="fd_tolerance_check" alt="" coords="193,107,328,133"/>
<area shape="rect" id="node5" href="../../d0/dec/m0t1fs_2linux__kernel_2file_8c.html#aa80f74daeb84c939558fd4f32c6f22b0" title="unit_state" alt="" coords="221,157,300,184"/>
<area shape="rect" id="node6" href="../../d0/dec/m0t1fs_2linux__kernel_2file_8c.html#a868fe96209a5da63122469af0fea932b" title="nw_xfer_tioreq_map" alt="" coords="191,208,330,235"/>
<area shape="rect" id="node7" href="../../da/d03/m0t1fs_2linux__kernel_2ut_2file_8c.html#a2ca76a13db6ed67076a6c34a24c29b88" title="ds_test" alt="" coords="228,259,293,285"/>
<area shape="rect" id="node8" href="../../da/d03/m0t1fs_2linux__kernel_2ut_2file_8c.html#a5a0bd22e448f85edf59192ea3e3cd2c0" title="target_ioreq_test" alt="" coords="201,309,320,336"/>
<area shape="rect" id="node9" href="../../d3/d25/group___s_n_s_c_m_f_i_l_e.html#ga825630e73647053c800600f8a691263f" title="m0_sns_cm_file_fwd_map" alt="" coords="172,360,349,387"/>
<area shape="rect" id="node10" href="../../d5/d8c/group__reqh.html#ga2ffe904963370b57917c48d7fc4aaacf" title="m0_reqh_mdpool_service\l_index_to_session" alt="" coords="175,411,346,453"/>
<area shape="rect" id="node11" href="../../d7/d0c/parity__repair_8c.html#aaa17eafd99da6294961848a6e1b9efbb" title="device_index_get" alt="" coords="199,477,322,504"/>
<area shape="rect" id="node12" href="../../d9/d59/parity__repair_8h.html#a38cc03448ae4f6b0cb740199657085ca" title="m0_sns_repair_data_map" alt="" coords="175,528,346,555"/>
</map>
</div>

</div>
</div>
<a id="gae209cce512cc16338b35abcde35174ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae209cce512cc16338b35abcde35174ab">&#9670;&nbsp;</a></span>m0_fd_perm_cache_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_fd_perm_cache_fini </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d48/structm0__fd__perm__cache.html">m0_fd_perm_cache</a> *&#160;</td>
          <td class="paramname"><em>cache</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees the internal arrays from the permutation cache. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00825">825</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_gae209cce512cc16338b35abcde35174ab_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_gae209cce512cc16338b35abcde35174ab_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_gae209cce512cc16338b35abcde35174ab_icgraph" id="d9/d33/group__failure__domains_gae209cce512cc16338b35abcde35174ab_icgraph">
<area shape="rect" id="node2" href="../../df/d01/group__pdclust.html#gad0bd7f0b340925516cc60fce81e1480f" title="m0_pdclust_perm_cache\l_destroy" alt="" coords="213,5,380,47"/>
</map>
</div>

</div>
</div>
<a id="ga3fd141456731e480e7dbe603b032f5c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3fd141456731e480e7dbe603b032f5c8">&#9670;&nbsp;</a></span>m0_fd_perm_cache_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_fd_perm_cache_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d48/structm0__fd__perm__cache.html">m0_fd_perm_cache</a> *&#160;</td>
          <td class="paramname"><em>cache</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes the permutation cache to consistent values. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Total elements present in the cache. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00741">741</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga3fd141456731e480e7dbe603b032f5c8_cgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga3fd141456731e480e7dbe603b032f5c8_cgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga3fd141456731e480e7dbe603b032f5c8_cgraph" id="d9/d33/group__failure__domains_ga3fd141456731e480e7dbe603b032f5c8_cgraph">
<area shape="rect" id="node2" href="../../df/d01/group__pdclust.html#gafbcfdcf37a75f3f36ba493e06c91ed51" title="permute" alt="" coords="235,5,305,32"/>
<area shape="rect" id="node3" href="../../dd/d5f/group__fid.html#ga93e17e15f5e23270b07c6bf65f41e499" title="m0_fid_set" alt="" coords="227,56,313,83"/>
<area shape="rect" id="node4" href="../../df/dca/lib_2misc_8c.html#aa4f9b74ceb2eff5829e8c547939733c3" title="m0_uint128_init" alt="" coords="213,107,327,133"/>
<area shape="rect" id="node5" href="../../d4/da4/fd_8c.html#a4ab01ea66664feac687cb3f9317f46d1" title="fd_permute" alt="" coords="227,157,313,184"/>
<area shape="rect" id="node6" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="237,208,303,235"/>
<area shape="rect" id="node7" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a01283f6c481bc4a3d0f204e957179d6e" title="M0_ERR" alt="" coords="232,259,308,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga3fd141456731e480e7dbe603b032f5c8_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga3fd141456731e480e7dbe603b032f5c8_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga3fd141456731e480e7dbe603b032f5c8_icgraph" id="d9/d33/group__failure__domains_ga3fd141456731e480e7dbe603b032f5c8_icgraph">
<area shape="rect" id="node2" href="../../df/d01/group__pdclust.html#ga32a677725fdeb48d91f1004fe1ac038a" title="m0_pdclust_perm_cache\l_build" alt="" coords="213,5,380,47"/>
</map>
</div>

</div>
</div>
<a id="ga4386d98fb176ff799a86ee80ddfde685"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4386d98fb176ff799a86ee80ddfde685">&#9670;&nbsp;</a></span>m0_fd_src_to_tgt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_fd_src_to_tgt </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d6/dea/structm0__fd__tile.html">m0_fd_tile</a> *&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../dc/d68/structm0__pdclust__src__addr.html">m0_pdclust_src_addr</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d36/structm0__pdclust__tgt__addr.html">m0_pdclust_tgt_addr</a> *&#160;</td>
          <td class="paramname"><em>tgt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the target and frame at which the input unit from a given parity group is located. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tile</td><td>The failure permutation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>Parity group and a unit within it to be located in the tile. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tgt</td><td>Target and frame associated with the input src. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00547">547</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga4386d98fb176ff799a86ee80ddfde685_cgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga4386d98fb176ff799a86ee80ddfde685_cgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga4386d98fb176ff799a86ee80ddfde685_cgraph" id="d9/d33/group__failure__domains_ga4386d98fb176ff799a86ee80ddfde685_cgraph">
<area shape="rect" id="node2" href="../../d4/da4/fd_8c.html#a11b061bb80bc7833a486be3c69b8115d" title="fd_tile_invariant" alt="" coords="176,5,289,32"/>
<area shape="rect" id="node3" href="../../db/dc9/group__arith.html#ga037100647ff38c8963b304045ca3ea91" title="m0_dec" alt="" coords="199,56,267,83"/>
<area shape="rect" id="node4" href="../../db/dc9/group__arith.html#ga37693e681dd6803a29cf379a823c281c" title="m0_enc" alt="" coords="199,107,267,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga4386d98fb176ff799a86ee80ddfde685_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga4386d98fb176ff799a86ee80ddfde685_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga4386d98fb176ff799a86ee80ddfde685_icgraph" id="d9/d33/group__failure__domains_ga4386d98fb176ff799a86ee80ddfde685_icgraph">
<area shape="rect" id="node2" href="../../d9/d33/group__failure__domains.html#ga3d49961d155e7c76f8285ebc7a388d2a" title="m0_fd_fwd_map" alt="" coords="176,5,295,32"/>
<area shape="rect" id="node3" href="../../df/ded/ut_2fd_8c.html#ad1a8433e0db7eced5b5a9640a0c812f4" title="test_ft_mapping" alt="" coords="178,56,293,83"/>
</map>
</div>

</div>
</div>
<a id="ga14b7ae7e2e71454ce48aae0cba81fe32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga14b7ae7e2e71454ce48aae0cba81fe32">&#9670;&nbsp;</a></span>m0_fd_tgt_to_src()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_fd_tgt_to_src </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d6/dea/structm0__fd__tile.html">m0_fd_tile</a> *&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../da/d36/structm0__pdclust__tgt__addr.html">m0_pdclust_tgt_addr</a> *&#160;</td>
          <td class="paramname"><em>tgt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d68/structm0__pdclust__src__addr.html">m0_pdclust_src_addr</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the parity group and unit located at given target and frame. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tile</td><td>The failure permutation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tgt</td><td>The target and frame co-ordinates for the required parity group and unit. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">src</td><td>Parity group and unit located at given target and frame. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00571">571</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga14b7ae7e2e71454ce48aae0cba81fe32_cgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga14b7ae7e2e71454ce48aae0cba81fe32_cgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga14b7ae7e2e71454ce48aae0cba81fe32_cgraph" id="d9/d33/group__failure__domains_ga14b7ae7e2e71454ce48aae0cba81fe32_cgraph">
<area shape="rect" id="node2" href="../../d4/da4/fd_8c.html#a11b061bb80bc7833a486be3c69b8115d" title="fd_tile_invariant" alt="" coords="176,5,289,32"/>
<area shape="rect" id="node3" href="../../db/dc9/group__arith.html#ga037100647ff38c8963b304045ca3ea91" title="m0_dec" alt="" coords="199,56,267,83"/>
<area shape="rect" id="node4" href="../../db/dc9/group__arith.html#ga37693e681dd6803a29cf379a823c281c" title="m0_enc" alt="" coords="199,107,267,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga14b7ae7e2e71454ce48aae0cba81fe32_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga14b7ae7e2e71454ce48aae0cba81fe32_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga14b7ae7e2e71454ce48aae0cba81fe32_icgraph" id="d9/d33/group__failure__domains_ga14b7ae7e2e71454ce48aae0cba81fe32_icgraph">
<area shape="rect" id="node2" href="../../d9/d33/group__failure__domains.html#ga66132eec8e0fd28d20197ad6760fc359" title="m0_fd_bwd_map" alt="" coords="176,5,297,32"/>
<area shape="rect" id="node3" href="../../df/ded/ut_2fd_8c.html#ad1a8433e0db7eced5b5a9640a0c812f4" title="test_ft_mapping" alt="" coords="179,56,294,83"/>
</map>
</div>

</div>
</div>
<a id="ga6eef06c1deefcc1c0da2ad43851bb4e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6eef06c1deefcc1c0da2ad43851bb4e2">&#9670;&nbsp;</a></span>m0_fd_tile_build()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_fd_tile_build </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d1/d8e/structm0__conf__pver.html">m0_conf_pver</a> *&#160;</td>
          <td class="paramname"><em>pv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d2c/structm0__pool__version.html">m0_pool_version</a> *&#160;</td>
          <td class="paramname"><em>pool_ver</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>failure_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates and prepares a fault tolerant tile for input pool version. Returns infeasibility in case tolerance constraint for the pool version can not be met. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pv</td><td>The pool version present in configuration. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">[in[</td><td>pool_ver In-memory representation of pv. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">failure_level</td><td>Failure_level holds the level for which required tolerance can not be met. In case of a success this value holds the depth of the symmetric tree formed from the input tree. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>On success. </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>When required tolerance can not be met. </td></tr>
    <tr><td class="paramname">-ENOMEM</td><td>When a tile can not be allocated. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00260">260</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga6eef06c1deefcc1c0da2ad43851bb4e2_cgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga6eef06c1deefcc1c0da2ad43851bb4e2_cgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga6eef06c1deefcc1c0da2ad43851bb4e2_cgraph" id="d9/d33/group__failure__domains_ga6eef06c1deefcc1c0da2ad43851bb4e2_cgraph">
<area shape="rect" id="node2" href="../../d2/dd9/group__conf__dlspec__cache.html#ga50c3482563d6b12e95e9e8deaa3543cf" title="m0_conf_cache_lock" alt="" coords="176,5,321,32"/>
<area shape="rect" id="node3" href="../../d4/da4/fd_8c.html#a58cc7e79c6ee74abd34fab1a3c0f0132" title="symm_tree_attr_get" alt="" coords="179,56,318,83"/>
<area shape="rect" id="node4" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="376,107,443,133"/>
<area shape="rect" id="node5" href="../../d2/dd9/group__conf__dlspec__cache.html#ga705be44669199a30f1ff7fabd449ff0e" title="m0_conf_cache_unlock" alt="" coords="169,157,328,184"/>
<area shape="rect" id="node6" href="../../d4/da4/fd_8c.html#a4dd25f4bf4a6da3895689adf6420f92b" title="m0_fd__tile_init" alt="" coords="192,208,305,235"/>
<area shape="rect" id="node7" href="../../d4/da4/fd_8c.html#aaf1e76613a33a0267689d5b06a780b36" title="m0_fd__tile_populate" alt="" coords="176,259,321,285"/>
<area shape="rect" id="node8" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#ad1c2b8b0cf1cc0d319e690c0bef9569e" title="M0_LEAVE" alt="" coords="204,309,293,336"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga6eef06c1deefcc1c0da2ad43851bb4e2_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga6eef06c1deefcc1c0da2ad43851bb4e2_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga6eef06c1deefcc1c0da2ad43851bb4e2_icgraph" id="d9/d33/group__failure__domains_ga6eef06c1deefcc1c0da2ad43851bb4e2_icgraph">
<area shape="rect" id="node2" href="../../dd/d7f/group__pool.html#ga0e3e0f4951cd2aacbe976207d1038140" title="m0_pool_version_init\l_by_conf" alt="" coords="169,5,313,47"/>
<area shape="rect" id="node3" href="../../df/ded/ut_2fd_8c.html#a4de9851397e52345e323b02f481700dd" title="test_pv2fd_conv" alt="" coords="182,71,301,98"/>
</map>
</div>

</div>
</div>
<a id="gaa491195319c6d1195aa6a812c433146b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa491195319c6d1195aa6a812c433146b">&#9670;&nbsp;</a></span>m0_fd_tile_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_fd_tile_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/dea/structm0__fd__tile.html">m0_fd_tile</a> *&#160;</td>
          <td class="paramname"><em>tile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Frees the memory allocated for the fault tolerant tile. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00590">590</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_gaa491195319c6d1195aa6a812c433146b_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_gaa491195319c6d1195aa6a812c433146b_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_gaa491195319c6d1195aa6a812c433146b_icgraph" id="d9/d33/group__failure__domains_gaa491195319c6d1195aa6a812c433146b_icgraph">
<area shape="rect" id="node2" href="../../dd/d7f/group__pool.html#ga4968a0b34e2f9c44b5152cf16a6c5d39" title="m0_pool_version_fini" alt="" coords="193,5,337,32"/>
<area shape="rect" id="node3" href="../../df/ded/ut_2fd_8c.html#a5ae6c52c70606376f7f6755157e9fa1e" title="test_fd_mapping_sanity" alt="" coords="185,56,345,83"/>
<area shape="rect" id="node4" href="../../df/ded/ut_2fd_8c.html#ad1a8433e0db7eced5b5a9640a0c812f4" title="test_ft_mapping" alt="" coords="208,107,323,133"/>
<area shape="rect" id="node5" href="../../df/ded/ut_2fd_8c.html#a4de9851397e52345e323b02f481700dd" title="test_pv2fd_conv" alt="" coords="206,157,325,184"/>
</map>
</div>

</div>
</div>
<a id="ga97b93a916457dedb91987eaa3e44d37e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97b93a916457dedb91987eaa3e44d37e">&#9670;&nbsp;</a></span>m0_fd_tolerance_check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_fd_tolerance_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d8e/structm0__conf__pver.html">m0_conf_pver</a> *&#160;</td>
          <td class="paramname"><em>pv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>failure_level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks the feasibility of required tolerance for various failure domains. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pv</td><td>The pool version in configuration, for which the tolerance of failure domains is to be checked. m0_conf_pver::pv_u.subtree.pvs_tolerance holds the required tolerances. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">failure_level</td><td>Indicates the level for which the input tolerance can not be supported, when returned value by the function is -EINVAL. In all other cases its value is undefined. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>On success. </td></tr>
    <tr><td class="paramname">-EINVAL</td><td>When tolerance can not be met. </td></tr>
    <tr><td class="paramname">-ENOMEM</td><td>When system is out of memory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>configuration cache should be locked. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00250">250</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga97b93a916457dedb91987eaa3e44d37e_cgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga97b93a916457dedb91987eaa3e44d37e_cgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga97b93a916457dedb91987eaa3e44d37e_cgraph" id="d9/d33/group__failure__domains_ga97b93a916457dedb91987eaa3e44d37e_cgraph">
<area shape="rect" id="node2" href="../../d4/da4/fd_8c.html#a58cc7e79c6ee74abd34fab1a3c0f0132" title="symm_tree_attr_get" alt="" coords="213,5,352,32"/>
<area shape="rect" id="node3" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="400,31,467,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga97b93a916457dedb91987eaa3e44d37e_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga97b93a916457dedb91987eaa3e44d37e_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga97b93a916457dedb91987eaa3e44d37e_icgraph" id="d9/d33/group__failure__domains_ga97b93a916457dedb91987eaa3e44d37e_icgraph">
<area shape="rect" id="node2" href="../../d0/dc5/group__conf-pvers.html#gaf1f4251087496517e707ec9c45fdc284" title="conf_pver_tolerance\l_adjust" alt="" coords="213,5,352,47"/>
</map>
</div>

</div>
</div>
<a id="ga1cdc41d7d9f5ea939005e501cf971818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1cdc41d7d9f5ea939005e501cf971818">&#9670;&nbsp;</a></span>m0_fd_tree_build()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL int m0_fd_tree_build </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d1/d8e/structm0__conf__pver.html">m0_conf_pver</a> *&#160;</td>
          <td class="paramname"><em>pv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d94/structm0__fd__tree.html">m0_fd_tree</a> *&#160;</td>
          <td class="paramname"><em>tree</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Bulds a failure domains tree using input pool version object from the configuration schema. The levels for which no failure can be tolerated are not present in this tree. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pv</td><td>Configuration object corresponding to the pool version. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tree</td><td>Holds the failure domains tree created using the pool version. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00598">598</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga1cdc41d7d9f5ea939005e501cf971818_cgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga1cdc41d7d9f5ea939005e501cf971818_cgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga1cdc41d7d9f5ea939005e501cf971818_cgraph" id="d9/d33/group__failure__domains_ga1cdc41d7d9f5ea939005e501cf971818_cgraph">
<area shape="rect" id="node2" href="../../d2/dd9/group__conf__dlspec__cache.html#ga50c3482563d6b12e95e9e8deaa3543cf" title="m0_conf_cache_lock" alt="" coords="194,5,339,32"/>
<area shape="rect" id="node3" href="../../d4/da4/fd_8c.html#a58cc7e79c6ee74abd34fab1a3c0f0132" title="symm_tree_attr_get" alt="" coords="197,107,336,133"/>
<area shape="rect" id="node4" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a9a02a790ad457506f9f3bc12121e6079" title="M0_RC" alt="" coords="411,157,478,184"/>
<area shape="rect" id="node5" href="../../d2/dd9/group__conf__dlspec__cache.html#ga705be44669199a30f1ff7fabd449ff0e" title="m0_conf_cache_unlock" alt="" coords="187,411,346,437"/>
<area shape="rect" id="node6" href="../../d7/ded/group__memory.html#ga80e6a4e9d078f93b5917555b7b3d3fec" title="m0_alloc" alt="" coords="407,335,482,361"/>
<area shape="rect" id="node7" href="../../db/dcd/m0t1fs_2linux__kernel_2dir_8c.html#a01283f6c481bc4a3d0f204e957179d6e" title="M0_ERR" alt="" coords="407,259,483,285"/>
<area shape="rect" id="node8" href="../../d7/d53/fd__internal_8h.html#a469a2b8d0cbc939bdf5f3fc5c1be6835" title="m0_fd__tree_root_create" alt="" coords="183,157,350,184"/>
<area shape="rect" id="node9" href="../../d4/da4/fd_8c.html#aa5b385f31cb4e06dc2da939232959b92" title="m0_fd__tree_level_populate" alt="" coords="175,309,359,336"/>
<area shape="rect" id="node10" href="../../d4/da4/fd_8c.html#a148604e7f3499ad16fda9a00cce59c1e" title="m0_fd__perm_cache_build" alt="" coords="178,208,355,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga1cdc41d7d9f5ea939005e501cf971818_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga1cdc41d7d9f5ea939005e501cf971818_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga1cdc41d7d9f5ea939005e501cf971818_icgraph" id="d9/d33/group__failure__domains_ga1cdc41d7d9f5ea939005e501cf971818_icgraph">
<area shape="rect" id="node2" href="../../dd/d7f/group__pool.html#ga0e3e0f4951cd2aacbe976207d1038140" title="m0_pool_version_init\l_by_conf" alt="" coords="175,5,319,47"/>
<area shape="rect" id="node3" href="../../df/ded/ut_2fd_8c.html#a4de9851397e52345e323b02f481700dd" title="test_pv2fd_conv" alt="" coords="187,71,306,98"/>
</map>
</div>

</div>
</div>
<a id="ga437e63b729ecb8eec3dcebaa7d1229b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga437e63b729ecb8eec3dcebaa7d1229b3">&#9670;&nbsp;</a></span>m0_fd_tree_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">M0_INTERNAL void m0_fd_tree_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d94/structm0__fd__tree.html">m0_fd_tree</a> *&#160;</td>
          <td class="paramname"><em>tree</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocates all the nodes from the tree. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/da4/fd_8c_source.html#l00785">785</a> of file <a class="el" href="../../d4/da4/fd_8c_source.html">fd.c</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga437e63b729ecb8eec3dcebaa7d1229b3_cgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga437e63b729ecb8eec3dcebaa7d1229b3_cgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga437e63b729ecb8eec3dcebaa7d1229b3_cgraph" id="d9/d33/group__failure__domains_ga437e63b729ecb8eec3dcebaa7d1229b3_cgraph">
<area shape="rect" id="node2" href="../../d7/d53/fd__internal_8h.html#a58f0c8a796c6cfdaa997caa596f6c80a" title="m0_fd__tree_cursor_init" alt="" coords="207,5,368,32"/>
<area shape="rect" id="node3" href="../../d7/d53/fd__internal_8h.html#a12f5304af34cd9f08ae6ca66ee690fba" title="m0_fd__tree_cursor_get" alt="" coords="206,56,369,83"/>
<area shape="rect" id="node4" href="../../d7/d53/fd__internal_8h.html#aa0b93be9d9e21151ee3e3cb7fe6f1eb1" title="m0_fd__tree_node_fini" alt="" coords="211,107,364,133"/>
<area shape="rect" id="node5" href="../../d7/d53/fd__internal_8h.html#a3b2b275d7962d41982dd92c2aef535d1" title="m0_fd__tree_cursor_next" alt="" coords="203,157,372,184"/>
<area shape="rect" id="node6" href="../../d4/da4/fd_8c.html#a99e29c588ead85d7e66205ef01c7bd0b" title="m0_fd__perm_cache_destroy" alt="" coords="191,208,384,235"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d33/group__failure__domains_ga437e63b729ecb8eec3dcebaa7d1229b3_icgraph.png" border="0" usemap="#d9/d33/group__failure__domains_ga437e63b729ecb8eec3dcebaa7d1229b3_icgraph" alt=""/></div>
<map name="d9/d33/group__failure__domains_ga437e63b729ecb8eec3dcebaa7d1229b3_icgraph" id="d9/d33/group__failure__domains_ga437e63b729ecb8eec3dcebaa7d1229b3_icgraph">
<area shape="rect" id="node2" href="../../dd/d7f/group__pool.html#ga4968a0b34e2f9c44b5152cf16a6c5d39" title="m0_pool_version_fini" alt="" coords="191,5,335,32"/>
<area shape="rect" id="node3" href="../../df/ded/ut_2fd_8c.html#a5ae6c52c70606376f7f6755157e9fa1e" title="test_fd_mapping_sanity" alt="" coords="383,81,543,108"/>
<area shape="rect" id="node4" href="../../df/ded/ut_2fd_8c.html#ab382b75a2adc789786533f4275ffbd8b" title="tree_generate" alt="" coords="212,107,313,133"/>
<area shape="rect" id="node5" href="../../df/ded/ut_2fd_8c.html#a4de9851397e52345e323b02f481700dd" title="test_pv2fd_conv" alt="" coords="203,157,322,184"/>
<area shape="rect" id="node6" href="../../d2/d92/ut_2fd__tree_8c.html#afa82f15a6afeb29f8d0d7c5e54640925" title="test_cache_init_fini" alt="" coords="195,208,330,235"/>
<area shape="rect" id="node7" href="../../d2/d92/ut_2fd__tree_8c.html#ac49401143b9c9cf8e6c8176e2e8b8fa9" title="test_init_fini" alt="" coords="217,259,309,285"/>
<area shape="rect" id="node8" href="../../d2/d92/ut_2fd__tree_8c.html#ad5b08e14a45223e9afa8027e693fff63" title="test_fault_inj" alt="" coords="215,309,311,336"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 20 2022 10:35:46 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
