<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: m0_layout_ops Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d9/df4/structm0__layout__ops.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">m0_layout_ops Struct Reference<div class="ingroups"><a class="el" href="../../da/da8/group__layout.html">Layouts.</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../db/de6/layout_2layout_8h_source.html">layout.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for m0_layout_ops:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d77/structm0__layout__ops__coll__graph.png" border="0" usemap="#m0__layout__ops_coll__map" alt="Collaboration graph"/></div>
<map name="m0__layout__ops_coll__map" id="m0__layout__ops_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a261b09fd692b10b2a602693ea18d556f"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/df4/structm0__layout__ops.html#a261b09fd692b10b2a602693ea18d556f">lo_fini</a> )(struct <a class="el" href="../../dd/d3f/structm0__ref.html">m0_ref</a> *ref)</td></tr>
<tr class="separator:a261b09fd692b10b2a602693ea18d556f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10905e6a6c3032450837c44e28f96afc"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/df4/structm0__layout__ops.html#a10905e6a6c3032450837c44e28f96afc">lo_delete</a> )(struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>)</td></tr>
<tr class="separator:a10905e6a6c3032450837c44e28f96afc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a9f02f4a32a525b9153920f942f8ce2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d49/types_8h.html#a754ca36f0e1fff3edef4f267024b1a1f">m0_bcount_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/df4/structm0__layout__ops.html#a7a9f02f4a32a525b9153920f942f8ce2">lo_recsize</a> )(const struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>)</td></tr>
<tr class="separator:a7a9f02f4a32a525b9153920f942f8ce2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab09b74984ee0619375f073c8bc65f3b9"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/df4/structm0__layout__ops.html#ab09b74984ee0619375f073c8bc65f3b9">lo_instance_build</a> )(struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>, const struct <a class="el" href="../../d9/d8a/structm0__fid.html">m0_fid</a> *<a class="el" href="../../d0/d9e/group__addb2.html#gaa21bf1e0f87c5580797df5d79910023f">fid</a>, struct <a class="el" href="../../d7/d35/structm0__layout__instance.html">m0_layout_instance</a> **linst)</td></tr>
<tr class="separator:ab09b74984ee0619375f073c8bc65f3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fcfa4d65e8a067fb2957cea178c640d"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/df4/structm0__layout__ops.html#a3fcfa4d65e8a067fb2957cea178c640d">lo_decode</a> )(struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>, struct <a class="el" href="../../d5/d06/structm0__bufvec__cursor.html">m0_bufvec_cursor</a> *<a class="el" href="../../db/d13/module_2ut_2module_8c.html#a94298e2c586650b2a8a346c594f34c9d">cur</a>, enum <a class="el" href="../../da/da8/group__layout.html#ga82ecfecd12e3b2e1aa9cf20b87baddeb">m0_layout_xcode_op</a> <a class="el" href="../../d3/d1b/libdemo_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>, struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a> *tx, uint32_t user_count)</td></tr>
<tr class="separator:a3fcfa4d65e8a067fb2957cea178c640d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf9bb33923ea6eeaa80a404d2a772bbf"><td class="memItemLeft" align="right" valign="top">int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/df4/structm0__layout__ops.html#acf9bb33923ea6eeaa80a404d2a772bbf">lo_encode</a> )(struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>, enum <a class="el" href="../../da/da8/group__layout.html#ga82ecfecd12e3b2e1aa9cf20b87baddeb">m0_layout_xcode_op</a> <a class="el" href="../../d3/d1b/libdemo_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>, struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a> *tx, struct <a class="el" href="../../d5/d06/structm0__bufvec__cursor.html">m0_bufvec_cursor</a> *<a class="el" href="../../dd/d6d/group__xcode.html#ga50fe33eaae68b43814656f241a6ac907">out</a>)</td></tr>
<tr class="separator:acf9bb33923ea6eeaa80a404d2a772bbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../db/de6/layout_2layout_8h_source.html#l00264">264</a> of file <a class="el" href="../../db/de6/layout_2layout_8h_source.html">layout.h</a>.</p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a3fcfa4d65e8a067fb2957cea178c640d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fcfa4d65e8a067fb2957cea178c640d">&#9670;&nbsp;</a></span>lo_decode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* lo_decode) (struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>, struct <a class="el" href="../../d5/d06/structm0__bufvec__cursor.html">m0_bufvec_cursor</a> *<a class="el" href="../../db/d13/module_2ut_2module_8c.html#a94298e2c586650b2a8a346c594f34c9d">cur</a>, enum <a class="el" href="../../da/da8/group__layout.html#ga82ecfecd12e3b2e1aa9cf20b87baddeb">m0_layout_xcode_op</a> <a class="el" href="../../d3/d1b/libdemo_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>, struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a> *tx, uint32_t user_count)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Continues building the in-memory layout object from its representation either 'stored in the Layout DB' or 'received through the buffer'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>This enum parameter indicates what, if a DB operation is to be performed on the layout record and it could be LOOKUP if at all. If it is BUFFER_OP, then the layout is decoded from its representation received through the buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>M0_IN(op, (M0_LXO_DB_LOOKUP, M0_LXO_BUFFER_OP)) </dd>
<dd>
ergo(op == M0_LXO_DB_LOOKUP, tx != NULL) </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd><ul>
<li>ergo(rc == 0, pdclust_invariant(pl))</li>
<li>The cursor cur is advanced by the size of the data that is read from it. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="../../db/de6/layout_2layout_8h_source.html#l00324">324</a> of file <a class="el" href="../../db/de6/layout_2layout_8h_source.html">layout.h</a>.</p>

</div>
</div>
<a id="a10905e6a6c3032450837c44e28f96afc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10905e6a6c3032450837c44e28f96afc">&#9670;&nbsp;</a></span>lo_delete</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* lo_delete) (struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finalises the layout object that is only allocated and not populated. Since it is not populated, it does not contain enumeration object. Dual to lto_allocate() when an allocated layout object can not be populated for some reason. In the other regular cases, dual to the sequence of "lto_allocate() followed by the type specific
populate operation" is <a class="el" href="../../d9/df4/structm0__layout__ops.html#a261b09fd692b10b2a602693ea18d556f">lo_fini()</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../db/de6/layout_2layout_8h_source.html#l00286">286</a> of file <a class="el" href="../../db/de6/layout_2layout_8h_source.html">layout.h</a>.</p>

</div>
</div>
<a id="acf9bb33923ea6eeaa80a404d2a772bbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf9bb33923ea6eeaa80a404d2a772bbf">&#9670;&nbsp;</a></span>lo_encode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* lo_encode) (struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>, enum <a class="el" href="../../da/da8/group__layout.html#ga82ecfecd12e3b2e1aa9cf20b87baddeb">m0_layout_xcode_op</a> <a class="el" href="../../d3/d1b/libdemo_8c.html#a99a30df0f2488360cdd46b4b88e5f5f0">op</a>, struct <a class="el" href="../../d2/d7e/structm0__be__tx.html">m0_be_tx</a> *tx, struct <a class="el" href="../../d5/d06/structm0__bufvec__cursor.html">m0_bufvec_cursor</a> *<a class="el" href="../../dd/d6d/group__xcode.html#ga50fe33eaae68b43814656f241a6ac907">out</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Continues to use the in-memory layout object and</p><ul>
<li>Either adds/updates/deletes it to/from the Layout DB</li>
<li>Or converts it to a buffer. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>This enum parameter indicates what is the DB operation to be performed on the layout record if at all and it could be one of ADD/UPDATE/DELETE. If it is BUFFER_OP, then the layout is stored in the buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>M0_IN(op, (M0_LXO_DB_ADD, M0_LXO_DB_UPDATE, M0_LXO_DB_DELETE, M0_LXO_BUFFER_OP)) </dd>
<dd>
ergo(op != M0_LXO_BUFFER_OP, tx != NULL) </dd></dl>
</li>
</ul>

<p class="definition">Definition at line <a class="el" href="../../db/de6/layout_2layout_8h_source.html#l00343">343</a> of file <a class="el" href="../../db/de6/layout_2layout_8h_source.html">layout.h</a>.</p>

</div>
</div>
<a id="a261b09fd692b10b2a602693ea18d556f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a261b09fd692b10b2a602693ea18d556f">&#9670;&nbsp;</a></span>lo_fini</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* lo_fini) (struct <a class="el" href="../../dd/d3f/structm0__ref.html">m0_ref</a> *ref)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Finalises the type specific layout object. It involves finalising its enumeration object, if applicable.</p>
<p>Dual to the sequence "lto_allocate() followed by the type specific
populate operation", but the user is not expected to invoke this method explicitly. It is called implicitly when the last reference on the layout object is released. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="../../da/da8/group__layout.html#ga29c80e8d71855cfeace3c8d6f6ced055">m0_layout_put()</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../db/de6/layout_2layout_8h_source.html#l00275">275</a> of file <a class="el" href="../../db/de6/layout_2layout_8h_source.html">layout.h</a>.</p>

</div>
</div>
<a id="ab09b74984ee0619375f073c8bc65f3b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab09b74984ee0619375f073c8bc65f3b9">&#9670;&nbsp;</a></span>lo_instance_build</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int(* lo_instance_build) (struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>, const struct <a class="el" href="../../d9/d8a/structm0__fid.html">m0_fid</a> *<a class="el" href="../../d0/d9e/group__addb2.html#gaa21bf1e0f87c5580797df5d79910023f">fid</a>, struct <a class="el" href="../../d7/d35/structm0__layout__instance.html">m0_layout_instance</a> **linst)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates and builds a layout instance using the supplied layout. Increments a reference on the supplied layout. </p>

<p class="definition">Definition at line <a class="el" href="../../db/de6/layout_2layout_8h_source.html#l00303">303</a> of file <a class="el" href="../../db/de6/layout_2layout_8h_source.html">layout.h</a>.</p>

</div>
</div>
<a id="a7a9f02f4a32a525b9153920f942f8ce2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a9f02f4a32a525b9153920f942f8ce2">&#9670;&nbsp;</a></span>lo_recsize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d49/types_8h.html#a754ca36f0e1fff3edef4f267024b1a1f">m0_bcount_t</a>(* lo_recsize) (const struct <a class="el" href="../../d9/dc1/structm0__layout.html">m0_layout</a> *<a class="el" href="../../de/d2a/ut_2chan_8c.html#ad37acb21981ef5d222311efa6898eb14">l</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns size of the record stored in the "layouts" (primary) table, for the specified layout. It includes the size required for storing the generic data, the layout type specific data and the enum type specific data.</p>
<dl class="section invariant"><dt>Invariant</dt><dd>l-&gt;l_ops-&gt;lo_recsize(l) &lt;= l-&gt;l_type-&gt;lt_ops-&gt;lto_max_recsize(l-&gt;l_dom); </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../db/de6/layout_2layout_8h_source.html#l00297">297</a> of file <a class="el" href="../../db/de6/layout_2layout_8h_source.html">layout.h</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>layout/<a class="el" href="../../db/de6/layout_2layout_8h_source.html">layout.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d9/df4/structm0__layout__ops.html">m0_layout_ops</a></li>
    <li class="footer">Generated on Fri May 20 2022 10:36:13 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
