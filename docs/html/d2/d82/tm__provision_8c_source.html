<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Motr: net/tm_provision.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Motr
   &#160;<span id="projectnumber">M0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d2/d82/tm__provision_8c_source.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">tm_provision.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d2/d82/tm__provision_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* -*- C -*- */</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * Copyright (c) 2012-2020 Seagate Technology LLC and/or its Affiliates</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * you may not use this file except in compliance with the License.</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * You may obtain a copy of the License at</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> *     http://www.apache.org/licenses/LICENSE-2.0</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * See the License for the specific language governing permissions and</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * limitations under the License.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * For any questions about this software or licensing,</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * please email opensource@seagate.com or cortx-questions@seagate.com.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/deb/arith_8h.html">lib/arith.h</a>&quot;</span> <span class="comment">/* M0_CNT_INC */</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7c/net__internal_8h.html">net/net_internal.h</a>&quot;</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d03/buffer__pool_8h.html">net/buffer_pool.h</a>&quot;</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno"><a class="line" href="../../d0/d50/group__net__pvt.html#ga10b81fec0a61efae5b970c93c8166031">  414</a></span>&#160;M0_INTERNAL <span class="keywordtype">int</span> <a class="code" href="../../d0/d50/group__net__pvt.html#ga10b81fec0a61efae5b970c93c8166031">m0_net__tm_provision_buf</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d78/structm0__net__transfer__mc.html">m0_net_transfer_mc</a> *tm)</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;{</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a> *nb;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <span class="keywordtype">int</span>                   <a class="code" href="../../d7/db8/cm_2repreb_2trigger__fop_8h.html#ac6509c6fe4cbf7bde170597172f8a288">rc</a>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d0/d04/group__mutex.html#ga0c96633d90ccf7e2ed6ffee75d983975">m0_mutex_is_locked</a>(&amp;tm-&gt;ntm_mutex));</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga5891449a008a0d2a5fcad686b2f2e63e">m0_net_buffer_pool_is_locked</a>(tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a>));</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        nb = <a class="code" href="../../d8/d01/group__net__buffer__pool.html#gac6bdd9900fc54c802b1e16d44cb6b64f">m0_net_buffer_pool_get</a>(tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a>, tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#abe37488ce6fba5fdd3aaa0af927c6cbd">ntm_pool_colour</a>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        <span class="keywordflow">if</span> (nb != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                nb-&gt;<a class="code" href="../../d9/d7e/structm0__net__buffer.html#afacc91b5275a95609cdf10a1568f9a19">nb_qtype</a>            = <a class="code" href="../../d9/dd2/group__net.html#gga4a25e727e622f7aaaedfe8ffa01fa005aa95a74f1b59dffb048013e381c4f6733">M0_NET_QT_MSG_RECV</a>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                nb-&gt;<a class="code" href="../../d9/d7e/structm0__net__buffer.html#a0795ef84ab83782bc69d8b73185165c4">nb_callbacks</a>        = tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#a07289bb65658f1f03ccaf51dd75f76ba">ntm_recv_pool_callbacks</a>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                nb-&gt;<a class="code" href="../../d9/d7e/structm0__net__buffer.html#afe5d922cf167f088388084c3d5622593">nb_min_receive_size</a> = tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ab345af1a651c0c1bad53f320ffdb883a">ntm_recv_queue_min_recv_size</a>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                nb-&gt;<a class="code" href="../../d9/d7e/structm0__net__buffer.html#ac27f90ab817e14a76fcc4bf62d3d9998">nb_max_receive_msgs</a> = tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#a42fe7407f785aefe996fb16bfb6f2ad0">ntm_recv_queue_max_recv_msgs</a>;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                nb-&gt;<a class="code" href="../../d9/d7e/structm0__net__buffer.html#a43fdc44f1f8f5d5e0be28c07e054160a">nb_ep</a>               = <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <a class="code" href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a>(nb-&gt;<a class="code" href="../../d9/d7e/structm0__net__buffer.html#accd7a8e24513930e5c6f574f1ae478a3">nb_pool</a> == tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a>);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                <a class="code" href="../../d7/db8/cm_2repreb_2trigger__fop_8h.html#ac6509c6fe4cbf7bde170597172f8a288">rc</a> = <a class="code" href="../../d9/dd2/group__net.html#ga12df135f261cfd2be817aee51ae5f8a9">m0_net__buffer_add</a>(nb, tm);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        } <span class="keywordflow">else</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                <a class="code" href="../../d7/db8/cm_2repreb_2trigger__fop_8h.html#ac6509c6fe4cbf7bde170597172f8a288">rc</a> = +1;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d7/db8/cm_2repreb_2trigger__fop_8h.html#ac6509c6fe4cbf7bde170597172f8a288">rc</a>;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">   Private provisioning routine that assumes all locking is obtained</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">   in the correct order prior to invocation.</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">   @post If provisioning is enabled:</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">         Length of receive queue &gt;= tm-&gt;ntm_recv_queue_min_length &amp;&amp;</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">                tm-&gt;ntm_recv_queue_deficit == 0 ||</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">         Length of receive queue + tm-&gt;ntm_recv_queue_deficit ==</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">                tm-&gt;ntm_recv_queue_min_length</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="../../d2/d82/tm__provision_8c.html#a233cb9884376e1f8cee9344fc43ec405">  445</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/d82/tm__provision_8c.html#a233cb9884376e1f8cee9344fc43ec405">tm_provision_recv_q</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d78/structm0__net__transfer__mc.html">m0_net_transfer_mc</a> *tm)</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;{</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        int64_t            need;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordtype">int</span>                        <a class="code" href="../../d7/db8/cm_2repreb_2trigger__fop_8h.html#ac6509c6fe4cbf7bde170597172f8a288">rc</a>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        uint64_t                   recv_q_len;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        uint64_t                   deficit;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        uint64_t                   prev_deficit;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d0/d04/group__mutex.html#ga0c96633d90ccf7e2ed6ffee75d983975">m0_mutex_is_locked</a>(&amp;tm-&gt;ntm_mutex));</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d0/d50/group__net__pvt.html#gaaab2835349be6b88fe5230b89c779608">m0_net__tm_invariant</a>(tm));</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">if</span> (tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#a4fde71affafb898e2a3f4d8153cea8d1">ntm_state</a> != <a class="code" href="../../d9/dd2/group__net.html#ggaaa9dbf6c20e7f07dfe6fc3746f6183e2abbe89cdedac94d27fe1eeb53c4a82ffe">M0_NET_TM_STARTED</a> || tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a> == <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                <span class="keywordflow">return</span>; <span class="comment">/* provisioning not required */</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga5891449a008a0d2a5fcad686b2f2e63e">m0_net_buffer_pool_is_locked</a>(tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a>));</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        prev_deficit = <a class="code" href="../../d3/de8/group__atomic.html#ga611f47b9f61896df7924843f8d7e95de">m0_atomic64_get</a>(&amp;tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#aa0b26826c28f6d909c882e90c52e6bf5">ntm_recv_queue_deficit</a>);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;        recv_q_len = m0_net_tm_tlist_length(&amp;tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#a142b6d767fee3f0ae250a85a0e6f968a">ntm_q</a>[<a class="code" href="../../d9/dd2/group__net.html#gga4a25e727e622f7aaaedfe8ffa01fa005aa95a74f1b59dffb048013e381c4f6733">M0_NET_QT_MSG_RECV</a>]);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        need = tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#af312bf36794a76e78faa89d119384a29">ntm_recv_queue_min_length</a> - recv_q_len;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;        <span class="comment">/*</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">         * @todo XXX this is incorrect: a buffer can be on M0_NET_QT_MSG_RECV</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">         * queue, but ineligible to receive incoming data, because it is busy</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">         * accepting data already.</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">while</span> (need &gt; 0) {</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                <a class="code" href="../../d7/db8/cm_2repreb_2trigger__fop_8h.html#ac6509c6fe4cbf7bde170597172f8a288">rc</a> = <a class="code" href="../../d0/d50/group__net__pvt.html#ga10b81fec0a61efae5b970c93c8166031">m0_net__tm_provision_buf</a>(tm);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d7/db8/cm_2repreb_2trigger__fop_8h.html#ac6509c6fe4cbf7bde170597172f8a288">rc</a> != 0)</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                <a class="code" href="../../db/dc9/group__arith.html#ga6ba808bd9de059edf42ab1d70c4c8964">M0_CNT_DEC</a>(need);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                <a class="code" href="../../db/dc9/group__arith.html#gabcb07645e2a6233c6ce958784aaf9fe3">M0_CNT_INC</a>(recv_q_len);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;        }</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        deficit = need &lt; 0 ? 0 : need;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">if</span> (deficit &gt; prev_deficit)</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#a81cf927108d3fc364e456b2de1d81eb6">ntm_qstats</a>[<a class="code" href="../../d9/dd2/group__net.html#gga4a25e727e622f7aaaedfe8ffa01fa005aa95a74f1b59dffb048013e381c4f6733">M0_NET_QT_MSG_RECV</a>].<a class="code" href="../../d3/d26/structm0__net__qstats.html#a5da8dd33680c90c2001b17cf5575c1c5">nqs_num_f_events</a> +=</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                        deficit - prev_deficit;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;        <a class="code" href="../../d3/de8/group__atomic.html#gab25f09c5bb8ae99ab2605ca20db2130f">m0_atomic64_set</a>(&amp;tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#aa0b26826c28f6d909c882e90c52e6bf5">ntm_recv_queue_deficit</a>, deficit);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#aea86d55595126b703b9e619887f09a22">M0_POST</a>((recv_q_len &gt;= tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#af312bf36794a76e78faa89d119384a29">ntm_recv_queue_min_length</a> &amp;&amp; deficit == 0) ||</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                 recv_q_len + deficit == tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#af312bf36794a76e78faa89d119384a29">ntm_recv_queue_min_length</a>);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;}</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;M0_INTERNAL <span class="keywordtype">void</span></div><div class="line"><a name="l00484"></a><span class="lineno"><a class="line" href="../../d9/dd2/group__net.html#ga56521d311aec804ccae66e4594719282">  484</a></span>&#160;<a class="code" href="../../d9/dd2/group__net.html#ga56521d311aec804ccae66e4594719282">m0_net_domain_buffer_pool_not_empty</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a> *<a class="code" href="../../d0/df1/iter__ut_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>)</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../db/d78/structm0__net__domain.html">m0_net_domain</a>      *<a class="code" href="../../dc/d74/addb2_2ut_2storage_8c.html#a6b9f7e6115c241d0a8ea3087490f1043">dom</a>;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d4/d78/structm0__net__transfer__mc.html">m0_net_transfer_mc</a> *tm;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a>(<a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga5891449a008a0d2a5fcad686b2f2e63e">m0_net_buffer_pool_is_locked</a>(<a class="code" href="../../d0/df1/iter__ut_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>));</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <a class="code" href="../../dc/d74/addb2_2ut_2storage_8c.html#a6b9f7e6115c241d0a8ea3087490f1043">dom</a> = <a class="code" href="../../d0/df1/iter__ut_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a>-&gt;nbp_ndom;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        <a class="code" href="../../d0/d04/group__mutex.html#gae26efdb3a765f750c5992041d6ee2336">m0_mutex_lock</a>(&amp;<a class="code" href="../../dc/d74/addb2_2ut_2storage_8c.html#a6b9f7e6115c241d0a8ea3087490f1043">dom</a>-&gt;nd_mutex);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;        <a class="code" href="../../dd/d12/group__list.html#ga7dad8d770f9182931d76c49bac888281">m0_list_for_each_entry</a>(&amp;<a class="code" href="../../dc/d74/addb2_2ut_2storage_8c.html#a6b9f7e6115c241d0a8ea3087490f1043">dom</a>-&gt;nd_tms, tm,</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                        <span class="keyword">struct</span> <a class="code" href="../../d4/d78/structm0__net__transfer__mc.html">m0_net_transfer_mc</a>, <a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#a35e9b0c8da19dec43ec35c80166013b2">ntm_dom_linkage</a>) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d3/de8/group__atomic.html#ga611f47b9f61896df7924843f8d7e95de">m0_atomic64_get</a>(&amp;tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#aa0b26826c28f6d909c882e90c52e6bf5">ntm_recv_queue_deficit</a>) == 0)</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                        <span class="keywordflow">continue</span>; <span class="comment">/* skip if no deficit */</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                <a class="code" href="../../d0/d04/group__mutex.html#gae26efdb3a765f750c5992041d6ee2336">m0_mutex_lock</a>(&amp;tm-&gt;ntm_mutex);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                <span class="keywordflow">if</span> (tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#a4fde71affafb898e2a3f4d8153cea8d1">ntm_state</a>     == <a class="code" href="../../d9/dd2/group__net.html#ggaaa9dbf6c20e7f07dfe6fc3746f6183e2abbe89cdedac94d27fe1eeb53c4a82ffe">M0_NET_TM_STARTED</a> &amp;&amp;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a> == <a class="code" href="../../d0/df1/iter__ut_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a> &amp;&amp;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                    <a class="code" href="../../d3/de8/group__atomic.html#ga611f47b9f61896df7924843f8d7e95de">m0_atomic64_get</a>(&amp;tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#aa0b26826c28f6d909c882e90c52e6bf5">ntm_recv_queue_deficit</a>) &gt; 0)</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                        <a class="code" href="../../d2/d82/tm__provision_8c.html#a233cb9884376e1f8cee9344fc43ec405">tm_provision_recv_q</a>(tm);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <a class="code" href="../../d0/d04/group__mutex.html#ga18963570792098f5ab3cf3e8ede8046a">m0_mutex_unlock</a>(&amp;tm-&gt;ntm_mutex);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;        }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <a class="code" href="../../d0/d04/group__mutex.html#ga18963570792098f5ab3cf3e8ede8046a">m0_mutex_unlock</a>(&amp;<a class="code" href="../../dc/d74/addb2_2ut_2storage_8c.html#a6b9f7e6115c241d0a8ea3087490f1043">dom</a>-&gt;nd_mutex);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;}</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;M0_EXPORTED(<a class="code" href="../../d9/dd2/group__net.html#ga56521d311aec804ccae66e4594719282">m0_net_domain_buffer_pool_not_empty</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno"><a class="line" href="../../d0/d50/group__net__pvt.html#ga8ba7ab498de3ba7b1e9818dfa25708d0">  509</a></span>&#160;M0_INTERNAL <span class="keywordtype">void</span> <a class="code" href="../../d0/d50/group__net__pvt.html#ga8ba7ab498de3ba7b1e9818dfa25708d0">m0_net__tm_provision_recv_q</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d78/structm0__net__transfer__mc.html">m0_net_transfer_mc</a> *tm)</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;{</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d0/d04/group__mutex.html#ga3499d6f495de6815f79e3e1b1477bc8b">m0_mutex_is_not_locked</a>(&amp;tm-&gt;ntm_mutex));</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac25a898a8ec2a7d4876cdd9ee7e5a19d">ntm_callback_counter</a> &gt; 0);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a> != <a class="code" href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        <a class="code" href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a>(<a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga1de02828dec622bfbd4b17cfa87e3115">m0_net_buffer_pool_is_not_locked</a>(tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a>));</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;        <a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga3108150c6181b9767449f3b2eb0c0f7c">m0_net_buffer_pool_lock</a>(tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;        <a class="code" href="../../d0/d04/group__mutex.html#gae26efdb3a765f750c5992041d6ee2336">m0_mutex_lock</a>(&amp;tm-&gt;ntm_mutex);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;        <a class="code" href="../../d2/d82/tm__provision_8c.html#a233cb9884376e1f8cee9344fc43ec405">tm_provision_recv_q</a>(tm);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        <a class="code" href="../../d0/d04/group__mutex.html#ga18963570792098f5ab3cf3e8ede8046a">m0_mutex_unlock</a>(&amp;tm-&gt;ntm_mutex);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <a class="code" href="../../d8/d01/group__net__buffer__pool.html#ga98cfb317097d1024cca11a4c5af51b9c">m0_net_buffer_pool_unlock</a>(tm-&gt;<a class="code" href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">ntm_recv_pool</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment"> *  Local variables:</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"> *  c-indentation-style: &quot;K&amp;R&quot;</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment"> *  c-basic-offset: 8</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment"> *  tab-width: 8</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment"> *  fill-column: 79</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"> *  scroll-step: 1</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment"> *  End:</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"> */</span></div><div class="ttc" id="structm0__net__qstats_html_a5da8dd33680c90c2001b17cf5575c1c5"><div class="ttname"><a href="../../d3/d26/structm0__net__qstats.html#a5da8dd33680c90c2001b17cf5575c1c5">m0_net_qstats::nqs_num_f_events</a></div><div class="ttdeci">uint64_t nqs_num_f_events</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00784">net.h:784</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_ab345af1a651c0c1bad53f320ffdb883a"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#ab345af1a651c0c1bad53f320ffdb883a">m0_net_transfer_mc::ntm_recv_queue_min_recv_size</a></div><div class="ttdeci">m0_bcount_t ntm_recv_queue_min_recv_size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00927">net.h:927</a></div></div>
<div class="ttc" id="net__internal_8h_html"><div class="ttname"><a href="../../d5/d7c/net__internal_8h.html">net_internal.h</a></div></div>
<div class="ttc" id="assert_8h_html_a1c063bd08f7e1ab3a6e6008ef825d471"><div class="ttname"><a href="../../dc/da7/assert_8h.html#a1c063bd08f7e1ab3a6e6008ef825d471">M0_PRE</a></div><div class="ttdeci">#define M0_PRE(cond)</div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_af312bf36794a76e78faa89d119384a29"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#af312bf36794a76e78faa89d119384a29">m0_net_transfer_mc::ntm_recv_queue_min_length</a></div><div class="ttdeci">uint32_t ntm_recv_queue_min_length</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00908">net.h:908</a></div></div>
<div class="ttc" id="group__mutex_html_ga18963570792098f5ab3cf3e8ede8046a"><div class="ttname"><a href="../../d0/d04/group__mutex.html#ga18963570792098f5ab3cf3e8ede8046a">m0_mutex_unlock</a></div><div class="ttdeci">M0_INTERNAL void m0_mutex_unlock(struct m0_mutex *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d62/mutex_8c_source.html#l00066">mutex.c:66</a></div></div>
<div class="ttc" id="structm0__net__buffer_html_accd7a8e24513930e5c6f574f1ae478a3"><div class="ttname"><a href="../../d9/d7e/structm0__net__buffer.html#accd7a8e24513930e5c6f574f1ae478a3">m0_net_buffer::nb_pool</a></div><div class="ttdeci">struct m0_net_buffer_pool * nb_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l01508">net.h:1508</a></div></div>
<div class="ttc" id="structm0__net__buffer_html"><div class="ttname"><a href="../../d9/d7e/structm0__net__buffer.html">m0_net_buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l01316">net.h:1316</a></div></div>
<div class="ttc" id="lib_2user__space_2misc_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../db/df8/lib_2user__space_2misc_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df8/lib_2user__space_2misc_8h_source.html#l00038">misc.h:38</a></div></div>
<div class="ttc" id="arith_8h_html"><div class="ttname"><a href="../../d7/deb/arith_8h.html">arith.h</a></div></div>
<div class="ttc" id="group__mutex_html_ga3499d6f495de6815f79e3e1b1477bc8b"><div class="ttname"><a href="../../d0/d04/group__mutex.html#ga3499d6f495de6815f79e3e1b1477bc8b">m0_mutex_is_not_locked</a></div><div class="ttdeci">M0_INTERNAL bool m0_mutex_is_not_locked(const struct m0_mutex *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d62/mutex_8c_source.html#l00101">mutex.c:101</a></div></div>
<div class="ttc" id="group__net__buffer__pool_html_gac6bdd9900fc54c802b1e16d44cb6b64f"><div class="ttname"><a href="../../d8/d01/group__net__buffer__pool.html#gac6bdd9900fc54c802b1e16d44cb6b64f">m0_net_buffer_pool_get</a></div><div class="ttdeci">M0_INTERNAL struct m0_net_buffer * m0_net_buffer_pool_get(struct m0_net_buffer_pool *pool, uint32_t colour)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d83/buffer__pool_8c_source.html#l00215">buffer_pool.c:215</a></div></div>
<div class="ttc" id="group__net__buffer__pool_html_ga98cfb317097d1024cca11a4c5af51b9c"><div class="ttname"><a href="../../d8/d01/group__net__buffer__pool.html#ga98cfb317097d1024cca11a4c5af51b9c">m0_net_buffer_pool_unlock</a></div><div class="ttdeci">M0_INTERNAL void m0_net_buffer_pool_unlock(struct m0_net_buffer_pool *pool)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d83/buffer__pool_8c_source.html#l00203">buffer_pool.c:203</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_a81cf927108d3fc364e456b2de1d81eb6"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#a81cf927108d3fc364e456b2de1d81eb6">m0_net_transfer_mc::ntm_qstats</a></div><div class="ttdeci">struct m0_net_qstats ntm_qstats[M0_NET_QT_NR]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00880">net.h:880</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_a4fde71affafb898e2a3f4d8153cea8d1"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#a4fde71affafb898e2a3f4d8153cea8d1">m0_net_transfer_mc::ntm_state</a></div><div class="ttdeci">enum m0_net_tm_state ntm_state</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00819">net.h:819</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html">m0_net_transfer_mc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00811">net.h:811</a></div></div>
<div class="ttc" id="structm0__net__buffer_html_afe5d922cf167f088388084c3d5622593"><div class="ttname"><a href="../../d9/d7e/structm0__net__buffer.html#afe5d922cf167f088388084c3d5622593">m0_net_buffer::nb_min_receive_size</a></div><div class="ttdeci">m0_bcount_t nb_min_receive_size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l01496">net.h:1496</a></div></div>
<div class="ttc" id="group__mutex_html_gae26efdb3a765f750c5992041d6ee2336"><div class="ttname"><a href="../../d0/d04/group__mutex.html#gae26efdb3a765f750c5992041d6ee2336">m0_mutex_lock</a></div><div class="ttdeci">M0_INTERNAL void m0_mutex_lock(struct m0_mutex *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d62/mutex_8c_source.html#l00049">mutex.c:49</a></div></div>
<div class="ttc" id="group__net_html_ga56521d311aec804ccae66e4594719282"><div class="ttname"><a href="../../d9/dd2/group__net.html#ga56521d311aec804ccae66e4594719282">m0_net_domain_buffer_pool_not_empty</a></div><div class="ttdeci">M0_INTERNAL void m0_net_domain_buffer_pool_not_empty(struct m0_net_buffer_pool *pool)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/tm__provision_8c_source.html#l00484">tm_provision.c:484</a></div></div>
<div class="ttc" id="group__net__pvt_html_ga8ba7ab498de3ba7b1e9818dfa25708d0"><div class="ttname"><a href="../../d0/d50/group__net__pvt.html#ga8ba7ab498de3ba7b1e9818dfa25708d0">m0_net__tm_provision_recv_q</a></div><div class="ttdeci">M0_INTERNAL void m0_net__tm_provision_recv_q(struct m0_net_transfer_mc *tm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/tm__provision_8c_source.html#l00509">tm_provision.c:509</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_a07289bb65658f1f03ccaf51dd75f76ba"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#a07289bb65658f1f03ccaf51dd75f76ba">m0_net_transfer_mc::ntm_recv_pool_callbacks</a></div><div class="ttdeci">const struct m0_net_buffer_callbacks * ntm_recv_pool_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00902">net.h:902</a></div></div>
<div class="ttc" id="group__net__pvt_html_ga10b81fec0a61efae5b970c93c8166031"><div class="ttname"><a href="../../d0/d50/group__net__pvt.html#ga10b81fec0a61efae5b970c93c8166031">m0_net__tm_provision_buf</a></div><div class="ttdeci">M0_INTERNAL int m0_net__tm_provision_buf(struct m0_net_transfer_mc *tm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/tm__provision_8c_source.html#l00414">tm_provision.c:414</a></div></div>
<div class="ttc" id="group__net__buffer__pool_html_ga5891449a008a0d2a5fcad686b2f2e63e"><div class="ttname"><a href="../../d8/d01/group__net__buffer__pool.html#ga5891449a008a0d2a5fcad686b2f2e63e">m0_net_buffer_pool_is_locked</a></div><div class="ttdeci">M0_INTERNAL bool m0_net_buffer_pool_is_locked(const struct m0_net_buffer_pool *pool)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d83/buffer__pool_8c_source.html#l00191">buffer_pool.c:191</a></div></div>
<div class="ttc" id="structm0__net__buffer_html_afacc91b5275a95609cdf10a1568f9a19"><div class="ttname"><a href="../../d9/d7e/structm0__net__buffer.html#afacc91b5275a95609cdf10a1568f9a19">m0_net_buffer::nb_qtype</a></div><div class="ttdeci">enum m0_net_queue_type nb_qtype</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l01363">net.h:1363</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_a42fe7407f785aefe996fb16bfb6f2ad0"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#a42fe7407f785aefe996fb16bfb6f2ad0">m0_net_transfer_mc::ntm_recv_queue_max_recv_msgs</a></div><div class="ttdeci">uint32_t ntm_recv_queue_max_recv_msgs</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00933">net.h:933</a></div></div>
<div class="ttc" id="tm__provision_8c_html_a233cb9884376e1f8cee9344fc43ec405"><div class="ttname"><a href="../../d2/d82/tm__provision_8c.html#a233cb9884376e1f8cee9344fc43ec405">tm_provision_recv_q</a></div><div class="ttdeci">static void tm_provision_recv_q(struct m0_net_transfer_mc *tm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d82/tm__provision_8c_source.html#l00445">tm_provision.c:445</a></div></div>
<div class="ttc" id="structm0__net__domain_html"><div class="ttname"><a href="../../db/d78/structm0__net__domain.html">m0_net_domain</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00376">net.h:376</a></div></div>
<div class="ttc" id="group__net_html_ggaaa9dbf6c20e7f07dfe6fc3746f6183e2abbe89cdedac94d27fe1eeb53c4a82ffe"><div class="ttname"><a href="../../d9/dd2/group__net.html#ggaaa9dbf6c20e7f07dfe6fc3746f6183e2abbe89cdedac94d27fe1eeb53c4a82ffe">M0_NET_TM_STARTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00634">net.h:634</a></div></div>
<div class="ttc" id="structm0__net__buffer_html_ac27f90ab817e14a76fcc4bf62d3d9998"><div class="ttname"><a href="../../d9/d7e/structm0__net__buffer.html#ac27f90ab817e14a76fcc4bf62d3d9998">m0_net_buffer::nb_max_receive_msgs</a></div><div class="ttdeci">uint32_t nb_max_receive_msgs</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l01502">net.h:1502</a></div></div>
<div class="ttc" id="group__list_html_ga7dad8d770f9182931d76c49bac888281"><div class="ttname"><a href="../../dd/d12/group__list.html#ga7dad8d770f9182931d76c49bac888281">m0_list_for_each_entry</a></div><div class="ttdeci">#define m0_list_for_each_entry(head, pos, type, member)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d39/lib_2list_8h_source.html#l00235">list.h:235</a></div></div>
<div class="ttc" id="assert_8h_html_ac8bebb1ebb72c1dae891a1a1c24e7aec"><div class="ttname"><a href="../../dc/da7/assert_8h.html#ac8bebb1ebb72c1dae891a1a1c24e7aec">M0_ASSERT</a></div><div class="ttdeci">#define M0_ASSERT(cond)</div></div>
<div class="ttc" id="group__mutex_html_ga0c96633d90ccf7e2ed6ffee75d983975"><div class="ttname"><a href="../../d0/d04/group__mutex.html#ga0c96633d90ccf7e2ed6ffee75d983975">m0_mutex_is_locked</a></div><div class="ttdeci">M0_INTERNAL bool m0_mutex_is_locked(const struct m0_mutex *mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d62/mutex_8c_source.html#l00095">mutex.c:95</a></div></div>
<div class="ttc" id="group__net__buffer__pool_html_ga1de02828dec622bfbd4b17cfa87e3115"><div class="ttname"><a href="../../d8/d01/group__net__buffer__pool.html#ga1de02828dec622bfbd4b17cfa87e3115">m0_net_buffer_pool_is_not_locked</a></div><div class="ttdeci">M0_INTERNAL bool m0_net_buffer_pool_is_not_locked(const struct m0_net_buffer_pool *pool)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d83/buffer__pool_8c_source.html#l00197">buffer_pool.c:197</a></div></div>
<div class="ttc" id="addb2_2ut_2storage_8c_html_a6b9f7e6115c241d0a8ea3087490f1043"><div class="ttname"><a href="../../dc/d74/addb2_2ut_2storage_8c.html#a6b9f7e6115c241d0a8ea3087490f1043">dom</a></div><div class="ttdeci">static struct m0_stob_domain * dom</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d74/addb2_2ut_2storage_8c_source.html#l00038">storage.c:38</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_aa0b26826c28f6d909c882e90c52e6bf5"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#aa0b26826c28f6d909c882e90c52e6bf5">m0_net_transfer_mc::ntm_recv_queue_deficit</a></div><div class="ttdeci">struct m0_atomic64 ntm_recv_queue_deficit</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00914">net.h:914</a></div></div>
<div class="ttc" id="group__net__buffer__pool_html_ga3108150c6181b9767449f3b2eb0c0f7c"><div class="ttname"><a href="../../d8/d01/group__net__buffer__pool.html#ga3108150c6181b9767449f3b2eb0c0f7c">m0_net_buffer_pool_lock</a></div><div class="ttdeci">M0_INTERNAL void m0_net_buffer_pool_lock(struct m0_net_buffer_pool *pool)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d83/buffer__pool_8c_source.html#l00186">buffer_pool.c:186</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_ac25a898a8ec2a7d4876cdd9ee7e5a19d"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#ac25a898a8ec2a7d4876cdd9ee7e5a19d">m0_net_transfer_mc::ntm_callback_counter</a></div><div class="ttdeci">uint32_t ntm_callback_counter</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00850">net.h:850</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_a35e9b0c8da19dec43ec35c80166013b2"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#a35e9b0c8da19dec43ec35c80166013b2">m0_net_transfer_mc::ntm_dom_linkage</a></div><div class="ttdeci">struct m0_list_link ntm_dom_linkage</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00883">net.h:883</a></div></div>
<div class="ttc" id="structm0__net__buffer_html_a0795ef84ab83782bc69d8b73185165c4"><div class="ttname"><a href="../../d9/d7e/structm0__net__buffer.html#a0795ef84ab83782bc69d8b73185165c4">m0_net_buffer::nb_callbacks</a></div><div class="ttdeci">const struct m0_net_buffer_callbacks * nb_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l01369">net.h:1369</a></div></div>
<div class="ttc" id="assert_8h_html_aea86d55595126b703b9e619887f09a22"><div class="ttname"><a href="../../dc/da7/assert_8h.html#aea86d55595126b703b9e619887f09a22">M0_POST</a></div><div class="ttdeci">#define M0_POST(cond)</div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_a142b6d767fee3f0ae250a85a0e6f968a"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#a142b6d767fee3f0ae250a85a0e6f968a">m0_net_transfer_mc::ntm_q</a></div><div class="ttdeci">struct m0_tl ntm_q[M0_NET_QT_NR]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00877">net.h:877</a></div></div>
<div class="ttc" id="iter__ut_8c_html_a8b1bf9675fb77ab02a105e260477a59b"><div class="ttname"><a href="../../d0/df1/iter__ut_8c.html#a8b1bf9675fb77ab02a105e260477a59b">pool</a></div><div class="ttdeci">static struct m0_pool pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df1/iter__ut_8c_source.html#l00058">iter_ut.c:58</a></div></div>
<div class="ttc" id="group__atomic_html_ga611f47b9f61896df7924843f8d7e95de"><div class="ttname"><a href="../../d3/de8/group__atomic.html#ga611f47b9f61896df7924843f8d7e95de">m0_atomic64_get</a></div><div class="ttdeci">static int64_t m0_atomic64_get(const struct m0_atomic64 *a)</div></div>
<div class="ttc" id="group__net_html_gga4a25e727e622f7aaaedfe8ffa01fa005aa95a74f1b59dffb048013e381c4f6733"><div class="ttname"><a href="../../d9/dd2/group__net.html#gga4a25e727e622f7aaaedfe8ffa01fa005aa95a74f1b59dffb048013e381c4f6733">M0_NET_QT_MSG_RECV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00593">net.h:593</a></div></div>
<div class="ttc" id="group__arith_html_gabcb07645e2a6233c6ce958784aaf9fe3"><div class="ttname"><a href="../../db/dc9/group__arith.html#gabcb07645e2a6233c6ce958784aaf9fe3">M0_CNT_INC</a></div><div class="ttdeci">#define M0_CNT_INC(cnt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/deb/arith_8h_source.html#l00226">arith.h:226</a></div></div>
<div class="ttc" id="group__net_html_ga12df135f261cfd2be817aee51ae5f8a9"><div class="ttname"><a href="../../d9/dd2/group__net.html#ga12df135f261cfd2be817aee51ae5f8a9">m0_net__buffer_add</a></div><div class="ttdeci">M0_INTERNAL int m0_net__buffer_add(struct m0_net_buffer *buf, struct m0_net_transfer_mc *tm)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dff/net_2buf_8c_source.html#l00130">buf.c:130</a></div></div>
<div class="ttc" id="group__net__pvt_html_gaaab2835349be6b88fe5230b89c779608"><div class="ttname"><a href="../../d0/d50/group__net__pvt.html#gaaab2835349be6b88fe5230b89c779608">m0_net__tm_invariant</a></div><div class="ttdeci">M0_INTERNAL bool m0_net__tm_invariant(const struct m0_net_transfer_mc *tm)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dd0/tm_8c_source.html#l00067">tm.c:67</a></div></div>
<div class="ttc" id="structm0__net__buffer__pool_html"><div class="ttname"><a href="../../d4/d52/structm0__net__buffer__pool.html">m0_net_buffer_pool</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d03/buffer__pool_8h_source.html#l00245">buffer_pool.h:245</a></div></div>
<div class="ttc" id="buffer__pool_8h_html"><div class="ttname"><a href="../../d2/d03/buffer__pool_8h.html">buffer_pool.h</a></div></div>
<div class="ttc" id="group__arith_html_ga6ba808bd9de059edf42ab1d70c4c8964"><div class="ttname"><a href="../../db/dc9/group__arith.html#ga6ba808bd9de059edf42ab1d70c4c8964">M0_CNT_DEC</a></div><div class="ttdeci">#define M0_CNT_DEC(cnt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/deb/arith_8h_source.html#l00219">arith.h:219</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_abe37488ce6fba5fdd3aaa0af927c6cbd"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#abe37488ce6fba5fdd3aaa0af927c6cbd">m0_net_transfer_mc::ntm_pool_colour</a></div><div class="ttdeci">uint32_t ntm_pool_colour</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00921">net.h:921</a></div></div>
<div class="ttc" id="cm_2repreb_2trigger__fop_8h_html_ac6509c6fe4cbf7bde170597172f8a288"><div class="ttname"><a href="../../d7/db8/cm_2repreb_2trigger__fop_8h.html#ac6509c6fe4cbf7bde170597172f8a288">rc</a></div><div class="ttdeci">int32_t rc</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/db8/cm_2repreb_2trigger__fop_8h_source.html#l00047">trigger_fop.h:47</a></div></div>
<div class="ttc" id="group__atomic_html_gab25f09c5bb8ae99ab2605ca20db2130f"><div class="ttname"><a href="../../d3/de8/group__atomic.html#gab25f09c5bb8ae99ab2605ca20db2130f">m0_atomic64_set</a></div><div class="ttdeci">static void m0_atomic64_set(struct m0_atomic64 *a, int64_t num)</div></div>
<div class="ttc" id="structm0__net__buffer_html_a43fdc44f1f8f5d5e0be28c07e054160a"><div class="ttname"><a href="../../d9/d7e/structm0__net__buffer.html#a43fdc44f1f8f5d5e0be28c07e054160a">m0_net_buffer::nb_ep</a></div><div class="ttdeci">struct m0_net_end_point * nb_ep</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l01424">net.h:1424</a></div></div>
<div class="ttc" id="structm0__net__transfer__mc_html_ac16e5b955b5bfa853933e1784b57cac3"><div class="ttname"><a href="../../d4/d78/structm0__net__transfer__mc.html#ac16e5b955b5bfa853933e1784b57cac3">m0_net_transfer_mc::ntm_recv_pool</a></div><div class="ttdeci">struct m0_net_buffer_pool * ntm_recv_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db3/net_2net_8h_source.html#l00896">net.h:896</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_427baa8a9a5be237f298d4545d0d1ce2.html">net</a></li><li class="navelem"><a class="el" href="../../d2/d82/tm__provision_8c.html">tm_provision.c</a></li>
    <li class="footer">Generated on Fri May 20 2022 10:35:02 for Motr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
